(function(window){"use strict";
var mbr = {};

if (localStorage['svt.debug'] && localStorage['svt.debug'] !== 'false') {
    window['mbr' + Math.round(Math.random() * 1000)] = mbr;    
}
(() => {
    /*
     This module can be placed to sovetnik script and we should inject it into mbr namespace or
     it can be placed to extension's background page and then we should inject it into svt namespace

     Think about it before refactoring!
     */

    let config = {
        _current: {
            apiHost: '%SOVETNIK_API_HOST%',
            storageHost: '%SOVETNIK_STORAGE_HOST%',
            settingsHost: '%SOVETNIK_SETTINGS_HOST%',
            staticHost: '%SOVETNIK_STORAGE_HOST%' //host to load domains.json and so on. It is used by injectors
        },

        _production: {
            apiHost: 'https://sovetnik.market.yandex.ru',
            storageHost: 'https://dl.metabar.ru',
            settingsHost: 'https://sovetnik.market.yandex.ru',
            landingHost: 'https://sovetnik.yandex.ru',
            staticHost: 'https://yastatic.net'
        },

        /**
         * return true if host is not a template-string
         * @param host
         * @returns {Boolean}
         * @private
         */
        _isPatched(host) {
            return !/^%[^%]+%$/.test(host);
        },

        /**
         * get host value by name. If host has been patched, we have current host. Otherwise - host from production
         * @param {String} hostName apiHost, storageHost or settingsHost
         * @returns {String}
         * @private
         */
        _getHost(hostName) {
            if (this._current[hostName] && this._isPatched(this._current[hostName])) {
                return this._current[hostName];
            }
            return this._production[hostName];
        },

        getApiHost() {
            return this._getHost('apiHost');
        },

        getStorageHost() {
            return this._getHost('storageHost');
        },

        getSettingsURL() {
            const host = this._getHost('settingsHost');
            if (host === this._production.settingsHost) {
                return host + '/app/settings';
            } else {
                return host + '/sovetnik';
            }
        },

        getSettingsURLMobile: function() {
            var host = this._getHost('settingsHost');
            if (host === this._production.settingsHost) {
                return host + '/mobile/settings';
            } else {
                return host + '/sovetnik-mobile';
            }
        },

        getSettingsHost() {
            return this._getHost('settingsHost');
        },

        getClientEventUrl() {
            return this._getHost('apiHost') + '/client';
        },

        getLandingHost() {
            return this._getHost('landingHost');
        },

        getDomainsJSONUrl() {
            if (this._getHost('staticHost') === this._production.staticHost) {
                return this._getHost('staticHost') + '/sovetnik/_/script-data/domains.json';
            }

            return this._getHost('staticHost') + '/static/script-data/domains.json';
        },
        
        getUninstallUrl() {
            return this.getLandingHost() + '/goodbye';
        }
    };

    if (typeof mbr !== 'undefined') {
        mbr.config = config;
    }
    if (typeof svt !== 'undefined') {
        svt.config = config;
    }
})();
/*
 * Lightweight JSONP fetcher
 * Copyright 2010-2012 Erik Karlsson. All rights reserved.
 * BSD licensed
 *
 * Usage:
 *
 * JSONP.get( 'someUrl.php', {param1:'123', param2:'456'}, function(data){
 *   //do something with data, which is the JSON object you should retrieve from someUrl.php
 * });
 */
mbr.JSONP = (function() {
    var counter = 0, head, config = {};

    function load(url, pfnError) {
        var script = window.document.createElement('script'),
            done = false;
        script.src = url;
        script.async = true;

        var errorHandler = pfnError || config.error;
        if (typeof errorHandler === 'function') {
            script.onerror = function(ex) {
                errorHandler({url: url, event: ex});
            };
        }

        script.onload = script.onreadystatechange = function() {
            if (!done && (!this.readyState || this.readyState === "loaded" || this.readyState === "complete")) {
                done = true;
                script.onload = script.onreadystatechange = null;
                if (script && script.parentNode) {
                    script.parentNode.removeChild(script);
                }
            }
        };

        if (!head) {
            head = window.document.getElementsByTagName('head')[0];
        }
        head.appendChild(script);
    }

    function encode(str) {
        //noinspection JSUnresolvedFunction
        return encodeURIComponent(str);
    }

    function jsonp(url, params, callback, callbackName) {
        var query = (url || '').indexOf('?') === -1 ? '?' : '&', key;

        callbackName = (callbackName || config['callbackName'] || 'callback');
        var uniqueName = 'metabar_' + callbackName + "_json" + (++counter);

        params = params || {};
        for (key in params) {
            //noinspection JSUnresolvedFunction
            if (params.hasOwnProperty(key)) {
                query += encode(key) + "=" + encode(params[key]) + "&";
            }
        }

        window[ uniqueName ] = function(data) {
            callback(data);
            try {
                delete window[ uniqueName ];
            } catch (e) {
            }
            window[ uniqueName ] = null;
        };

        load(url + query + callbackName + '=' + uniqueName);
        return uniqueName;
    }

    function setDefaults(obj) {
        config = obj;
    }

    return {
        get: jsonp,
        init: setDefaults
    };
}());
// eo JSONP
var name = "Mediator";var exports = {}; var module = { exports : exports };var define = function(module) { mbr[name] = module; }; define.amd = true;

/*jslint bitwise: true, nomen: true, plusplus: true, white: true */

/*!
 * Mediator.js Library v0.9.7
 * https://github.com/ajacksified/Mediator.js
 *
 * Copyright 2013, Jack Lawson
 * MIT Licensed (http://www.opensource.org/licenses/mit-license.php)
 *
 * For more information: http://thejacklawson.com/2011/06/mediators-for-modularized-asynchronous-programming-in-javascript/index.html
 * Project on GitHub: https://github.com/ajacksified/Mediator.js
 *
 * Last update: October 19 2013
 */

(function(global, factory) {
    'use strict';

    if(typeof exports !== 'undefined') {
        // Node/CommonJS
        exports.Mediator = factory();
    } else if(typeof define === 'function' && define.amd) {
        // AMD
        define('mediator-js', [], function() {
            global.Mediator = factory();
            return global.Mediator;
        });
    } else {
        // Browser global
        global.Mediator = factory();
    }
}(this, function() {
    'use strict';

    // We'll generate guids for class instances for easy referencing later on.
    // Subscriber instances will have an id that can be refernced for quick
    // lookups.

    function guidGenerator() {
        var S4 = function() {
            return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
        };

        return (S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4());
    }

    // Subscribers are instances of Mediator Channel registrations. We generate
    // an object instance so that it can be updated later on without having to
    // unregister and re-register. Subscribers are constructed with a function
    // to be called, options object, and context.

    function Subscriber(fn, options, context){
        if(!(this instanceof Subscriber)) {
            return new Subscriber(fn, options, context);
        }

        this.id = guidGenerator();
        this.fn = fn;
        this.options = options;
        this.context = context;
        this.channel = null;
    }

    Subscriber.prototype = {
        // Mediator.update on a subscriber instance can update its function,context,
        // or options object. It takes in an object and looks for fn, context, or
        // options keys.

        update: function(options){
            if(options){
                this.fn = options.fn || this.fn;
                this.context = options.context || this.context;
                this.options = options.options || this.options;
                if(this.channel && this.options && this.options.priority !== undefined) {
                    this.channel.setPriority(this.id, this.options.priority);
                }
            }
        }
    };


    function Channel(namespace, parent){
        if(!(this instanceof Channel)) {
            return new Channel(namespace);
        }

        this.namespace = namespace || "";
        this._subscribers = [];
        this._channels = [];
        this._parent = parent;
        this.stopped = false;
    }

    // A Mediator channel holds a list of sub-channels and subscribers to be fired
    // when Mediator.publish is called on the Mediator instance. It also contains
    // some methods to manipulate its lists of data; only setPriority and
    // StopPropagation are meant to be used. The other methods should be accessed
    // through the Mediator instance.

    Channel.prototype = {
        addSubscriber: function(fn, options, context){
            var subscriber = new Subscriber(fn, options, context);

            if(options && options.priority !== undefined){
                // Cheap hack to either parse as an int or turn it into 0. Runs faster
                // in many browsers than parseInt with the benefit that it won't
                // return a NaN.
                options.priority = options.priority >> 0;

                if(options.priority < 0){ options.priority = 0; }
                if(options.priority >= this._subscribers.length){ options.priority = this._subscribers.length-1; }

                this._subscribers.splice(options.priority, 0, subscriber);
            }else{
                this._subscribers.push(subscriber);
            }

            subscriber.channel = this;

            return subscriber;
        },

        // The channel instance is passed as an argument to the mediator subscriber,
        // and further subscriber propagation can be called with
        // channel.StopPropagation().
        stopPropagation: function(){
            this.stopped = true;
        },

        getSubscriber: function(identifier){
            var x = 0,
                y = this._subscribers.length;

            for(x, y; x < y; x++){
                if(this._subscribers[x].id === identifier || this._subscribers[x].fn === identifier){
                    return this._subscribers[x];
                }
            }
        },

        // Channel.setPriority is useful in updating the order in which Subscribers
        // are called, and takes an identifier (subscriber id or named function) and
        // an array index. It will not search recursively through subchannels.

        setPriority: function(identifier, priority){
            var oldIndex = 0,
                x = 0,
                sub, firstHalf, lastHalf, y;

            for(x = 0, y = this._subscribers.length; x < y; x++){
                if(this._subscribers[x].id === identifier || this._subscribers[x].fn === identifier){
                    break;
                }
                oldIndex ++;
            }

            sub = this._subscribers[oldIndex];
            firstHalf = this._subscribers.slice(0, oldIndex);
            lastHalf = this._subscribers.slice(oldIndex+1);

            this._subscribers = firstHalf.concat(lastHalf);
            this._subscribers.splice(priority, 0, sub);
        },

        addChannel: function(channel){
            this._channels[channel] = new Channel((this.namespace ? this.namespace + ':' : '') + channel, this);
        },

        hasChannel: function(channel){
            return this._channels.hasOwnProperty(channel);
        },

        returnChannel: function(channel){
            return this._channels[channel];
        },

        removeSubscriber: function(identifier){
            var x = this._subscribers.length - 1;

            // If we don't pass in an id, we're clearing all
            if(!identifier){
                this._subscribers = [];
                return;
            }

            // Going backwards makes splicing a whole lot easier.
            for(x; x >= 0; x--) {
                if(this._subscribers[x].fn === identifier || this._subscribers[x].id === identifier){
                    this._subscribers[x].channel = null;
                    this._subscribers.splice(x,1);
                }
            }
        },

        // This will publish arbitrary arguments to a subscriber and then to parent
        // channels.

        publish: function(data){
            var x = 0,
                y = this._subscribers.length,
                called = false,
                subscriber, l,
                subsBefore,subsAfter;

            // Priority is preserved in the _subscribers index.
            for(x, y; x < y; x++) {
                called = false;

                if(!this.stopped){
                    subscriber = this._subscribers[x];
                    if(subscriber.options !== undefined && typeof subscriber.options.predicate === "function"){
                        if(subscriber.options.predicate.apply(subscriber.context, data)){
                            subscriber.fn.apply(subscriber.context, data);
                            called = true;
                        }
                    }else{
                        subsBefore = this._subscribers.length;
                        subscriber.fn.apply(subscriber.context, data);
                        subsAfter = this._subscribers.length;
                        y = subsAfter;
                        if (subsAfter === subsBefore - 1){
                            x--;
                        }
                        called = true;
                    }
                }

                if(called && subscriber.options && subscriber.options !== undefined){
                    subscriber.options.calls--;

                    if(subscriber.options.calls < 1){
                        this.removeSubscriber(subscriber.id);
                        y--;
                        x--;
                    }
                }
            }

            if(this._parent){
                this._parent.publish(data);
            }

            this.stopped = false;
        }
    };

    function Mediator() {
        if(!(this instanceof Mediator)) {
            return new Mediator();
        }

        this._channels = new Channel('');
    }

    // A Mediator instance is the interface through which events are registered
    // and removed from publish channels.

    Mediator.prototype = {

        // Returns a channel instance based on namespace, for example
        // application:chat:message:received

        getChannel: function(namespace){
            var channel = this._channels,
                namespaceHierarchy = namespace.split(':'),
                x = 0,
                y = namespaceHierarchy.length;

            if(namespace === ''){
                return channel;
            }

            if(namespaceHierarchy.length > 0){
                for(x, y; x < y; x++){

                    if(!channel.hasChannel(namespaceHierarchy[x])){
                        channel.addChannel(namespaceHierarchy[x]);
                    }

                    channel = channel.returnChannel(namespaceHierarchy[x]);
                }
            }

            return channel;
        },

        // Pass in a channel namespace, function to be called, options, and context
        // to call the function in to Subscribe. It will create a channel if one
        // does not exist. Options can include a predicate to determine if it
        // should be called (based on the data published to it) and a priority
        // index.

        subscribe: function(channelName, fn, options, context){
            var channel = this.getChannel(channelName);

            options = options || {};
            context = context || {};

            return channel.addSubscriber(fn, options, context);
        },

        // Pass in a channel namespace, function to be called, options, and context
        // to call the function in to Subscribe. It will create a channel if one
        // does not exist. Options can include a predicate to determine if it
        // should be called (based on the data published to it) and a priority
        // index.

        once: function(channelName, fn, options, context){
            options = options || {};
            options.calls = 1;

            return this.subscribe(channelName, fn, options, context);
        },

        // Returns a subscriber for a given subscriber id / named function and
        // channel namespace

        getSubscriber: function(identifier, channel){
            return this.getChannel(channel || "").getSubscriber(identifier);
        },

        // Remove a subscriber from a given channel namespace recursively based on
        // a passed-in subscriber id or named function.

        remove: function(channelName, identifier){
            this.getChannel(channelName).removeSubscriber(identifier);
        },

        // Publishes arbitrary data to a given channel namespace. Channels are
        // called recursively downwards; a post to application:chat will post to
        // application:chat:receive and application:chat:derp:test:beta:bananas.
        // Called using Mediator.publish("application:chat", [ args ]);

        publish: function(channelName){
            var args = Array.prototype.slice.call(arguments, 1),
                channel = this.getChannel(channelName);

            args.push(channel);

            this.getChannel(channelName).publish(args);
        }
    };

    // Alias some common names for easy interop
    Mediator.prototype.on = Mediator.prototype.subscribe;
    Mediator.prototype.bind = Mediator.prototype.subscribe;
    Mediator.prototype.emit = Mediator.prototype.publish;
    Mediator.prototype.trigger = Mediator.prototype.publish;
    Mediator.prototype.off = Mediator.prototype.remove;

    // Finally, expose it all.

    Mediator.Channel = Channel;
    Mediator.Subscriber = Subscriber;
    Mediator.version = "0.9.7";

    return Mediator;
}));
  
mbr[name] = mbr[name] || exports[name] || module.exports[name] || module.exports || exports;

var name = "Mustache";var exports = {}; var module = { exports : exports };var define = function(module) { mbr[name] = module; }; define.amd = true;

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/*global define: false*/

(function (global, factory) {
    if (typeof exports === "object" && exports) {
        factory(exports); // CommonJS
    } else if (typeof define === "function" && define.amd) {
        define(['exports'], factory); // AMD
    } else {
        factory(global.Mustache = {}); // <script>
    }
}(this, function (mustache) {

    var Object_toString = Object.prototype.toString;
    var isArray = Array.isArray || function (object) {
        return Object_toString.call(object) === '[object Array]';
    };

    function isFunction(object) {
        return typeof object === 'function';
    }

    function escapeRegExp(string) {
        return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
    }

    // Workaround for https://issues.apache.org/jira/browse/COUCHDB-577
    // See https://github.com/janl/mustache.js/issues/189
    var RegExp_test = RegExp.prototype.test;
    function testRegExp(re, string) {
        return RegExp_test.call(re, string);
    }

    var nonSpaceRe = /\S/;
    function isWhitespace(string) {
        return !testRegExp(nonSpaceRe, string);
    }

    var entityMap = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': '&quot;',
        "'": '&#39;',
        "/": '&#x2F;'
    };

    function escapeHtml(string) {
        return String(string).replace(/[&<>"'\/]/g, function (s) {
            return entityMap[s];
        });
    }

    var whiteRe = /\s*/;
    var spaceRe = /\s+/;
    var equalsRe = /\s*=/;
    var curlyRe = /\s*\}/;
    var tagRe = /#|\^|\/|>|\{|&|=|!/;

    /**
     * Breaks up the given `template` string into a tree of tokens. If the `tags`
     * argument is given here it must be an array with two string values: the
     * opening and closing tags used in the template (e.g. [ "<%", "%>" ]). Of
     * course, the default is to use mustaches (i.e. mustache.tags).
     *
     * A token is an array with at least 4 elements. The first element is the
     * mustache symbol that was used inside the tag, e.g. "#" or "&". If the tag
     * did not contain a symbol (i.e. {{myValue}}) this element is "name". For
     * all text that appears outside a symbol this element is "text".
     *
     * The second element of a token is its "value". For mustache tags this is
     * whatever else was inside the tag besides the opening symbol. For text tokens
     * this is the text itself.
     *
     * The third and fourth elements of the token are the start and end indices,
     * respectively, of the token in the original template.
     *
     * Tokens that are the root node of a subtree contain two more elements: 1) an
     * array of tokens in the subtree and 2) the index in the original template at
     * which the closing tag for that section begins.
     */
    function parseTemplate(template, tags) {
        if (!template)
            return [];

        var sections = [];     // Stack to hold section tokens
        var tokens = [];       // Buffer to hold the tokens
        var spaces = [];       // Indices of whitespace tokens on the current line
        var hasTag = false;    // Is there a {{tag}} on the current line?
        var nonSpace = false;  // Is there a non-space char on the current line?

        // Strips all whitespace tokens array for the current line
        // if there was a {{#tag}} on it and otherwise only space.
        function stripSpace() {
            if (hasTag && !nonSpace) {
                while (spaces.length)
                    delete tokens[spaces.pop()];
            } else {
                spaces = [];
            }

            hasTag = false;
            nonSpace = false;
        }

        var openingTagRe, closingTagRe, closingCurlyRe;
        function compileTags(tags) {
            if (typeof tags === 'string')
                tags = tags.split(spaceRe, 2);

            if (!isArray(tags) || tags.length !== 2)
                throw new Error('Invalid tags: ' + tags);

            openingTagRe = new RegExp(escapeRegExp(tags[0]) + '\\s*');
            closingTagRe = new RegExp('\\s*' + escapeRegExp(tags[1]));
            closingCurlyRe = new RegExp('\\s*' + escapeRegExp('}' + tags[1]));
        }

        compileTags(tags || mustache.tags);

        var scanner = new Scanner(template);

        var start, type, value, chr, token, openSection;
        while (!scanner.eos()) {
            start = scanner.pos;

            // Match any text between tags.
            value = scanner.scanUntil(openingTagRe);

            if (value) {
                for (var i = 0, valueLength = value.length; i < valueLength; ++i) {
                    chr = value.charAt(i);

                    if (isWhitespace(chr)) {
                        spaces.push(tokens.length);
                    } else {
                        nonSpace = true;
                    }

                    tokens.push([ 'text', chr, start, start + 1 ]);
                    start += 1;

                    // Check for whitespace on the current line.
                    if (chr === '\n')
                        stripSpace();
                }
            }

            // Match the opening tag.
            if (!scanner.scan(openingTagRe))
                break;

            hasTag = true;

            // Get the tag type.
            type = scanner.scan(tagRe) || 'name';
            scanner.scan(whiteRe);

            // Get the tag value.
            if (type === '=') {
                value = scanner.scanUntil(equalsRe);
                scanner.scan(equalsRe);
                scanner.scanUntil(closingTagRe);
            } else if (type === '{') {
                value = scanner.scanUntil(closingCurlyRe);
                scanner.scan(curlyRe);
                scanner.scanUntil(closingTagRe);
                type = '&';
            } else {
                value = scanner.scanUntil(closingTagRe);
            }

            // Match the closing tag.
            if (!scanner.scan(closingTagRe))
                throw new Error('Unclosed tag at ' + scanner.pos);

            token = [ type, value, start, scanner.pos ];
            tokens.push(token);

            if (type === '#' || type === '^') {
                sections.push(token);
            } else if (type === '/') {
                // Check section nesting.
                openSection = sections.pop();

                if (!openSection)
                    throw new Error('Unopened section "' + value + '" at ' + start);

                if (openSection[1] !== value)
                    throw new Error('Unclosed section "' + openSection[1] + '" at ' + start);
            } else if (type === 'name' || type === '{' || type === '&') {
                nonSpace = true;
            } else if (type === '=') {
                // Set the tags for the next time around.
                compileTags(value);
            }
        }

        // Make sure there are no open sections when we're done.
        openSection = sections.pop();

        if (openSection)
            throw new Error('Unclosed section "' + openSection[1] + '" at ' + scanner.pos);

        return nestTokens(squashTokens(tokens));
    }

    /**
     * Combines the values of consecutive text tokens in the given `tokens` array
     * to a single token.
     */
    function squashTokens(tokens) {
        var squashedTokens = [];

        var token, lastToken;
        for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {
            token = tokens[i];

            if (token) {
                if (token[0] === 'text' && lastToken && lastToken[0] === 'text') {
                    lastToken[1] += token[1];
                    lastToken[3] = token[3];
                } else {
                    squashedTokens.push(token);
                    lastToken = token;
                }
            }
        }

        return squashedTokens;
    }

    /**
     * Forms the given array of `tokens` into a nested tree structure where
     * tokens that represent a section have two additional items: 1) an array of
     * all tokens that appear in that section and 2) the index in the original
     * template that represents the end of that section.
     */
    function nestTokens(tokens) {
        var nestedTokens = [];
        var collector = nestedTokens;
        var sections = [];

        var token, section;
        for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {
            token = tokens[i];

            switch (token[0]) {
                case '#':
                case '^':
                    collector.push(token);
                    sections.push(token);
                    collector = token[4] = [];
                    break;
                case '/':
                    section = sections.pop();
                    section[5] = token[2];
                    collector = sections.length > 0 ? sections[sections.length - 1][4] : nestedTokens;
                    break;
                default:
                    collector.push(token);
            }
        }

        return nestedTokens;
    }

    /**
     * A simple string scanner that is used by the template parser to find
     * tokens in template strings.
     */
    function Scanner(string) {
        this.string = string;
        this.tail = string;
        this.pos = 0;
    }

    /**
     * Returns `true` if the tail is empty (end of string).
     */
    Scanner.prototype.eos = function () {
        return this.tail === "";
    };

    /**
     * Tries to match the given regular expression at the current position.
     * Returns the matched text if it can match, the empty string otherwise.
     */
    Scanner.prototype.scan = function (re) {
        var match = this.tail.match(re);

        if (!match || match.index !== 0)
            return '';

        var string = match[0];

        this.tail = this.tail.substring(string.length);
        this.pos += string.length;

        return string;
    };

    /**
     * Skips all text until the given regular expression can be matched. Returns
     * the skipped string, which is the entire tail if no match can be made.
     */
    Scanner.prototype.scanUntil = function (re) {
        var index = this.tail.search(re), match;

        switch (index) {
            case -1:
                match = this.tail;
                this.tail = "";
                break;
            case 0:
                match = "";
                break;
            default:
                match = this.tail.substring(0, index);
                this.tail = this.tail.substring(index);
        }

        this.pos += match.length;

        return match;
    };

    /**
     * Represents a rendering context by wrapping a view object and
     * maintaining a reference to the parent context.
     */
    function Context(view, parentContext) {
        this.view = view == null ? {} : view;
        this.cache = { '.': this.view };
        this.parent = parentContext;
    }

    /**
     * Creates a new context using the given view with this context
     * as the parent.
     */
    Context.prototype.push = function (view) {
        return new Context(view, this);
    };

    /**
     * Returns the value of the given name in this context, traversing
     * up the context hierarchy if the value is absent in this context's view.
     */
    Context.prototype.lookup = function (name) {
        var cache = this.cache;

        var value;
        if (name in cache) {
            value = cache[name];
        } else {
            var context = this, names, index;

            while (context) {
                if (name.indexOf('.') > 0) {
                    value = context.view;
                    names = name.split('.');
                    index = 0;

                    while (value != null && index < names.length)
                        value = value[names[index++]];
                } else {
                    value = context.view[name];
                }

                if (value != null)
                    break;

                context = context.parent;
            }

            cache[name] = value;
        }

        if (isFunction(value))
            value = value.call(this.view);

        return value;
    };

    /**
     * A Writer knows how to take a stream of tokens and render them to a
     * string, given a context. It also maintains a cache of templates to
     * avoid the need to parse the same template twice.
     */
    function Writer() {
        this.cache = {};
    }

    /**
     * Clears all cached templates in this writer.
     */
    Writer.prototype.clearCache = function () {
        this.cache = {};
    };

    /**
     * Parses and caches the given `template` and returns the array of tokens
     * that is generated from the parse.
     */
    Writer.prototype.parse = function (template, tags) {
        var cache = this.cache;
        var tokens = cache[template];

        if (tokens == null)
            tokens = cache[template] = parseTemplate(template, tags);

        return tokens;
    };

    /**
     * High-level method that is used to render the given `template` with
     * the given `view`.
     *
     * The optional `partials` argument may be an object that contains the
     * names and templates of partials that are used in the template. It may
     * also be a function that is used to load partial templates on the fly
     * that takes a single argument: the name of the partial.
     */
    Writer.prototype.render = function (template, view, partials) {
        var tokens = this.parse(template);
        var context = (view instanceof Context) ? view : new Context(view);
        return this.renderTokens(tokens, context, partials, template);
    };

    /**
     * Low-level method that renders the given array of `tokens` using
     * the given `context` and `partials`.
     *
     * Note: The `originalTemplate` is only ever used to extract the portion
     * of the original template that was contained in a higher-order section.
     * If the template doesn't use higher-order sections, this argument may
     * be omitted.
     */
    Writer.prototype.renderTokens = function (tokens, context, partials, originalTemplate) {
        var buffer = '';

        // This function is used to render an arbitrary template
        // in the current context by higher-order sections.
        var self = this;
        function subRender(template) {
            return self.render(template, context, partials);
        }

        var token, value;
        for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {
            token = tokens[i];

            switch (token[0]) {
                case '#':
                    value = context.lookup(token[1]);

                    if (!value)
                        continue;

                    if (isArray(value)) {
                        for (var j = 0, valueLength = value.length; j < valueLength; ++j) {
                            buffer += this.renderTokens(token[4], context.push(value[j]), partials, originalTemplate);
                        }
                    } else if (typeof value === 'object' || typeof value === 'string') {
                        buffer += this.renderTokens(token[4], context.push(value), partials, originalTemplate);
                    } else if (isFunction(value)) {
                        if (typeof originalTemplate !== 'string')
                            throw new Error('Cannot use higher-order sections without the original template');

                        // Extract the portion of the original template that the section contains.
                        value = value.call(context.view, originalTemplate.slice(token[3], token[5]), subRender);

                        if (value != null)
                            buffer += value;
                    } else {
                        buffer += this.renderTokens(token[4], context, partials, originalTemplate);
                    }

                    break;
                case '^':
                    value = context.lookup(token[1]);

                    // Use JavaScript's definition of falsy. Include empty arrays.
                    // See https://github.com/janl/mustache.js/issues/186
                    if (!value || (isArray(value) && value.length === 0))
                        buffer += this.renderTokens(token[4], context, partials, originalTemplate);

                    break;
                case '>':
                    if (!partials)
                        continue;

                    value = isFunction(partials) ? partials(token[1]) : partials[token[1]];

                    if (value != null)
                        buffer += this.renderTokens(this.parse(value), context, partials, value);

                    break;
                case '&':
                    value = context.lookup(token[1]);

                    if (value != null)
                        buffer += value;

                    break;
                case 'name':
                    value = context.lookup(token[1]);

                    if (value != null)
                        buffer += mustache.escape(value);

                    break;
                case 'text':
                    buffer += token[1];
                    break;
            }
        }

        return buffer;
    };

    mustache.name = "mustache.js";
    mustache.version = "0.8.1";
    mustache.tags = [ "{{", "}}" ];

    // All high-level mustache.* functions use this writer.
    var defaultWriter = new Writer();

    /**
     * Clears all cached templates in the default writer.
     */
    mustache.clearCache = function () {
        return defaultWriter.clearCache();
    };

    /**
     * Parses and caches the given template in the default writer and returns the
     * array of tokens it contains. Doing this ahead of time avoids the need to
     * parse templates on the fly as they are rendered.
     */
    mustache.parse = function (template, tags) {
        return defaultWriter.parse(template, tags);
    };

    /**
     * Renders the `template` with the given `view` and `partials` using the
     * default writer.
     */
    mustache.render = function (template, view, partials) {
        return defaultWriter.render(template, view, partials);
    };

    // This is here for backwards compatibility with 0.4.x.
    mustache.to_html = function (template, view, partials, send) {
        var result = mustache.render(template, view, partials);

        if (isFunction(send)) {
            send(result);
        } else {
            return result;
        }
    };

    // Export the escaping function so that the user may override it.
    // See https://github.com/janl/mustache.js/issues/244
    mustache.escape = escapeHtml;

    // Export these mainly for testing, but also for advanced usage.
    mustache.Scanner = Scanner;
    mustache.Context = Context;
    mustache.Writer = Writer;

}));
mbr[name] = mbr[name] || exports[name] || module.exports[name] || module.exports || exports;

var name = "Promise";var exports = {}; var module = { exports : exports };var define = function(module) { mbr[name] = module; }; define.amd = true;

/**@license MIT-promiscuous-©Ruben Verborgh*/
(function (func, obj) {
    // Type checking utility function
    function is(type, item) { return (typeof item)[0] == type; }

    // Creates a promise, calling callback(resolve, reject), ignoring other parameters.
    function Promise(callback, handler) {
        // The `handler` variable points to the function that will
        // 1) handle a .then(resolved, rejected) call
        // 2) handle a resolve or reject call (if the first argument === `is`)
        // Before 2), `handler` holds a queue of callbacks.
        // After 2), `handler` is a finalized .then handler.
        handler = function pendingHandler(resolved, rejected, value, queue, then, i) {
            function valueHandler(resolved) {
                return function (value) { then && (then = 0, pendingHandler(is, resolved, value)); };
            }

            queue = pendingHandler.q;

            // Case 1) handle a .then(resolved, rejected) call
            if (resolved != is) {
                return Promise(function (resolve, reject) {
                    queue.push({ p: this, r: resolve, j: reject, 1: resolved, 0: rejected });
                });
            }

            // Case 2) handle a resolve or reject call
            // (`resolved` === `is` acts as a sentinel)
            // The actual function signature is
            // .re[ject|solve](<is>, success, value)

            // Check if the value is a promise and try to obtain its `then` method
            if (value && (is(func, value) | is(obj, value))) {
                try { then = value.then; }
                catch (reason) { rejected = 0; value = reason; }
            }
            // If the value is a promise, take over its state
            if (is(func, then)) {
                try { then.call(value, valueHandler(1), rejected = valueHandler(0)); }
                catch (reason) { rejected(reason); }
            }
            // The value is not a promise; handle resolve/reject
            else {
                // Replace this handler with a finalized resolved/rejected handler
                handler = function (Resolved, Rejected) {
                    // If the Resolved or Rejected parameter is not a function,
                    // return the original promise (now stored in the `callback` variable)
                    if (!is(func, (Resolved = rejected ? Resolved : Rejected)))
                        return callback;
                    // Otherwise, return a finalized promise, transforming the value with the function
                    return Promise(function (resolve, reject) { finalize(this, resolve, reject, value, Resolved); });
                };
                // Resolve/reject pending callbacks
                i = 0;
                while (i < queue.length) {
                    then = queue[i++];
                    // If no callback, just resolve/reject the promise
                    if (!is(func, resolved = then[rejected]))
                        (rejected ? then.r : then.j)(value);
                    // Otherwise, resolve/reject the promise with the result of the callback
                    else
                        finalize(then.p, then.r, then.j, value, resolved);
                }
            }
        };
        // The queue of pending callbacks; garbage-collected when handler is resolved/rejected
        handler.q = [];

        // Create and return the promise (reusing the callback variable)
        callback.call(callback = { then:  function (resolved, rejected) { return handler(resolved, rejected); },
                catch: function (rejected)           { return handler(0,        rejected); } },
            function (value)  { handler(is, 1,  value); },
            function (reason) { handler(is, 0, reason); });
        return callback;
    }

    // Finalizes the promise by resolving/rejecting it with the transformed value
    function finalize(promise, resolve, reject, value, transform) {
        setTimeout(function () {
            try {
                // Transform the value through and check whether it's a promise
                value = transform(value);
                transform = value && (is(obj, value) | is(func, value)) && value.then;
                // Return the result if it's not a promise
                if (!is(func, transform))
                    resolve(value);
                // If it's a promise, make sure it's not circular
                else if (value == promise)
                    reject(TypeError());
                // Take over the promise's state
                else
                    transform.call(value, resolve, reject);
            }
            catch (error) { reject(error); }
        });
    }

    // Export the main module
    module.exports = Promise;

    // Creates a resolved promise
    Promise.resolve = ResolvedPromise;
    function ResolvedPromise(value) { return Promise(function (resolve) { resolve(value); }); }

    // Creates a rejected promise
    Promise.reject = function (reason) { return Promise(function (resolve, reject) { reject(reason); }); };

    // Transforms an array of promises into a promise for an array
    Promise.all = function (promises) {
        return Promise(function (resolve, reject, count, values) {
            // Array of collected values
            values = [];
            // Resolve immediately if there are no promises
            count = promises.length || resolve(values);
            // Transform all elements (`map` is shorter than `forEach`)
            promises.map(function (promise, index) {
                ResolvedPromise(promise).then(
                    // Store the value and resolve if it was the last
                    function (value) {
                        values[index] = value;
                        --count || resolve(values);
                    },
                    // Reject if one element fails
                    reject);
            });
        });
    };

    /**
     * Create a pipe for promises.
     * When first promise has resolved, second function will be called.
     * When second promise has resolved, third function will be called.
     * Etc.
     * If some promise has rejected, next function won't be called.
     * @param {[Function]} functions array of functions, which return a promise
     * @param {Object} data param for passing to first function
     */
    Promise.queue = function(functions, data) {
        function _addFunctionToQueue(resolve, reject, args) {
            args = Array.prototype.slice.call(arguments, 2);
            var func = functions.shift();
            if (func) {
                var promise = func.apply(null, args);
                promise.then(function() {
                    var args = Array.prototype.slice.call(arguments);
                    args = [resolve, reject].concat(args);

                    _addFunctionToQueue.apply(null, args);
                }, reject);
            } else {
                resolve.apply(null, args);
            }
        }
        return new Promise(function(resolve, reject) {
            _addFunctionToQueue(resolve,reject, data);
        });
    }
})('f', 'o');
mbr[name] = mbr[name] || exports[name] || module.exports[name] || module.exports || exports;

/*
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/
var CryptoJS=CryptoJS||function(s,p){var m={},l=m.lib={},n=function(){},r=l.Base={extend:function(b){n.prototype=this;var h=new n;b&&h.mixIn(b);h.hasOwnProperty("init")||(h.init=function(){h.$super.init.apply(this,arguments)});h.init.prototype=h;h.$super=this;return h},create:function(){var b=this.extend();b.init.apply(b,arguments);return b},init:function(){},mixIn:function(b){for(var h in b)b.hasOwnProperty(h)&&(this[h]=b[h]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}},
q=l.WordArray=r.extend({init:function(b,h){b=this.words=b||[];this.sigBytes=h!=p?h:4*b.length},toString:function(b){return(b||t).stringify(this)},concat:function(b){var h=this.words,a=b.words,j=this.sigBytes;b=b.sigBytes;this.clamp();if(j%4)for(var g=0;g<b;g++)h[j+g>>>2]|=(a[g>>>2]>>>24-8*(g%4)&255)<<24-8*((j+g)%4);else if(65535<a.length)for(g=0;g<b;g+=4)h[j+g>>>2]=a[g>>>2];else h.push.apply(h,a);this.sigBytes+=b;return this},clamp:function(){var b=this.words,h=this.sigBytes;b[h>>>2]&=4294967295<<
32-8*(h%4);b.length=s.ceil(h/4)},clone:function(){var b=r.clone.call(this);b.words=this.words.slice(0);return b},random:function(b){for(var h=[],a=0;a<b;a+=4)h.push(4294967296*s.random()|0);return new q.init(h,b)}}),v=m.enc={},t=v.Hex={stringify:function(b){var a=b.words;b=b.sigBytes;for(var g=[],j=0;j<b;j++){var k=a[j>>>2]>>>24-8*(j%4)&255;g.push((k>>>4).toString(16));g.push((k&15).toString(16))}return g.join("")},parse:function(b){for(var a=b.length,g=[],j=0;j<a;j+=2)g[j>>>3]|=parseInt(b.substr(j,
2),16)<<24-4*(j%8);return new q.init(g,a/2)}},a=v.Latin1={stringify:function(b){var a=b.words;b=b.sigBytes;for(var g=[],j=0;j<b;j++)g.push(String.fromCharCode(a[j>>>2]>>>24-8*(j%4)&255));return g.join("")},parse:function(b){for(var a=b.length,g=[],j=0;j<a;j++)g[j>>>2]|=(b.charCodeAt(j)&255)<<24-8*(j%4);return new q.init(g,a)}},u=v.Utf8={stringify:function(b){try{return decodeURIComponent(escape(a.stringify(b)))}catch(g){throw Error("Malformed UTF-8 data");}},parse:function(b){return a.parse(unescape(encodeURIComponent(b)))}},
g=l.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new q.init;this._nDataBytes=0},_append:function(b){"string"==typeof b&&(b=u.parse(b));this._data.concat(b);this._nDataBytes+=b.sigBytes},_process:function(b){var a=this._data,g=a.words,j=a.sigBytes,k=this.blockSize,m=j/(4*k),m=b?s.ceil(m):s.max((m|0)-this._minBufferSize,0);b=m*k;j=s.min(4*b,j);if(b){for(var l=0;l<b;l+=k)this._doProcessBlock(g,l);l=g.splice(0,b);a.sigBytes-=j}return new q.init(l,j)},clone:function(){var b=r.clone.call(this);
b._data=this._data.clone();return b},_minBufferSize:0});l.Hasher=g.extend({cfg:r.extend(),init:function(b){this.cfg=this.cfg.extend(b);this.reset()},reset:function(){g.reset.call(this);this._doReset()},update:function(b){this._append(b);this._process();return this},finalize:function(b){b&&this._append(b);return this._doFinalize()},blockSize:16,_createHelper:function(b){return function(a,g){return(new b.init(g)).finalize(a)}},_createHmacHelper:function(b){return function(a,g){return(new k.HMAC.init(b,
g)).finalize(a)}}});var k=m.algo={};return m}(Math);
(function(s){function p(a,k,b,h,l,j,m){a=a+(k&b|~k&h)+l+m;return(a<<j|a>>>32-j)+k}function m(a,k,b,h,l,j,m){a=a+(k&h|b&~h)+l+m;return(a<<j|a>>>32-j)+k}function l(a,k,b,h,l,j,m){a=a+(k^b^h)+l+m;return(a<<j|a>>>32-j)+k}function n(a,k,b,h,l,j,m){a=a+(b^(k|~h))+l+m;return(a<<j|a>>>32-j)+k}for(var r=CryptoJS,q=r.lib,v=q.WordArray,t=q.Hasher,q=r.algo,a=[],u=0;64>u;u++)a[u]=4294967296*s.abs(s.sin(u+1))|0;q=q.MD5=t.extend({_doReset:function(){this._hash=new v.init([1732584193,4023233417,2562383102,271733878])},
_doProcessBlock:function(g,k){for(var b=0;16>b;b++){var h=k+b,w=g[h];g[h]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var b=this._hash.words,h=g[k+0],w=g[k+1],j=g[k+2],q=g[k+3],r=g[k+4],s=g[k+5],t=g[k+6],u=g[k+7],v=g[k+8],x=g[k+9],y=g[k+10],z=g[k+11],A=g[k+12],B=g[k+13],C=g[k+14],D=g[k+15],c=b[0],d=b[1],e=b[2],f=b[3],c=p(c,d,e,f,h,7,a[0]),f=p(f,c,d,e,w,12,a[1]),e=p(e,f,c,d,j,17,a[2]),d=p(d,e,f,c,q,22,a[3]),c=p(c,d,e,f,r,7,a[4]),f=p(f,c,d,e,s,12,a[5]),e=p(e,f,c,d,t,17,a[6]),d=p(d,e,f,c,u,22,a[7]),
c=p(c,d,e,f,v,7,a[8]),f=p(f,c,d,e,x,12,a[9]),e=p(e,f,c,d,y,17,a[10]),d=p(d,e,f,c,z,22,a[11]),c=p(c,d,e,f,A,7,a[12]),f=p(f,c,d,e,B,12,a[13]),e=p(e,f,c,d,C,17,a[14]),d=p(d,e,f,c,D,22,a[15]),c=m(c,d,e,f,w,5,a[16]),f=m(f,c,d,e,t,9,a[17]),e=m(e,f,c,d,z,14,a[18]),d=m(d,e,f,c,h,20,a[19]),c=m(c,d,e,f,s,5,a[20]),f=m(f,c,d,e,y,9,a[21]),e=m(e,f,c,d,D,14,a[22]),d=m(d,e,f,c,r,20,a[23]),c=m(c,d,e,f,x,5,a[24]),f=m(f,c,d,e,C,9,a[25]),e=m(e,f,c,d,q,14,a[26]),d=m(d,e,f,c,v,20,a[27]),c=m(c,d,e,f,B,5,a[28]),f=m(f,c,
d,e,j,9,a[29]),e=m(e,f,c,d,u,14,a[30]),d=m(d,e,f,c,A,20,a[31]),c=l(c,d,e,f,s,4,a[32]),f=l(f,c,d,e,v,11,a[33]),e=l(e,f,c,d,z,16,a[34]),d=l(d,e,f,c,C,23,a[35]),c=l(c,d,e,f,w,4,a[36]),f=l(f,c,d,e,r,11,a[37]),e=l(e,f,c,d,u,16,a[38]),d=l(d,e,f,c,y,23,a[39]),c=l(c,d,e,f,B,4,a[40]),f=l(f,c,d,e,h,11,a[41]),e=l(e,f,c,d,q,16,a[42]),d=l(d,e,f,c,t,23,a[43]),c=l(c,d,e,f,x,4,a[44]),f=l(f,c,d,e,A,11,a[45]),e=l(e,f,c,d,D,16,a[46]),d=l(d,e,f,c,j,23,a[47]),c=n(c,d,e,f,h,6,a[48]),f=n(f,c,d,e,u,10,a[49]),e=n(e,f,c,d,
C,15,a[50]),d=n(d,e,f,c,s,21,a[51]),c=n(c,d,e,f,A,6,a[52]),f=n(f,c,d,e,q,10,a[53]),e=n(e,f,c,d,y,15,a[54]),d=n(d,e,f,c,w,21,a[55]),c=n(c,d,e,f,v,6,a[56]),f=n(f,c,d,e,D,10,a[57]),e=n(e,f,c,d,t,15,a[58]),d=n(d,e,f,c,B,21,a[59]),c=n(c,d,e,f,r,6,a[60]),f=n(f,c,d,e,z,10,a[61]),e=n(e,f,c,d,j,15,a[62]),d=n(d,e,f,c,x,21,a[63]);b[0]=b[0]+c|0;b[1]=b[1]+d|0;b[2]=b[2]+e|0;b[3]=b[3]+f|0},_doFinalize:function(){var a=this._data,k=a.words,b=8*this._nDataBytes,h=8*a.sigBytes;k[h>>>5]|=128<<24-h%32;var l=s.floor(b/
4294967296);k[(h+64>>>9<<4)+15]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360;k[(h+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;a.sigBytes=4*(k.length+1);this._process();a=this._hash;k=a.words;for(b=0;4>b;b++)h=k[b],k[b]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360;return a},clone:function(){var a=t.clone.call(this);a._hash=this._hash.clone();return a}});r.MD5=t._createHelper(q);r.HmacMD5=t._createHmacHelper(q)})(Math);

var name = "PerfectScrollbar";var exports = {}; var module = { exports : exports };var define = function(module) { mbr[name] = module; }; define.amd = true;

/* perfect-scrollbar v0.6.7 */
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var ps = require('../main');

if (typeof define === 'function' && define.amd) {
  // AMD
  define(ps);
} else {
  // Add to a global object.
  window.PerfectScrollbar = ps;
  if (typeof window.Ps === 'undefined') {
    window.Ps = ps;
  }
}

},{"../main":7}],2:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

function oldAdd(element, className) {
  var classes = element.className.split(' ');
  if (classes.indexOf(className) < 0) {
    classes.push(className);
  }
  element.className = classes.join(' ');
}

function oldRemove(element, className) {
  var classes = element.className.split(' ');
  var idx = classes.indexOf(className);
  if (idx >= 0) {
    classes.splice(idx, 1);
  }
  element.className = classes.join(' ');
}

exports.add = function (element, className) {
  if (element.classList) {
    element.classList.add(className);
  } else {
    oldAdd(element, className);
  }
};

exports.remove = function (element, className) {
  if (element.classList) {
    element.classList.remove(className);
  } else {
    oldRemove(element, className);
  }
};

exports.list = function (element) {
  if (element.classList) {
    return Array.prototype.slice.apply(element.classList);
  } else {
    return element.className.split(' ');
  }
};

},{}],3:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var DOM = {};

DOM.e = function (tagName, className) {
  var element = document.createElement(tagName);
  element.className = className;
  return element;
};

DOM.appendTo = function (child, parent) {
  parent.appendChild(child);
  return child;
};

function cssGet(element, styleName) {
  return window.getComputedStyle(element)[styleName];
}

function cssSet(element, styleName, styleValue) {
  if (typeof styleValue === 'number') {
    styleValue = styleValue.toString() + 'px';
  }
  element.style[styleName] = styleValue;
  return element;
}

function cssMultiSet(element, obj) {
  for (var key in obj) {
    var val = obj[key];
    if (typeof val === 'number') {
      val = val.toString() + 'px';
    }
    element.style[key] = val;
  }
  return element;
}

DOM.css = function (element, styleNameOrObject, styleValue) {
  if (typeof styleNameOrObject === 'object') {
    // multiple set with object
    return cssMultiSet(element, styleNameOrObject);
  } else {
    if (typeof styleValue === 'undefined') {
      return cssGet(element, styleNameOrObject);
    } else {
      return cssSet(element, styleNameOrObject, styleValue);
    }
  }
};

DOM.matches = function (element, query) {
  if (typeof element.matches !== 'undefined') {
    return element.matches(query);
  } else {
    if (typeof element.matchesSelector !== 'undefined') {
      return element.matchesSelector(query);
    } else if (typeof element.webkitMatchesSelector !== 'undefined') {
      return element.webkitMatchesSelector(query);
    } else if (typeof element.mozMatchesSelector !== 'undefined') {
      return element.mozMatchesSelector(query);
    } else if (typeof element.msMatchesSelector !== 'undefined') {
      return element.msMatchesSelector(query);
    }
  }
};

DOM.remove = function (element) {
  if (typeof element.remove !== 'undefined') {
    element.remove();
  } else {
    if (element.parentNode) {
      element.parentNode.removeChild(element);
    }
  }
};

DOM.queryChildren = function (element, selector) {
  return Array.prototype.filter.call(element.childNodes, function (child) {
    return DOM.matches(child, selector);
  });
};

module.exports = DOM;

},{}],4:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var EventElement = function (element) {
  this.element = element;
  this.events = {};
};

EventElement.prototype.bind = function (eventName, handler) {
  if (typeof this.events[eventName] === 'undefined') {
    this.events[eventName] = [];
  }
  this.events[eventName].push(handler);
  this.element.addEventListener(eventName, handler, false);
};

EventElement.prototype.unbind = function (eventName, handler) {
  var isHandlerProvided = (typeof handler !== 'undefined');
  this.events[eventName] = this.events[eventName].filter(function (hdlr) {
    if (isHandlerProvided && hdlr !== handler) {
      return true;
    }
    this.element.removeEventListener(eventName, hdlr, false);
    return false;
  }, this);
};

EventElement.prototype.unbindAll = function () {
  for (var name in this.events) {
    this.unbind(name);
  }
};

var EventManager = function () {
  this.eventElements = [];
};

EventManager.prototype.eventElement = function (element) {
  var ee = this.eventElements.filter(function (eventElement) {
    return eventElement.element === element;
  })[0];
  if (typeof ee === 'undefined') {
    ee = new EventElement(element);
    this.eventElements.push(ee);
  }
  return ee;
};

EventManager.prototype.bind = function (element, eventName, handler) {
  this.eventElement(element).bind(eventName, handler);
};

EventManager.prototype.unbind = function (element, eventName, handler) {
  this.eventElement(element).unbind(eventName, handler);
};

EventManager.prototype.unbindAll = function () {
  for (var i = 0; i < this.eventElements.length; i++) {
    this.eventElements[i].unbindAll();
  }
};

EventManager.prototype.once = function (element, eventName, handler) {
  var ee = this.eventElement(element);
  var onceHandler = function (e) {
    ee.unbind(eventName, onceHandler);
    handler(e);
  };
  ee.bind(eventName, onceHandler);
};

module.exports = EventManager;

},{}],5:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

module.exports = (function () {
  function s4() {
    return Math.floor((1 + Math.random()) * 0x10000)
               .toString(16)
               .substring(1);
  }
  return function () {
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
           s4() + '-' + s4() + s4() + s4();
  };
})();

},{}],6:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var cls = require('./class')
  , d = require('./dom');

exports.toInt = function (x) {
  return parseInt(x, 10) || 0;
};

exports.clone = function (obj) {
  if (obj === null) {
    return null;
  } else if (typeof obj === 'object') {
    var result = {};
    for (var key in obj) {
      result[key] = this.clone(obj[key]);
    }
    return result;
  } else {
    return obj;
  }
};

exports.extend = function (original, source) {
  var result = this.clone(original);
  for (var key in source) {
    result[key] = this.clone(source[key]);
  }
  return result;
};

exports.isEditable = function (el) {
  return d.matches(el, "input,[contenteditable]") ||
         d.matches(el, "select,[contenteditable]") ||
         d.matches(el, "textarea,[contenteditable]") ||
         d.matches(el, "button,[contenteditable]");
};

exports.removePsClasses = function (element) {
  var clsList = cls.list(element);
  for (var i = 0; i < clsList.length; i++) {
    var className = clsList[i];
    if (className.indexOf('ps-') === 0) {
      cls.remove(element, className);
    }
  }
};

exports.outerWidth = function (element) {
  return this.toInt(d.css(element, 'width')) +
         this.toInt(d.css(element, 'paddingLeft')) +
         this.toInt(d.css(element, 'paddingRight')) +
         this.toInt(d.css(element, 'borderLeftWidth')) +
         this.toInt(d.css(element, 'borderRightWidth'));
};

exports.startScrolling = function (element, axis) {
  cls.add(element, 'ps-in-scrolling');
  if (typeof axis !== 'undefined') {
    cls.add(element, 'ps-' + axis);
  } else {
    cls.add(element, 'ps-x');
    cls.add(element, 'ps-y');
  }
};

exports.stopScrolling = function (element, axis) {
  cls.remove(element, 'ps-in-scrolling');
  if (typeof axis !== 'undefined') {
    cls.remove(element, 'ps-' + axis);
  } else {
    cls.remove(element, 'ps-x');
    cls.remove(element, 'ps-y');
  }
};

exports.env = {
  isWebKit: 'WebkitAppearance' in document.documentElement.style,
  supportsTouch: (('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch),
  supportsIePointer: window.navigator.msMaxTouchPoints !== null
};

},{"./class":2,"./dom":3}],7:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var destroy = require('./plugin/destroy')
  , initialize = require('./plugin/initialize')
  , update = require('./plugin/update');

module.exports = {
  initialize: initialize,
  update: update,
  destroy: destroy
};

},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

module.exports = {
  maxScrollbarLength: null,
  minScrollbarLength: null,
  scrollXMarginOffset: 0,
  scrollYMarginOffset: 0,
  stopPropagationOnClick: true,
  suppressScrollX: false,
  suppressScrollY: false,
  swipePropagation: true,
  useBothWheelAxes: false,
  useKeyboard: true,
  useSelectionScroll: false,
  wheelPropagation: false,
  wheelSpeed: 1
};

},{}],9:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var d = require('../lib/dom')
  , h = require('../lib/helper')
  , instances = require('./instances');

module.exports = function (element) {
  var i = instances.get(element);

  if (!i) {
    return;
  }

  i.event.unbindAll();
  d.remove(i.scrollbarX);
  d.remove(i.scrollbarY);
  d.remove(i.scrollbarXRail);
  d.remove(i.scrollbarYRail);
  h.removePsClasses(element);

  instances.remove(element);
};

},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var h = require('../../lib/helper')
  , instances = require('../instances')
  , updateGeometry = require('../update-geometry')
  , updateScroll = require('../update-scroll');

function bindClickRailHandler(element, i) {
  function pageOffset(el) {
    return el.getBoundingClientRect();
  }
  var stopPropagation = window.Event.prototype.stopPropagation.bind;

  if (i.settings.stopPropagationOnClick) {
    i.event.bind(i.scrollbarY, 'click', stopPropagation);
  }
  i.event.bind(i.scrollbarYRail, 'click', function (e) {
    var halfOfScrollbarLength = h.toInt(i.scrollbarYHeight / 2);
    var positionTop = i.railYRatio * (e.pageY - window.scrollY - pageOffset(i.scrollbarYRail).top - halfOfScrollbarLength);
    var maxPositionTop = i.railYRatio * (i.railYHeight - i.scrollbarYHeight);
    var positionRatio = positionTop / maxPositionTop;

    if (positionRatio < 0) {
      positionRatio = 0;
    } else if (positionRatio > 1) {
      positionRatio = 1;
    }

    updateScroll(element, 'top', (i.contentHeight - i.containerHeight) * positionRatio);
    updateGeometry(element);

    e.stopPropagation();
  });

  if (i.settings.stopPropagationOnClick) {
    i.event.bind(i.scrollbarX, 'click', stopPropagation);
  }
  i.event.bind(i.scrollbarXRail, 'click', function (e) {
    var halfOfScrollbarLength = h.toInt(i.scrollbarXWidth / 2);
    var positionLeft = i.railXRatio * (e.pageX - window.scrollX - pageOffset(i.scrollbarXRail).left - halfOfScrollbarLength);
    var maxPositionLeft = i.railXRatio * (i.railXWidth - i.scrollbarXWidth);
    var positionRatio = positionLeft / maxPositionLeft;

    if (positionRatio < 0) {
      positionRatio = 0;
    } else if (positionRatio > 1) {
      positionRatio = 1;
    }

    updateScroll(element, 'left', ((i.contentWidth - i.containerWidth) * positionRatio) - i.negativeScrollAdjustment);
    updateGeometry(element);

    e.stopPropagation();
  });
}

module.exports = function (element) {
  var i = instances.get(element);
  bindClickRailHandler(element, i);
};

},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var d = require('../../lib/dom')
  , h = require('../../lib/helper')
  , instances = require('../instances')
  , updateGeometry = require('../update-geometry')
  , updateScroll = require('../update-scroll');

function bindMouseScrollXHandler(element, i) {
  var currentLeft = null;
  var currentPageX = null;

  function updateScrollLeft(deltaX) {
    var newLeft = currentLeft + (deltaX * i.railXRatio);
    var maxLeft = i.scrollbarXRail.getBoundingClientRect().left + (i.railXRatio * (i.railXWidth - i.scrollbarXWidth));

    if (newLeft < 0) {
      i.scrollbarXLeft = 0;
    } else if (newLeft > maxLeft) {
      i.scrollbarXLeft = maxLeft;
    } else {
      i.scrollbarXLeft = newLeft;
    }

    var scrollLeft = h.toInt(i.scrollbarXLeft * (i.contentWidth - i.containerWidth) / (i.containerWidth - (i.railXRatio * i.scrollbarXWidth))) - i.negativeScrollAdjustment;
    updateScroll(element, 'left', scrollLeft);
  }

  var mouseMoveHandler = function (e) {
    updateScrollLeft(e.pageX - currentPageX);
    updateGeometry(element);
    e.stopPropagation();
    e.preventDefault();
  };

  var mouseUpHandler = function () {
    h.stopScrolling(element, 'x');
    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);
  };

  i.event.bind(i.scrollbarX, 'mousedown', function (e) {
    currentPageX = e.pageX;
    currentLeft = h.toInt(d.css(i.scrollbarX, 'left')) * i.railXRatio;
    h.startScrolling(element, 'x');

    i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);
    i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);

    e.stopPropagation();
    e.preventDefault();
  });
}

function bindMouseScrollYHandler(element, i) {
  var currentTop = null;
  var currentPageY = null;

  function updateScrollTop(deltaY) {
    var newTop = currentTop + (deltaY * i.railYRatio);
    var maxTop = i.scrollbarYRail.getBoundingClientRect().top + (i.railYRatio * (i.railYHeight - i.scrollbarYHeight));

    if (newTop < 0) {
      i.scrollbarYTop = 0;
    } else if (newTop > maxTop) {
      i.scrollbarYTop = maxTop;
    } else {
      i.scrollbarYTop = newTop;
    }

    var scrollTop = h.toInt(i.scrollbarYTop * (i.contentHeight - i.containerHeight) / (i.containerHeight - (i.railYRatio * i.scrollbarYHeight)));
    updateScroll(element, 'top', scrollTop);
  }

  var mouseMoveHandler = function (e) {
    updateScrollTop(e.pageY - currentPageY);
    updateGeometry(element);
    e.stopPropagation();
    e.preventDefault();
  };

  var mouseUpHandler = function () {
    h.stopScrolling(element, 'y');
    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);
  };

  i.event.bind(i.scrollbarY, 'mousedown', function (e) {
    currentPageY = e.pageY;
    currentTop = h.toInt(d.css(i.scrollbarY, 'top')) * i.railYRatio;
    h.startScrolling(element, 'y');

    i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);
    i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);

    e.stopPropagation();
    e.preventDefault();
  });
}

module.exports = function (element) {
  var i = instances.get(element);
  bindMouseScrollXHandler(element, i);
  bindMouseScrollYHandler(element, i);
};

},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var h = require('../../lib/helper')
  , instances = require('../instances')
  , updateGeometry = require('../update-geometry')
  , updateScroll = require('../update-scroll');

function bindKeyboardHandler(element, i) {
  var hovered = false;
  i.event.bind(element, 'mouseenter', function () {
    hovered = true;
  });
  i.event.bind(element, 'mouseleave', function () {
    hovered = false;
  });

  var shouldPrevent = false;
  function shouldPreventDefault(deltaX, deltaY) {
    var scrollTop = element.scrollTop;
    if (deltaX === 0) {
      if (!i.scrollbarYActive) {
        return false;
      }
      if ((scrollTop === 0 && deltaY > 0) || (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)) {
        return !i.settings.wheelPropagation;
      }
    }

    var scrollLeft = element.scrollLeft;
    if (deltaY === 0) {
      if (!i.scrollbarXActive) {
        return false;
      }
      if ((scrollLeft === 0 && deltaX < 0) || (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)) {
        return !i.settings.wheelPropagation;
      }
    }
    return true;
  }

  i.event.bind(i.ownerDocument, 'keydown', function (e) {
    if (e.isDefaultPrevented && e.isDefaultPrevented()) {
      return;
    }

    if (!hovered) {
      return;
    }

    var activeElement = document.activeElement ? document.activeElement : i.ownerDocument.activeElement;
    if (activeElement) {
      // go deeper if element is a webcomponent
      while (activeElement.shadowRoot) {
        activeElement = activeElement.shadowRoot.activeElement;
      }
      if (h.isEditable(activeElement)) {
        return;
      }
    }

    var deltaX = 0;
    var deltaY = 0;

    switch (e.which) {
    case 37: // left
      deltaX = -30;
      break;
    case 38: // up
      deltaY = 30;
      break;
    case 39: // right
      deltaX = 30;
      break;
    case 40: // down
      deltaY = -30;
      break;
    case 33: // page up
      deltaY = 90;
      break;
    case 32: // space bar
      if (e.shiftKey) {
        deltaY = 90;
      } else {
        deltaY = -90;
      }
      break;
    case 34: // page down
      deltaY = -90;
      break;
    case 35: // end
      if (e.ctrlKey) {
        deltaY = -i.contentHeight;
      } else {
        deltaY = -i.containerHeight;
      }
      break;
    case 36: // home
      if (e.ctrlKey) {
        deltaY = element.scrollTop;
      } else {
        deltaY = i.containerHeight;
      }
      break;
    default:
      return;
    }

    updateScroll(element, 'top', element.scrollTop - deltaY);
    updateScroll(element, 'left', element.scrollLeft + deltaX);
    updateGeometry(element);

    shouldPrevent = shouldPreventDefault(deltaX, deltaY);
    if (shouldPrevent) {
      e.preventDefault();
    }
  });
}

module.exports = function (element) {
  var i = instances.get(element);
  bindKeyboardHandler(element, i);
};

},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var h = require('../../lib/helper')
  , instances = require('../instances')
  , updateGeometry = require('../update-geometry')
  , updateScroll = require('../update-scroll');

function bindMouseWheelHandler(element, i) {
  var shouldPrevent = false;

  function shouldPreventDefault(deltaX, deltaY) {
    var scrollTop = element.scrollTop;
    if (deltaX === 0) {
      if (!i.scrollbarYActive) {
        return false;
      }
      if ((scrollTop === 0 && deltaY > 0) || (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)) {
        return !i.settings.wheelPropagation;
      }
    }

    var scrollLeft = element.scrollLeft;
    if (deltaY === 0) {
      if (!i.scrollbarXActive) {
        return false;
      }
      if ((scrollLeft === 0 && deltaX < 0) || (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)) {
        return !i.settings.wheelPropagation;
      }
    }
    return true;
  }

  function getDeltaFromEvent(e) {
    var deltaX = e.deltaX;
    var deltaY = -1 * e.deltaY;

    if (typeof deltaX === "undefined" || typeof deltaY === "undefined") {
      // OS X Safari
      deltaX = -1 * e.wheelDeltaX / 6;
      deltaY = e.wheelDeltaY / 6;
    }

    if (e.deltaMode && e.deltaMode === 1) {
      // Firefox in deltaMode 1: Line scrolling
      deltaX *= 10;
      deltaY *= 10;
    }

    if (deltaX !== deltaX && deltaY !== deltaY/* NaN checks */) {
      // IE in some mouse drivers
      deltaX = 0;
      deltaY = e.wheelDelta;
    }

    return [deltaX, deltaY];
  }

  function shouldBeConsumedByTextarea(deltaX, deltaY) {
    var hoveredTextarea = element.querySelector('textarea:hover');
    if (hoveredTextarea) {
      var maxScrollTop = hoveredTextarea.scrollHeight - hoveredTextarea.clientHeight;
      if (maxScrollTop > 0) {
        if (!(hoveredTextarea.scrollTop === 0 && deltaY > 0) &&
            !(hoveredTextarea.scrollTop === maxScrollTop && deltaY < 0)) {
          return true;
        }
      }
      var maxScrollLeft = hoveredTextarea.scrollLeft - hoveredTextarea.clientWidth;
      if (maxScrollLeft > 0) {
        if (!(hoveredTextarea.scrollLeft === 0 && deltaX < 0) &&
            !(hoveredTextarea.scrollLeft === maxScrollLeft && deltaX > 0)) {
          return true;
        }
      }
    }
    return false;
  }

  function mousewheelHandler(e) {
    // FIXME: this is a quick fix for the select problem in FF and IE.
    // If there comes an effective way to deal with the problem,
    // this lines should be removed.
    if (!h.env.isWebKit && element.querySelector('select:focus')) {
      return;
    }

    var delta = getDeltaFromEvent(e);

    var deltaX = delta[0];
    var deltaY = delta[1];

    if (shouldBeConsumedByTextarea(deltaX, deltaY)) {
      return;
    }

    shouldPrevent = false;
    if (!i.settings.useBothWheelAxes) {
      // deltaX will only be used for horizontal scrolling and deltaY will
      // only be used for vertical scrolling - this is the default
      updateScroll(element, 'top', element.scrollTop - (deltaY * i.settings.wheelSpeed));
      updateScroll(element, 'left', element.scrollLeft + (deltaX * i.settings.wheelSpeed));
    } else if (i.scrollbarYActive && !i.scrollbarXActive) {
      // only vertical scrollbar is active and useBothWheelAxes option is
      // active, so let's scroll vertical bar using both mouse wheel axes
      if (deltaY) {
        updateScroll(element, 'top', element.scrollTop - (deltaY * i.settings.wheelSpeed));
      } else {
        updateScroll(element, 'top', element.scrollTop + (deltaX * i.settings.wheelSpeed));
      }
      shouldPrevent = true;
    } else if (i.scrollbarXActive && !i.scrollbarYActive) {
      // useBothWheelAxes and only horizontal bar is active, so use both
      // wheel axes for horizontal bar
      if (deltaX) {
        updateScroll(element, 'left', element.scrollLeft + (deltaX * i.settings.wheelSpeed));
      } else {
        updateScroll(element, 'left', element.scrollLeft - (deltaY * i.settings.wheelSpeed));
      }
      shouldPrevent = true;
    }

    updateGeometry(element);

    shouldPrevent = (shouldPrevent || shouldPreventDefault(deltaX, deltaY));
    if (shouldPrevent) {
      e.stopPropagation();
      e.preventDefault();
    }
  }

  if (typeof window.onwheel !== "undefined") {
    i.event.bind(element, 'wheel', mousewheelHandler);
  } else if (typeof window.onmousewheel !== "undefined") {
    i.event.bind(element, 'mousewheel', mousewheelHandler);
  }
}

module.exports = function (element) {
  var i = instances.get(element);
  bindMouseWheelHandler(element, i);
};

},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var instances = require('../instances')
  , updateGeometry = require('../update-geometry');

function bindNativeScrollHandler(element, i) {
  i.event.bind(element, 'scroll', function () {
    updateGeometry(element);
  });
}

module.exports = function (element) {
  var i = instances.get(element);
  bindNativeScrollHandler(element, i);
};

},{"../instances":18,"../update-geometry":19}],15:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var h = require('../../lib/helper')
  , instances = require('../instances')
  , updateGeometry = require('../update-geometry')
  , updateScroll = require('../update-scroll');

function bindSelectionHandler(element, i) {
  function getRangeNode() {
    var selection = window.getSelection ? window.getSelection() :
                    document.getSelection ? document.getSelection() : '';
    if (selection.toString().length === 0) {
      return null;
    } else {
      return selection.getRangeAt(0).commonAncestorContainer;
    }
  }

  var scrollingLoop = null;
  var scrollDiff = {top: 0, left: 0};
  function startScrolling() {
    if (!scrollingLoop) {
      scrollingLoop = setInterval(function () {
        if (!instances.get(element)) {
          clearInterval(scrollingLoop);
          return;
        }

        updateScroll(element, 'top', element.scrollTop + scrollDiff.top);
        updateScroll(element, 'left', element.scrollLeft + scrollDiff.left);
        updateGeometry(element);
      }, 50); // every .1 sec
    }
  }
  function stopScrolling() {
    if (scrollingLoop) {
      clearInterval(scrollingLoop);
      scrollingLoop = null;
    }
    h.stopScrolling(element);
  }

  var isSelected = false;
  i.event.bind(i.ownerDocument, 'selectionchange', function () {
    if (element.contains(getRangeNode())) {
      isSelected = true;
    } else {
      isSelected = false;
      stopScrolling();
    }
  });
  i.event.bind(window, 'mouseup', function () {
    if (isSelected) {
      isSelected = false;
      stopScrolling();
    }
  });

  i.event.bind(window, 'mousemove', function (e) {
    if (isSelected) {
      var mousePosition = {x: e.pageX, y: e.pageY};
      var containerGeometry = {
        left: element.offsetLeft,
        right: element.offsetLeft + element.offsetWidth,
        top: element.offsetTop,
        bottom: element.offsetTop + element.offsetHeight
      };

      if (mousePosition.x < containerGeometry.left + 3) {
        scrollDiff.left = -5;
        h.startScrolling(element, 'x');
      } else if (mousePosition.x > containerGeometry.right - 3) {
        scrollDiff.left = 5;
        h.startScrolling(element, 'x');
      } else {
        scrollDiff.left = 0;
      }

      if (mousePosition.y < containerGeometry.top + 3) {
        if (containerGeometry.top + 3 - mousePosition.y < 5) {
          scrollDiff.top = -5;
        } else {
          scrollDiff.top = -20;
        }
        h.startScrolling(element, 'y');
      } else if (mousePosition.y > containerGeometry.bottom - 3) {
        if (mousePosition.y - containerGeometry.bottom + 3 < 5) {
          scrollDiff.top = 5;
        } else {
          scrollDiff.top = 20;
        }
        h.startScrolling(element, 'y');
      } else {
        scrollDiff.top = 0;
      }

      if (scrollDiff.top === 0 && scrollDiff.left === 0) {
        stopScrolling();
      } else {
        startScrolling();
      }
    }
  });
}

module.exports = function (element) {
  var i = instances.get(element);
  bindSelectionHandler(element, i);
};

},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var instances = require('../instances')
  , updateGeometry = require('../update-geometry')
  , updateScroll = require('../update-scroll');

function bindTouchHandler(element, i, supportsTouch, supportsIePointer) {
  function shouldPreventDefault(deltaX, deltaY) {
    var scrollTop = element.scrollTop;
    var scrollLeft = element.scrollLeft;
    var magnitudeX = Math.abs(deltaX);
    var magnitudeY = Math.abs(deltaY);

    if (magnitudeY > magnitudeX) {
      // user is perhaps trying to swipe up/down the page

      if (((deltaY < 0) && (scrollTop === i.contentHeight - i.containerHeight)) ||
          ((deltaY > 0) && (scrollTop === 0))) {
        return !i.settings.swipePropagation;
      }
    } else if (magnitudeX > magnitudeY) {
      // user is perhaps trying to swipe left/right across the page

      if (((deltaX < 0) && (scrollLeft === i.contentWidth - i.containerWidth)) ||
          ((deltaX > 0) && (scrollLeft === 0))) {
        return !i.settings.swipePropagation;
      }
    }

    return true;
  }

  function applyTouchMove(differenceX, differenceY) {
    updateScroll(element, 'top', element.scrollTop - differenceY);
    updateScroll(element, 'left', element.scrollLeft - differenceX);

    updateGeometry(element);
  }

  var startOffset = {};
  var startTime = 0;
  var speed = {};
  var easingLoop = null;
  var inGlobalTouch = false;
  var inLocalTouch = false;

  function globalTouchStart() {
    inGlobalTouch = true;
  }
  function globalTouchEnd() {
    inGlobalTouch = false;
  }

  function getTouch(e) {
    if (e.targetTouches) {
      return e.targetTouches[0];
    } else {
      // Maybe IE pointer
      return e;
    }
  }
  function shouldHandle(e) {
    if (e.targetTouches && e.targetTouches.length === 1) {
      return true;
    }
    if (e.pointerType && e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {
      return true;
    }
    return false;
  }
  function touchStart(e) {
    if (shouldHandle(e)) {
      inLocalTouch = true;

      var touch = getTouch(e);

      startOffset.pageX = touch.pageX;
      startOffset.pageY = touch.pageY;

      startTime = (new Date()).getTime();

      if (easingLoop !== null) {
        clearInterval(easingLoop);
      }

      e.stopPropagation();
    }
  }
  function touchMove(e) {
    if (!inGlobalTouch && inLocalTouch && shouldHandle(e)) {
      var touch = getTouch(e);

      var currentOffset = {pageX: touch.pageX, pageY: touch.pageY};

      var differenceX = currentOffset.pageX - startOffset.pageX;
      var differenceY = currentOffset.pageY - startOffset.pageY;

      applyTouchMove(differenceX, differenceY);
      startOffset = currentOffset;

      var currentTime = (new Date()).getTime();

      var timeGap = currentTime - startTime;
      if (timeGap > 0) {
        speed.x = differenceX / timeGap;
        speed.y = differenceY / timeGap;
        startTime = currentTime;
      }

      if (shouldPreventDefault(differenceX, differenceY)) {
        e.stopPropagation();
        e.preventDefault();
      }
    }
  }
  function touchEnd() {
    if (!inGlobalTouch && inLocalTouch) {
      inLocalTouch = false;

      clearInterval(easingLoop);
      easingLoop = setInterval(function () {
        if (!instances.get(element)) {
          clearInterval(easingLoop);
          return;
        }

        if (Math.abs(speed.x) < 0.01 && Math.abs(speed.y) < 0.01) {
          clearInterval(easingLoop);
          return;
        }

        applyTouchMove(speed.x * 30, speed.y * 30);

        speed.x *= 0.8;
        speed.y *= 0.8;
      }, 10);
    }
  }

  if (supportsTouch) {
    i.event.bind(window, 'touchstart', globalTouchStart);
    i.event.bind(window, 'touchend', globalTouchEnd);
    i.event.bind(element, 'touchstart', touchStart);
    i.event.bind(element, 'touchmove', touchMove);
    i.event.bind(element, 'touchend', touchEnd);
  }

  if (supportsIePointer) {
    if (window.PointerEvent) {
      i.event.bind(window, 'pointerdown', globalTouchStart);
      i.event.bind(window, 'pointerup', globalTouchEnd);
      i.event.bind(element, 'pointerdown', touchStart);
      i.event.bind(element, 'pointermove', touchMove);
      i.event.bind(element, 'pointerup', touchEnd);
    } else if (window.MSPointerEvent) {
      i.event.bind(window, 'MSPointerDown', globalTouchStart);
      i.event.bind(window, 'MSPointerUp', globalTouchEnd);
      i.event.bind(element, 'MSPointerDown', touchStart);
      i.event.bind(element, 'MSPointerMove', touchMove);
      i.event.bind(element, 'MSPointerUp', touchEnd);
    }
  }
}

module.exports = function (element, supportsTouch, supportsIePointer) {
  var i = instances.get(element);
  bindTouchHandler(element, i, supportsTouch, supportsIePointer);
};

},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var cls = require('../lib/class')
  , h = require('../lib/helper')
  , instances = require('./instances')
  , updateGeometry = require('./update-geometry');

// Handlers
var clickRailHandler = require('./handler/click-rail')
  , dragScrollbarHandler = require('./handler/drag-scrollbar')
  , keyboardHandler = require('./handler/keyboard')
  , mouseWheelHandler = require('./handler/mouse-wheel')
  , nativeScrollHandler = require('./handler/native-scroll')
  , selectionHandler = require('./handler/selection')
  , touchHandler = require('./handler/touch');

module.exports = function (element, userSettings) {
  userSettings = typeof userSettings === 'object' ? userSettings : {};

  cls.add(element, 'ps-container');

  // Create a plugin instance.
  var i = instances.add(element);

  i.settings = h.extend(i.settings, userSettings);

  clickRailHandler(element);
  dragScrollbarHandler(element);
  mouseWheelHandler(element);
  nativeScrollHandler(element);

  if (i.settings.useSelectionScroll) {
    selectionHandler(element);
  }

  if (h.env.supportsTouch || h.env.supportsIePointer) {
    touchHandler(element, h.env.supportsTouch, h.env.supportsIePointer);
  }
  if (i.settings.useKeyboard) {
    keyboardHandler(element);
  }

  updateGeometry(element);
};

},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var d = require('../lib/dom')
  , defaultSettings = require('./default-setting')
  , EventManager = require('../lib/event-manager')
  , guid = require('../lib/guid')
  , h = require('../lib/helper');

var instances = {};

function Instance(element) {
  var i = this;

  i.settings = h.clone(defaultSettings);
  i.containerWidth = null;
  i.containerHeight = null;
  i.contentWidth = null;
  i.contentHeight = null;

  i.isRtl = d.css(element, 'direction') === "rtl";
  i.isNegativeScroll = (function () {
    var originalScrollLeft = element.scrollLeft;
    var result = null;
    element.scrollLeft = -1;
    result = element.scrollLeft < 0;
    element.scrollLeft = originalScrollLeft;
    return result;
  })();
  i.negativeScrollAdjustment = i.isNegativeScroll ? element.scrollWidth - element.clientWidth : 0;
  i.event = new EventManager();
  i.ownerDocument = element.ownerDocument || document;

  i.scrollbarXRail = d.appendTo(d.e('div', 'ps-scrollbar-x-rail'), element);
  i.scrollbarX = d.appendTo(d.e('div', 'ps-scrollbar-x'), i.scrollbarXRail);
  i.scrollbarXActive = null;
  i.scrollbarXWidth = null;
  i.scrollbarXLeft = null;
  i.scrollbarXBottom = h.toInt(d.css(i.scrollbarXRail, 'bottom'));
  i.isScrollbarXUsingBottom = i.scrollbarXBottom === i.scrollbarXBottom; // !isNaN
  i.scrollbarXTop = i.isScrollbarXUsingBottom ? null : h.toInt(d.css(i.scrollbarXRail, 'top'));
  i.railBorderXWidth = h.toInt(d.css(i.scrollbarXRail, 'borderLeftWidth')) + h.toInt(d.css(i.scrollbarXRail, 'borderRightWidth'));
  // Set rail to display:block to calculate margins
  d.css(i.scrollbarXRail, 'display', 'block');
  i.railXMarginWidth = h.toInt(d.css(i.scrollbarXRail, 'marginLeft')) + h.toInt(d.css(i.scrollbarXRail, 'marginRight'));
  d.css(i.scrollbarXRail, 'display', '');
  i.railXWidth = null;
  i.railXRatio = null;

  i.scrollbarYRail = d.appendTo(d.e('div', 'ps-scrollbar-y-rail'), element);
  i.scrollbarY = d.appendTo(d.e('div', 'ps-scrollbar-y'), i.scrollbarYRail);
  i.scrollbarYActive = null;
  i.scrollbarYHeight = null;
  i.scrollbarYTop = null;
  i.scrollbarYRight = h.toInt(d.css(i.scrollbarYRail, 'right'));
  i.isScrollbarYUsingRight = i.scrollbarYRight === i.scrollbarYRight; // !isNaN
  i.scrollbarYLeft = i.isScrollbarYUsingRight ? null : h.toInt(d.css(i.scrollbarYRail, 'left'));
  i.scrollbarYOuterWidth = i.isRtl ? h.outerWidth(i.scrollbarY) : null;
  i.railBorderYWidth = h.toInt(d.css(i.scrollbarYRail, 'borderTopWidth')) + h.toInt(d.css(i.scrollbarYRail, 'borderBottomWidth'));
  d.css(i.scrollbarYRail, 'display', 'block');
  i.railYMarginHeight = h.toInt(d.css(i.scrollbarYRail, 'marginTop')) + h.toInt(d.css(i.scrollbarYRail, 'marginBottom'));
  d.css(i.scrollbarYRail, 'display', '');
  i.railYHeight = null;
  i.railYRatio = null;
}

function getId(element) {
  if (typeof element.dataset === 'undefined') {
    return element.getAttribute('data-ps-id');
  } else {
    return element.dataset.psId;
  }
}

function setId(element, id) {
  if (typeof element.dataset === 'undefined') {
    element.setAttribute('data-ps-id', id);
  } else {
    element.dataset.psId = id;
  }
}

function removeId(element) {
  if (typeof element.dataset === 'undefined') {
    element.removeAttribute('data-ps-id');
  } else {
    delete element.dataset.psId;
  }
}

exports.add = function (element) {
  var newId = guid();
  setId(element, newId);
  instances[newId] = new Instance(element);
  return instances[newId];
};

exports.remove = function (element) {
  delete instances[getId(element)];
  removeId(element);
};

exports.get = function (element) {
  return instances[getId(element)];
};

},{"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var cls = require('../lib/class')
  , d = require('../lib/dom')
  , h = require('../lib/helper')
  , instances = require('./instances')
  , updateScroll = require('./update-scroll');

function getThumbSize(i, thumbSize) {
  if (i.settings.minScrollbarLength) {
    thumbSize = Math.max(thumbSize, i.settings.minScrollbarLength);
  }
  if (i.settings.maxScrollbarLength) {
    thumbSize = Math.min(thumbSize, i.settings.maxScrollbarLength);
  }
  return thumbSize;
}

function updateCss(element, i) {
  var xRailOffset = {width: i.railXWidth};
  if (i.isRtl) {
    xRailOffset.left = i.negativeScrollAdjustment + element.scrollLeft + i.containerWidth - i.contentWidth;
  } else {
    xRailOffset.left = element.scrollLeft;
  }
  if (i.isScrollbarXUsingBottom) {
    xRailOffset.bottom = i.scrollbarXBottom - element.scrollTop;
  } else {
    xRailOffset.top = i.scrollbarXTop + element.scrollTop;
  }
  d.css(i.scrollbarXRail, xRailOffset);

  var yRailOffset = {top: element.scrollTop, height: i.railYHeight};
  if (i.isScrollbarYUsingRight) {
    if (i.isRtl) {
      yRailOffset.right = i.contentWidth - (i.negativeScrollAdjustment + element.scrollLeft) - i.scrollbarYRight - i.scrollbarYOuterWidth;
    } else {
      yRailOffset.right = i.scrollbarYRight - element.scrollLeft;
    }
  } else {
    if (i.isRtl) {
      yRailOffset.left = i.negativeScrollAdjustment + element.scrollLeft + i.containerWidth * 2 - i.contentWidth - i.scrollbarYLeft - i.scrollbarYOuterWidth;
    } else {
      yRailOffset.left = i.scrollbarYLeft + element.scrollLeft;
    }
  }
  d.css(i.scrollbarYRail, yRailOffset);

  d.css(i.scrollbarX, {left: i.scrollbarXLeft, width: i.scrollbarXWidth - i.railBorderXWidth});
  d.css(i.scrollbarY, {top: i.scrollbarYTop, height: i.scrollbarYHeight - i.railBorderYWidth});
}

module.exports = function (element) {
  var i = instances.get(element);

  i.containerWidth = element.clientWidth;
  i.containerHeight = element.clientHeight;
  i.contentWidth = element.scrollWidth;
  i.contentHeight = element.scrollHeight;

  var existingRails;
  if (!element.contains(i.scrollbarXRail)) {
    existingRails = d.queryChildren(element, '.ps-scrollbar-x-rail');
    if (existingRails.length > 0) {
      existingRails.forEach(function (rail) {
        d.remove(rail);
      });
    }
    d.appendTo(i.scrollbarXRail, element);
  }
  if (!element.contains(i.scrollbarYRail)) {
    existingRails = d.queryChildren(element, '.ps-scrollbar-y-rail');
    if (existingRails.length > 0) {
      existingRails.forEach(function (rail) {
        d.remove(rail);
      });
    }
    d.appendTo(i.scrollbarYRail, element);
  }

  if (!i.settings.suppressScrollX && i.containerWidth + i.settings.scrollXMarginOffset < i.contentWidth) {
    i.scrollbarXActive = true;
    i.railXWidth = i.containerWidth - i.railXMarginWidth;
    i.railXRatio = i.containerWidth / i.railXWidth;
    i.scrollbarXWidth = getThumbSize(i, h.toInt(i.railXWidth * i.containerWidth / i.contentWidth));
    i.scrollbarXLeft = h.toInt((i.negativeScrollAdjustment + element.scrollLeft) * (i.railXWidth - i.scrollbarXWidth) / (i.contentWidth - i.containerWidth));
  } else {
    i.scrollbarXActive = false;
    i.scrollbarXWidth = 0;
    i.scrollbarXLeft = 0;
    element.scrollLeft = 0;
  }

  if (!i.settings.suppressScrollY && i.containerHeight + i.settings.scrollYMarginOffset < i.contentHeight) {
    i.scrollbarYActive = true;
    i.railYHeight = i.containerHeight - i.railYMarginHeight;
    i.railYRatio = i.containerHeight / i.railYHeight;
    i.scrollbarYHeight = getThumbSize(i, h.toInt(i.railYHeight * i.containerHeight / i.contentHeight));
    i.scrollbarYTop = h.toInt(element.scrollTop * (i.railYHeight - i.scrollbarYHeight) / (i.contentHeight - i.containerHeight));
  } else {
    i.scrollbarYActive = false;
    i.scrollbarYHeight = 0;
    i.scrollbarYTop = 0;
    updateScroll(element, 'top', 0);
  }

  if (i.scrollbarXLeft >= i.railXWidth - i.scrollbarXWidth) {
    i.scrollbarXLeft = i.railXWidth - i.scrollbarXWidth;
  }
  if (i.scrollbarYTop >= i.railYHeight - i.scrollbarYHeight) {
    i.scrollbarYTop = i.railYHeight - i.scrollbarYHeight;
  }

  updateCss(element, i);

  cls[i.scrollbarXActive ? 'add' : 'remove'](element, 'ps-active-x');
  cls[i.scrollbarYActive ? 'add' : 'remove'](element, 'ps-active-y');
};

},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var instances = require('./instances');

var upEvent = document.createEvent('Event')
  , downEvent = document.createEvent('Event')
  , leftEvent = document.createEvent('Event')
  , rightEvent = document.createEvent('Event')
  , yEvent = document.createEvent('Event')
  , xEvent = document.createEvent('Event')
  , xStartEvent = document.createEvent('Event')
  , xEndEvent = document.createEvent('Event')
  , yStartEvent = document.createEvent('Event')
  , yEndEvent = document.createEvent('Event')
  , lastTop
  , lastLeft;

upEvent.initEvent('ps-scroll-up', true, true);
downEvent.initEvent('ps-scroll-down', true, true);
leftEvent.initEvent('ps-scroll-left', true, true);
rightEvent.initEvent('ps-scroll-right', true, true);
yEvent.initEvent('ps-scroll-y', true, true);
xEvent.initEvent('ps-scroll-x', true, true);
xStartEvent.initEvent('ps-x-reach-start', true, true);
xEndEvent.initEvent('ps-x-reach-end', true, true);
yStartEvent.initEvent('ps-y-reach-start', true, true);
yEndEvent.initEvent('ps-y-reach-end', true, true);

module.exports = function (element, axis, value) {
  if (typeof element === 'undefined') {
    throw 'You must provide an element to the update-scroll function';
  }

  if (typeof axis === 'undefined') {
    throw 'You must provide an axis to the update-scroll function';
  }

  if (typeof value === 'undefined') {
    throw 'You must provide a value to the update-scroll function';
  }

  if (axis === 'top' && value <= 0) {
    element.scrollTop = 0;
    element.dispatchEvent(yStartEvent);
    return; // don't allow negative scroll
  }

  if (axis === 'left' && value <= 0) {
    element.scrollLeft = 0;
    element.dispatchEvent(xStartEvent);
    return; // don't allow negative scroll
  }

  var i = instances.get(element);

  if (axis === 'top' && value > i.contentHeight - i.containerHeight) {
    element.scrollTop = i.contentHeight - i.containerHeight;
    element.dispatchEvent(yEndEvent);
    return; // don't allow scroll past container
  }

  if (axis === 'left' && value > i.contentWidth - i.containerWidth) {
    element.scrollLeft = i.contentWidth - i.containerWidth;
    element.dispatchEvent(xEndEvent);
    return; // don't allow scroll past container
  }

  if (!lastTop) {
    lastTop = element.scrollTop;
  }

  if (!lastLeft) {
    lastLeft = element.scrollLeft;
  }

  if (axis === 'top' && value < lastTop) {
    element.dispatchEvent(upEvent);
  }

  if (axis === 'top' && value > lastTop) {
    element.dispatchEvent(downEvent);
  }

  if (axis === 'left' && value < lastLeft) {
    element.dispatchEvent(leftEvent);
  }

  if (axis === 'left' && value > lastLeft) {
    element.dispatchEvent(rightEvent);
  }

  if (axis === 'top') {
    element.scrollTop = lastTop = value;
    element.dispatchEvent(yEvent);
  }

  if (axis === 'left') {
    element.scrollLeft = lastLeft = value;
    element.dispatchEvent(xEvent);
  }

};

},{"./instances":18}],21:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var d = require('../lib/dom')
  , h = require('../lib/helper')
  , instances = require('./instances')
  , updateGeometry = require('./update-geometry');

module.exports = function (element) {
  var i = instances.get(element);

  if (!i) {
    return;
  }

  // Recalcuate negative scrollLeft adjustment
  i.negativeScrollAdjustment = i.isNegativeScroll ? element.scrollWidth - element.clientWidth : 0;

  // Recalculate rail margins
  d.css(i.scrollbarXRail, 'display', 'block');
  d.css(i.scrollbarYRail, 'display', 'block');
  i.railXMarginWidth = h.toInt(d.css(i.scrollbarXRail, 'marginLeft')) + h.toInt(d.css(i.scrollbarXRail, 'marginRight'));
  i.railYMarginHeight = h.toInt(d.css(i.scrollbarYRail, 'marginTop')) + h.toInt(d.css(i.scrollbarYRail, 'marginBottom'));

  // Hide scrollbars not to affect scrollWidth and scrollHeight
  d.css(i.scrollbarXRail, 'display', 'none');
  d.css(i.scrollbarYRail, 'display', 'none');

  updateGeometry(element);

  d.css(i.scrollbarXRail, 'display', '');
  d.css(i.scrollbarYRail, 'display', '');
};

},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19}]},{},[1]);

mbr[name] = mbr[name] || exports[name] || module.exports[name] || module.exports || exports;

mbr.crypto = CryptoJS;
(function () {
    var cookie = {
        /**
         * set cookie
         * @param {String} name
         * @param {String} value
         * @param {Date} [expires]
         * @param {String} [path]
         * @param {String} [domain]
         */
        set: function(name, value, expires, path, domain) {
            var cookie = name + "=" + window.escape(value) + ";";
            if (expires) {
                // If it's a date
                if (expires instanceof Date) {
                    // If it isn't a valid date
                    if (window.isNaN(expires.getTime())) {
                        expires = new Date();
                    }
                }
                else {
                    expires = new Date(new window.Date().getTime() + window.parseInt(expires, 10) * 1000 * 60 * 60 * 24);
                }
                cookie += "expires=" + expires.toGMTString() + ";";
            }
            if (path) {
                cookie += "path=" + path + ";";
            }
            if (domain) {
                cookie += "domain=" + domain + ";";
            }
            window.document.cookie = cookie;
        },

        /**
         * get cookie
         * @param {String} name
         * @returns {String, null}
         */
        get: function(name) {
            var regexp = new RegExp("(?:^" + name + "|;\\s*" + name + ")=(.*?)(?:;|$)", "g");
            var result = regexp.exec(window.document.cookie);
            return (result === null) ? null : result[1];
        },

        /**
         * remove cookie
         * @param {String} cookie_name
         */
        remove: function(cookie_name) {
            this.set(cookie_name, '', new Date(1970, 1, 1, 1, 1), '/');
        }
    };

    if (typeof(mbr) === 'object') {
        mbr.cookie = cookie;
    } else {
        window.cookie = cookie;
    }
})();

mbr.hub = {
    init: function() {
        if (!this._initialized) {
            this._initialized = true;
            mbr.hub = mbr.tools.mixin(mbr.hub, new mbr.Mediator());
        }
    }
};
/*Используется и скриптом и расширением, вносить изменения КРАЙНЕ осторожно*/

'use strict';

let tools = {

    _months: ['янв', 'фев', 'мар', 'апр', 'май', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек'],

    /**
     * get document.domain without 'www.' part
     * @param document
     * @returns {*}
     */
    getHostname(document) {
        document = document || window.document;
        let hostname = document.domain;
        if (/^www./.test(hostname)) {
            hostname = hostname.slice(4);
        }
        return hostname;
    },

    /**
     * return true if current browser is mobile
     * @returns {boolean}
     */
    isMobile() {
        const userAgent = navigator.userAgent || navigator.vendor || window.opera;
        const mobileBrowserRegexp = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;

        return mobileBrowserRegexp.test(userAgent) ||
            this.isPhoneYandexBrowser() ||
            this.isTabletYandexBrowser();
    },

    /**
     * return true if either current browser is not unsupported or screen size is bigger than minimal to show pricebar
     * @returns {boolean}
     */
    isSupportedBrowser() {
        const screenSize = this.getScreenSize();
        const MIN_HEIGHT = 600;
        const MIN_WIDTH = 1000;

        if (this.isMobile() && !mbr.tools.canUseCalc()) {
            mbr.hub.trigger('script:unsupportedMobileBrowser', 'calc');
            return false;
        }

        return (screenSize.height >= MIN_HEIGHT && screenSize.width >= MIN_WIDTH) || !this.isMobile() ||
            (this.isMobile && mbr.settings.isMobileVersionEnabled());
    },
    
    isMacBrowser() {
        return navigator && 
               navigator.platform && 
               navigator.platform.indexOf('Mac') > -1;
    },

    isYaBrowser() {
        return navigator && 
               navigator.userAgent && 
               navigator.userAgent.indexOf('YaBrowser') > -1;
    },
    
    isPhoneYandexBrowser() {
        if (navigator.userAgent) {
            const userAgents = navigator.userAgent.split(' ');
            const mobileRE = /^YaBrowser.+00$/;
            return userAgents.some((userAgent) => mobileRE.test(userAgent));
        }
    },

    isTabletYandexBrowser() {
        if (navigator.userAgent) {
            const userAgents = navigator.userAgent.split(' ');
            const mobileRE = /^YaBrowser.+01$/;
            return userAgents.some((userAgent) => mobileRE.test(userAgent));
        }
    },

    /**
     * return true, if element has specified class
     * @param el
     * @param className
     */
    hasClass(el, className) {
        if (el) {
            return (' ' + el.className + ' ').indexOf(' ' + className + ' ') > -1;
        }
    },

    /**
     * return new className, removes specified class from an element
     * @param el
     * @param className
     */
    removeClass(el, className) {
        if (el) {
            el.className = el.className.replace(className, '');
            return el.className;
        }
    },

    /**
     * adds specidied class to element and returns new el.className after adding
     * @param el
     * @param className
     */
    addClass(el, className) {
        if (el) {
            if (this.hasClass(el, className)) {
                return;
            }

            if (el.className) {
                el.className += ' ' + className;
            } else {
                el.className = className;
            }

            return el.className;
        }
    },

    /**
     * return true, if either domain equals to sub or sub is subdomain
     * @param domain
     * @param sub
     */
    isSubdomain(domain, sub) {
        let index = domain.indexOf(sub);
        if (index === -1) {
            return false;
        } else if (index === 0) {
            return true;
        } else {
            return domain[index - 1] === '.'; //subdomain
        }
    },

    /**
     * Function for getting Price
     * @param str
     * @returns {XML|string}
     */
    priceAnalyze(str) {
        //delete all spaces for cases like '..54 100..'
        str = str.replace(/\s*/g, '');

        //take a substring '12/12.02/12.000.000 (belarus) asd' from '12 asd 345'
        str = /\d+[\.,`]*[0-9]*[\.,`]*[0-9]*/g.exec(str);

        str = str && str.length && str[0] || '';

        //delete everything except numbers,',' and '.'
        str = str.replace(/[^0-9,\.]/g, '');

        //delete '.' or ',' remained after 'rub.' in price, e.x.
        str = str.replace(/(,|\.)$/g, '');

        //delete cents, last 2 numbers after and '.' or ','
        str = str.replace(/(,|\.)\d\d?$/g, '');

        //delete remained '.' and ','
        str = str.replace(/[.,]/g, '');
        str = str.replace(/`*/g, '');
        return str;
    },

    /**
     * Functions for getting text from HTML element without whitespaces
     * @param {HTMLElement} elem
     * @returns {String}
     */
    getTextContents(elem, useAlt) {
        let res = '';
        for (var i = 0; i < elem.childNodes.length; i++) {
            if (elem.childNodes[i].nodeType == document.TEXT_NODE) {
                res += ' ' + elem.childNodes[i].textContent;
            } else if (useAlt && elem.childNodes[i].alt) {
                res += elem.childNodes[i].alt;
            } else if (elem.childNodes[i].nodeType == document.ELEMENT_NODE) {
                res += ' ' + this.getTextContents(elem.childNodes[i], useAlt);
            }
        }

        res = res.replace(/\s+/g, ' ')
            .replace(/^[^\dA-Za-zА-Яа-я\(\)\.\,\$€]+/, '')
            .replace(/[^\dA-Za-zА-Яа-я\(\)]\.\,\$€+$/, '');
        return res.trim();
    },
    /**
     * return value for queryParam
     * @param {String} url
     * @param {String} queryParam
     * @param {Boolean} [useHash=true] в некоторых ссылках (например, в выдаче гугла) querystring разделяются
     * @returns {string}
     */
    getQueryParam(url, queryParam, useHash=true) {
        let params = [];
        let query;
        let queryParams = [queryParam, encodeURIComponent(queryParam)];

        if (useHash) {
            while (url.lastIndexOf('#') !== -1) {
                params = params.concat(url.substr(url.lastIndexOf('#') + 1).split('&'));
                url = url.substr(0, url.lastIndexOf('#'));
            }
        } else {
            let hashIndex = url.indexOf('#');
            if (hashIndex !== -1) {
                url = url.substring(0, hashIndex);
            }
        }

        if (url.indexOf('?') != -1) {
            params = params.concat(url.substr(url.indexOf('?') + 1).split('&'));
        }

        if (params) {
            for (var j = 0; j < queryParams.length; j++) {
                for (var i = 0; i < params.length; i++) {
                    if (params[i].indexOf(queryParams[j] + '=') === 0) {
                        query = params[i].substr((queryParams[j] + '=').length);
                        return decodeURIComponent(query.replace(/\+/g, ' '));
                    }
                }
            }
        }
    },

    /**
     * return date with format (DD mon)
     * @param {String} date e.g. '2014-03-21T20:10:00Z'
     */
    formatDate(date) {
        let dateRE = /^\d{4}-(\d{2})-(\d{2})/;
        if (date && dateRE.test(date)) {
            return '(' + RegExp.$2 + ' ' + this._months[parseInt(RegExp.$1, 10) - 1] + ')';
        }
        return '';

    },

    decodeHtml(str) {
        let decodeEntities = (s) => {
            let str;
            let temp = document.createElement('p');
            temp.innerHTML = s;
            str = temp.textContent || temp.text;
            temp = null;
            return str;
        };
        return str.replace(/&(#(?:x[0-9a-f]+|\d+)|[a-z]+);?/gi, ($0, $1) => {
            if ($1[0] === '#') {
                return String.fromCharCode(
                    $1[1].toLowerCase() === 'x' ? parseInt($1.substr(2), 16) : parseInt($1.substr(1), 10)
                );
            } else {
                return decodeEntities('&' + $1 + ';');
            }
        });
    },

    /**
     * Get economy text
     * @param price {String} price from page
     * @param betterPrice {String} price from server API
     * @param currency {String} currency from server API
     * @returns {string} result string
     */
    getProfitText(price, betterPrice, currency) {
        let d = price - betterPrice;
        let text = '';
        if (d > 100 && currency == 'руб.') {
            text += d + ' ' + currency;
        }
        return text;
    },

    /**
     * return true, if month is less than current month
     * @param {Number} month Jan - 1, Dec - 12
     */
    isMonthOfNextYear(month) {
        let currentMonth = new Date().getMonth();
        return month < currentMonth;
    },

    /**
     * Mixin properties of src object to the dst object
     * including all properties in prototype chain up to Object
     * @param {Object} dst
     * @param {Array} src
     */
    mixin(dst, ...src) {
        let tobj = {};
        src.forEach((currentSrc) => {
            for (let x in currentSrc) {
                if (((typeof tobj[x] == 'undefined') || (tobj[x] != currentSrc[x])) && typeof src[x] === 'undefined') {
                    dst[x] = currentSrc[x];
                }
            }
        });

        return dst;
    },

    /**
     * log by console if log has been enabled
     * @param data
     * @param logEnabled
     */
    log(data, logEnabled) {
        if (mbr.settings && mbr.settings.isLogEnabled && mbr.settings.isLogEnabled() || logEnabled) {
            console.log(data);
        }
    },

    /**
     * get script tag with price-context
     */
    getPriceContextElement(isWebsite) {
        let scripts = document.getElementsByTagName('script');
        if (isWebsite) {
            for (let i = scripts.length - 1; i >= 0; i--) { //for website partners
                if (scripts[i].src && (scripts[i].src.indexOf('sovetnik.webpartner.min.js') > -1)) {
                    return scripts[i];
                }
            }
        }

        for (let i = 0; i < scripts.length; i++) { //for sovetnik scripts
            let isOurScript = scripts[i].src && (
                    scripts[i].src.indexOf('static/js/ecomerce-context') > -1 ||
                    scripts[i].src.indexOf('sovetnik.min.js') > -1 ||
                    scripts[i].src.indexOf('mbr=') > -1
                );
            if (isOurScript) {
                return scripts[i];
            }
        }
    },

    _clearTemplates() {
        let styleNode = document.getElementById('mbrstl');
        let templateNode = document.getElementById('mbrtmplt');
        if (styleNode) {
            styleNode.parentNode.removeChild(styleNode);
        }
        if (templateNode) {
            templateNode.parentNode.removeChild(templateNode);
        }
    },

    /**
     * remove script node from DOM and remove iframe storage if we don't need it anymore
     * @param {Boolean} [force=false]
     */
    clearPriceContextNodes(force) {
        if (mbr.settings.needCleanDOM()) {
            mbr.hub.on('pipe:reject', () => {
                mbr.log('clear iframe after pipe:reject');

                this._clearTemplates();
                mbr.settings.removeScriptStartedInfo();
                mbr.iframeStorage && mbr.iframeStorage.clear();
            });

            if (force) {
                this._clearTemplates();
                mbr.settings.removeScriptStartedInfo();
                mbr.iframeStorage && mbr.iframeStorage.clear();
            }
        }
    },

    /**
     * get currency name from string. E.g. - if we have '$335' or '324 USD' or 'Price <b> 444 </b> usd' return 'USD'.
     * @param str
     * @returns {String}
     */
    getCurrencyFromStr(str) {
        if (!str) {
            return;
        }
        str = str.toUpperCase();
        const currencyPatterns = [
            {
                pattern: /(?:EUR)|€/,
                currency: 'EUR'
            },
            {
                pattern: /(?:USD)|(?:У\.Е\.)|\$/,
                currency: 'USD'
            },
            {
                pattern: /(?:UAH)|(?:ГРН)|(?:₴)/,
                currency: 'UAH'
            },
            {
                pattern: /(?:RUR)|(?:RUB)|(?:Р\.)|(?:РУБ)/,
                currency: 'RUB'
            },
            {
                pattern: /(?:ТГ)|(?:KZT)|(?:₸)|(?:ТҢГ)|(?:TENGE)|(?:ТЕНГЕ)/,
                currency: 'KZT'
            },
            {
                pattern: /(?:GBP)|(?:£)|(?:UKL)/,
                currency: 'GBP'
            }
        ];

        let searchResult = currencyPatterns.map((pattern) => {
            return {
                currency: pattern.currency,
                index: str.search(pattern.pattern)
            };
        }).filter((result) => {
            return result.index > -1;
        }).sort((a, b) => {
            return a.index - b.index;
        });

        if (searchResult.length) {
            return searchResult[0].currency;
        }
    },

    /**
     * get one element which doesn't have a common parent with others
     * @param selector
     * @param [filterFunction]
     * @returns {*}
     */
    getDifferentElement(selector, filterFunction) {
        let elements = [].slice.call(document.querySelectorAll(selector));

        if (filterFunction) {
            elements = elements.filter(filterFunction);
        }

        while (elements.length > 1) {
            elements = elements.map((el) => el.parentNode);

            elements = elements.filter((el) => {
                return el && elements.filter((elem) => {
                    return elem === el;
                }).length === 1;
            });
        }
        if (elements.length) {
            try {
                if (elements[0].matches && elements[0].matches(selector)) {
                    return elements[0];
                }
                if (elements[0].matchesSelector && elements[0].matchesSelector(selector)) {
                    return elements[0];
                }
                if (elements[0].webkitMatchesSelector && elements[0].webkitMatchesSelector(selector)) {
                    return elements[0];
                }
            } catch (ex) {
            }

            return elements[0].querySelector && elements[0].querySelector(selector);
        }
    },

    /**
     * get querySelectorAll(selector) but elements with the exact same className
     * @param selector
     */
    getUniqueElements(selector) {
        let elements = [].slice.call(document.querySelectorAll(selector));
        if (elements.length) {
            let elementsWithClass = [];
            let elementsWithoutClass = [];
            let elementsWithItemType = [];

            elements.forEach((el) => {
                if (el.className) {
                    elementsWithClass.push(el);
                } else {
                    elementsWithoutClass.push(el);
                }
            });

            elementsWithClass = elementsWithClass.filter((el) => {
                var className = el.className;

                return elementsWithClass.filter((el) => {
                    return el.className === className;
                }).length === 1;
            });

            elementsWithItemType = elements.filter((el) => {
                return el.getAttribute('itemtype');
            });

            elementsWithItemType = elementsWithItemType.filter((el) => {
                var itemType = el.getAttribute('itemtype');
                return elementsWithItemType.filter((el) => {
                    return el.getAttribute('itemtype') === itemType;
                }).length === 1;
            });

            //if we have elements, we should pick one non-empty array with minimal length
            if (elementsWithoutClass.length || elementsWithClass.length || elementsWithItemType.length) {
                elements = elementsWithItemType;
                if (!elementsWithoutClass.length ||
                    (elementsWithoutClass.length && elementsWithoutClass.length < elements.length)) {
                    elements = elementsWithoutClass;
                }
                if (!elements.length || (elementsWithClass.length && elementsWithClass.length < elements.length)) {
                    elements = elementsWithClass;
                }
            }

            if (elements.length > 5) { //catalog or search
                elements = [];
            }
        }
        return elements;
    },

    formatPrice(price, currency, pre) {
        if (currency === 'USD') {
            currency = '$';
        } else if (currency === 'EUR') {
            currency = '€';
        }

        if (typeof price === 'string') {
            price = price.replace(/\D/g, '');
        }

        let priceElements = price.toString().split('');

        price = priceElements.map(function(elem, index) {
            if (index && (priceElements.length - index) % 3 === 0) {
                elem = ' ' + elem;
            }
            return elem;
        }).join('');

        price = price.replace(' .', '.');

        if (currency) {
            price += ' ' + currency;
        }

        if (pre) {
            price = `${pre} ${price}`;
        }

        return price;
    },

    getPageHeight() {
        return Math.max(
            document.body.scrollHeight,
            document.body.offsetHeight,
            document.documentElement.clientHeight,
            document.documentElement.scrollHeight,
            document.documentElement.offsetHeight
        );
    },

    getOffsetTop() {
        let top = window.pageYOffset;
        if (!top) {
            let elem = document.documentElement.clientHeight ? document.documentElement : document.body;
            top = elem.scrollTop || 0;
        }
        return top;
    },

    getRandomHash(length) {
        let hash = '';
        let cryptoObj = window.crypto || window.msCrypto;
        if (window.Uint32Array && cryptoObj && cryptoObj.getRandomValues) {
            try {
                let buffer = new window.Uint32Array(Math.round(length / 4 + 1));
                let i = 0;
                cryptoObj.getRandomValues(buffer);
                while (hash.length < length) {
                    hash += buffer[i].toString(36).substr(1);
                    i = (i + 1) % buffer.length;
                }
                hash = hash.substr(0, length);
                return hash;
            } catch (ex) {
            }
        }

        while (hash.length < length) {
            hash += Math.round(Math.random() * 35).toString(36);
        }
        return hash;
    },

    getGradeText(gradeCount) {
        let additionalText;
        let lastNum = gradeCount % 10;
        if (gradeCount === 0) {
            return 'Нет отзывов';
        }
        if (lastNum === 1) {
            additionalText = 'отзыв';
        } else if (lastNum > 1 && lastNum < 5) {
            additionalText = 'отзыва';
        } else {
            additionalText = 'отзывов';
        }

        return gradeCount + ' ' + additionalText;
    },

    getISBN(text) {
        text = text || '';
        return text
            .split(/[,;]/)
            .map(function(text) {
                text = text.replace(/[^\d\-]/g, '');
                let digits = text.replace(/[\D]/g, '');

                let isbnLength;
                if (digits.length % 13 === 0) {
                    isbnLength = 13;
                } else if (digits.length % 10 === 0) {
                    isbnLength = 10;
                }

                if (isbnLength) {
                    return text.split('')
                        .reduce((res, current) => {
                            let isbnIndex = (res.index / isbnLength) | 0;
                            res.isbn[isbnIndex] = res.isbn[isbnIndex] || '';
                            res.isbn[isbnIndex] += current;

                            if (/\d/.test(current)) {
                                res.index++;
                            }

                            return res;
                        }, {
                            isbn: [],
                            index: 0
                        }).isbn.toString();
                }
            }).reduce((isbn, current) => {
                if (current) {
                    isbn.push(current);
                }
                return isbn;
            }, []).toString();
    },

    pluralize(forms, quant) {
        let last = ('0' + quant).slice(-2)[1];
        let preLast = ('0' + quant).slice(-2)[0];

        if (last === '1' && preLast !== '1') {
            return forms[0];
        }

        if (last > '1' && last < '5' && preLast !== '1') {
            return forms[1];
        }

        return forms [2];

    },

    ratingText(rating) {
        if (rating % 1 > 0) {
            return String(rating);
        } else {
            return rating + '.0';
        }
    },

    /**
     * get screen size
     * @returns {{width: number, height: number}}
     */
    getScreenSize() {
        const width = Math.max(document.documentElement.clientWidth, window.innerWidth);
        const height = Math.max(document.documentElement.clientHeight, window.innerHeight);

        return {
            width,
            height
        };
    },

    getScreenResolution() {
        const ratio = window.devicePixelRatio || 1;
        return (window.screen.width * ratio) + 'x' + (window.screen.height * ratio);
    },

    getViewPort() {
        return (document.body.clientWidth) + 'x' + (document.body.clientHeight);
    },

    isPlugHunterExist() {
        //let scripts = [...document.querySelectorAll('script')];TODO fix
        let scripts = [].slice.call(document.querySelectorAll('script'));

        return scripts.some((script) => script.src && script.src.indexOf('plughunter.ru') !== -1);
    },

    /**
     * we don't have location.origin for Opera12. Should get it manuall
     * @returns {String}
     */
    getLocationOrigin() {
        return window.location.origin || (window.location.protocol + '//' + window.location.hostname);
    },

    reduce(array, callback, initialValue) {
        if (array == null) {
            throw new TypeError('Reduce called on null or undefined');
        }
        if (typeof callback !== 'function') {
            throw new TypeError(callback + ' is not a function');
        }
        let t = Object(array);
        let len = t.length >>> 0;
        let k = 0;
        let value;

        if (arguments.length == 3) {
            value = arguments[2];
        } else {
            while (k < len && !k in t) {
                k++;
            }
            if (k >= len) {
                throw new TypeError('Reduce of empty array with no initial value');
            }
            value = t[k++];
        }
        for (; k < len; k++) {
            if (k in t) {
                value = callback(value, t[k], k, t);
            }
        }
        return value;
    },

    /**
     * get name of transitionEnd event
     * @returns {String, null}
     */
    getTransitionEndEvent() {
        if (!this._transitionEvent) {
            let el = document.createElement('fakeelement');
            const transitions = {
                'transition': 'transitionend',
                'OTransition': 'oTransitionEnd',
                'MozTransition': 'transitionend',
                'WebkitTransition': 'webkitTransitionEnd'
            };

            for (let t in transitions) {
                if (typeof el.style[t] !== 'undefined') {
                    this._transitionEvent = transitions[t];
                    break;
                }
            }
        }
        return this._transitionEvent;
    },

    canUseCalc() {
        if (typeof this._canUseCalc === 'undefined') {
            let a = document.createElement('a');
            a.style.cssText = 'width: calc(10px); width: -moz-calc(10px); width: -webkit-calc(10px);';

            this._canUseCalc = !!a.style.length;
        }

        return this._canUseCalc;
    },

    /**
     * return object without all fields which is undefined
     * @param {Object} obj
     * @returns {Object}
     */
    removeUndefined(obj) {
        Object.keys(obj).forEach((key) => {
            if (typeof obj[key] === 'undefined') {
                delete obj[key];
            }
        });

        return obj;
    },

    throttle(func, ms) {
        let isThrottled = false;
        let savedArgs;
        let savedThis;

        function wrapper() {

            if (isThrottled) { // (2)
                savedArgs = arguments;
                savedThis = this;
                return;
            }

            func.apply(this, arguments); // (1)

            isThrottled = true;

            setTimeout(() => {
                isThrottled = false; // (3)
                if (savedArgs) {
                    wrapper.apply(savedThis, savedArgs);
                    savedArgs = savedThis = null;
                }
            }, ms);
        }

        return wrapper;
    },

    imageToBase64(url) {
        return new Promise((resolve) => {
            let img = new Image();
            img.crossOrigin = 'Anonymous';

            let type;

            if (/\.jpeg/i.test(url)) {
                type = 'image/jpeg';
            } else if (/\.jpg/i.test(url)) {
                type = 'image/jpg';
            } else {
                type = 'image/png';
            }

            img.onload = function() {
                var canvas = document.createElement('CANVAS');
                var ctx = canvas.getContext('2d');
                var dataURL;
                canvas.height = this.height;
                canvas.width = this.width;
                ctx.drawImage(this, 0, 0);
                dataURL = canvas.toDataURL(type);
                canvas = null;
                
                resolve(dataURL);
            };
            img.src = url;
        });
    },

    getRequestAnimationFrame() {
        let func = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
            window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
        return func && func.bind(window);
    }
};

if (typeof mbr !== 'undefined') {
    mbr.tools = tools;
    mbr.log = mbr.tools.log;
}

if (typeof svt !== 'undefined') {
    svt.tools = tools;
    svt.log = svt.tools.log;
}
(() => {
    let hub;
    if (typeof mbr !== 'undefined') {
        hub = mbr.hub;
    }

    let xhr = {

        /**
         * return true if we can send crossdomain requests
         * @returns {boolean}
         */
        isCORSSupported() {
            return !!this._getXHR('https://yandex.ru', 'GET', true);
        },

        /**
         * return XMLHttpRequest with CORS support
         * @returns {*}
         * @private
         */
        _getXHR(url, method, withCredentials) {
            let xmlhttp;
            if (typeof XMLHttpRequest !== 'undefined') {
                xmlhttp = new XMLHttpRequest();
            }
            if (withCredentials) {
                if ('withCredentials' in xmlhttp) {
                    try {
                        xmlhttp.open(method, url, true);
                        xmlhttp.withCredentials = true;
                    } catch (ex) {
                        xmlhttp = null;
                    }
                } else {
                    xmlhttp = null;
                }
            } else {
                xmlhttp.open(method, url, true);
            }

            return xmlhttp;
        },

        /**
         * get request
         * @param url
         * @param params
         * @param callback
         * @param withoutCredentials
         */
        get(url, params, callback, withoutCredentials) {
            let startTime;
            let query = params ? ((url || '').indexOf('?') === -1 ? '?' : '&') : '';

            params = params || {};
            let queryArr = [];
            for (let key in params) {
                //noinspection JSUnresolvedFunction
                if (params.hasOwnProperty(key)) {
                    queryArr.push(encodeURIComponent(key) + '=' + encodeURIComponent(params[key]));
                }
            }
            query += queryArr.join('&');

            var xhr = this._getXHR(url + query, 'GET', !withoutCredentials);

            if (!xhr) {
                callback && callback({error: 'CORS not supported'});
            }

            xhr.onreadystatechange = function() {
                if (startTime) {
                    let time = new Date().getTime() - startTime;
                    hub && hub.trigger('server:responseEnd', time);
                }
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        callback && callback(JSON.parse(xhr.responseText));
                    } else {
                        var errorMessage;
                        if (typeof xhr.status === 'number' || typeof xhr.status === 'string') {
                            errorMessage = xhr.status;

                            if (typeof xhr.statusText === 'string') {
                                errorMessage += ' ' + xhr.statusText;
                            }
                        } else {
                            errorMessage = 'Unknown code';
                        }
                        if (xhr.responseText) {
                            try {
                                let response = JSON.parse(xhr.responseText);
                                callback && callback(response);
                                return;
                            } catch (ex) {
                                //
                            }
                        }

                        callback && callback({
                            error: 'Error with XHR',
                            errorMessage: errorMessage
                        });
                    }
                }
            };
            startTime = new Date().getTime();
            xhr.send(null);
        },

        post(url, obj, callback) {
            var xhr = this._getXHR(url, 'POST', true) || this._getXHR(url, 'POST');

            xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');

            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    callback && callback(JSON.parse(xhr.responseText));
                }
            };

            xhr.send(JSON.stringify(obj));
        }
    };

    if (typeof mbr !== 'undefined') {
        mbr.xhr = xhr;
    }
    if (typeof svt !== 'undefined') {
        svt.xhr = xhr;
    }
})();
(() => {
    mbr.perf = {
        _tracking: {},
        _result: {},

        /**
         * start tracking timing for event 
         * @param {String} event
         */
        start(event) {
            this._tracking[event] = this._tracking[event] || Date.now();
        },

        /**
         * stop tracking timing for previously started event
         * @param {String} event
         */
        end(event) {
            if (this._tracking[event] && !this._result[event]) {
                this._result[event] = Date.now() - this._tracking[event];
            }
        },

        /**
         * get timing info about either particular event or all events
         * @param {String} [event]
         * @returns {String}
         */
        getTrackingInfo(event) {
            if (event) {
                return this._result[event];
            }
            
            return JSON.stringify(this._result, 2, 2);
        }
    };
})();
class SiteInfo {
    constructor(currentDomainData, referrerData) {
        this._currentDomainData = currentDomainData;
        this._referrerData = referrerData;
    }

    get selector() {
        return this._currentDomainData && this._currentDomainData.selector;
    }

    get urlTemplates() {
        return this._currentDomainData && this._currentDomainData.urlTemplates;
    }

    get productPageSelector() {
        return this._currentDomainData && this._currentDomainData.productPageSelector;
    }

    currentDomainDataExists() {
        return !!this._currentDomainData;
    }

    /**
     * return true if rule exists in currentDomainData or referrerData
     * @param {String} rule
     * @param {String} [message] message to log if we have the rule
     * @param {Boolean} [isReferrer] true if we should check referrerData instead of currentDomainData
     * @returns {boolean}
     * @private
     */
    _checkRule(rule, message, isReferrer) {
        var data = isReferrer ? this._referrerData : this._currentDomainData;
        if (data && data.rules && data.rules.length && data.rules.indexOf(rule) > -1) {
            if (message) {
                mbr.log(message);
            }
            return true;
        }
        return false;
    }

    canBeProductPage() {
        let match;
        let url = document.URL;

        if (this.urlTemplates) {
            match = this.urlTemplates.some(template => (new RegExp(template)).test(url));
            if (match) {
                return true;
            }
        } else if (this.productPageSelector) {
            match = document.querySelector(this.productPageSelector);
            if (match) {
                return true;
            }
        } else {
            return true;
        }

        return false;
    }

    isBlacklisted() {
        return this._checkRule('blacklisted', 'domain is blacklisted');
    }

    isYandexWebPartner() {
        return this._checkRule('yandex-web-partner', 'this is webpartner');
    }

    isBlacklistedByReferrer() {
        return this._checkRule('blacklisted-by-referrer', 'blacklisted by referrer', true);
    }

    canUsePriceContext() {
        return !this._checkRule('no-price-context', 'can not use price context');
    }

    canUseMicrodata() {
        return !this._checkRule('no-microdata', 'can not use microdata');
    }

    canExtractPrice() {
        return !this._checkRule('no-price', 'can not extract price');
    }

    canAddRelativePosition() {
        return !this._checkRule('no-relative-position', 'can not add relative position');
    }

    canAddMarginTop() {
        return !this._checkRule('no-margin-top', 'can not add margin-top');
    }

    isReviewSite() {
        return this._checkRule('review', 'this is review site');
    }

    isShop() {
        return this._checkRule('shop', 'this is shop');
    }

    isClassified() {
        return this._checkRule('classified');
    }

    needUseRandomContainer() {
        return this._checkRule('random-container', 'should use random container');
    }

    getPricebarTopPosition() {
        if (this._checkRule('top-is-0')) {
            return 0;
        }
        return -1;
    }

    needUseRussianEnglishLetters() {
        return this._checkRule('russian-english-letters', 'should use russian-english letters');
    }
}

mbr.SiteInfo = SiteInfo;


(() => {
    let defaultSettings;
    try {
        defaultSettings = JSON.parse('{"applicationName":"Sovetnik","affId":1008,"universalScript":true}');
    } catch(ex) {
        defaultSettings = {};
    }

    mbr.settings = {
        _defaultSettings: defaultSettings,
        _blacklist: {},

        _defaultCampaignPrefix: 'Price Suggest - ',

        /**
         * return true if it's script for yandex web partner's site
         * @returns {Boolean}
         */
        isYandexWebPartner() {
            return !!this._defaultSettings.yandexWebPartner;
        },

        _cacheFromYandexMarket() {
            if (document.URL.indexOf('mvideo') > -1) { //MBR-7377
                var url = document.URL;
                url = url.replace(/\?.+/, '');

                mbr.cookie.set('svt-url', url);
            }
        },

        _isFromYandexMarketCached() {
            return document.URL.indexOf('mvideo') > -1 &&
                document.URL === decodeURIComponent(mbr.cookie.get('svt-url'));
        },

        /**
         * return true if referrer is market.yandex.ru
         * @returns {boolean}
         * @private
         */
        _fromYandexMarket() {
            const {
                referrer,
                URL: url
                } = document;

            if (referrer && referrer.indexOf('market.yandex') === 0) {
                return true;
            }

            if (this._isFromYandexMarketCached()) {
                return true;
            }

            const ymclid = mbr.tools.getQueryParam(url, 'ymclid', false);
            if (ymclid && /^\d+$/.test(ymclid)) {
                return true;
            }

            const fromMarket = mbr.tools.getQueryParam(url, 'frommarket', false);
            return !!fromMarket;
        },

        /**
         * return true if url has 'yclid' param
         * @param {String} url
         * @returns {boolean}
         * @private
         */
        _fromDirect(url) {
            let yclid = mbr.tools.getQueryParam(url, 'yclid', false)
            return !!yclid;
        },

        /**
         * return true if domain is *yandex.* or *.ya.*
         * @param domain
         * @private
         */
        _isYandexSite(domain) {
            var secondRE = /([^\.]+?)\.[^\.]+?$/;
            var execRE = secondRE.exec(domain);
            if (execRE && execRE.length > 1) {
                return (execRE[1] === 'yandex' || execRE[1] === 'ya') && domain.indexOf('sovetnik') === -1;
            }
        },

        /**
         * return true if referrer has a domain from yandexBlackList
         * @param referrer
         * @private
         */
        _fromYandexPartner(referrer) {
            if (referrer) {
                var urlBegin = referrer.replace(/https?:\/\//, '');

                if (this._blacklist.yandexBlackList) {
                    for (var i = 0; i < this._blacklist.yandexBlackList.length; i++) {
                        if (urlBegin.indexOf(this._blacklist.yandexBlackList[i]) === 0) {
                            return true;
                        }
                    }
                }

                return this._siteInfo.isBlacklistedByReferrer();
            }
            return false;
        },

        /**
         * return false if:
         * 1. sovetnik has been removed
         * 2. offer enabled and it has been rejected
         * 3. _fullBlackList contains the current domain
         * @returns {boolean}
         */
        isSuggestScriptEnabled() {
            var domain = mbr.tools.getHostname(document);

            if (this.isSettingsPage()) {
                return true;
            }

            if (this._settings && this._settings.sovetnikRemoved) {
                mbr.log('sovetnik removed');
                return false;
            }

            if (this._domainDisabled) {
                mbr.hub.trigger('script:domainDisabled', document.domain);
                mbr.hub.trigger('script:disabled', 'DisabledForDomain');
                mbr.log('domain disabled');
                return false;
            }

            if (this.isYandexWebPartner()) {
                return true;
            }

            if (this._settings && this._settings.offerEnabled && this._settings.offer === 'rejected') {
                mbr.hub.trigger('script:disabled', 'EulaNotAccepted');
                mbr.log('offer rejected');
                return false;
            }

            if (this._siteInfo.isBlacklisted() || this._siteInfo.isYandexWebPartner()) {
                mbr.log('full blacklist');
                return false;
            }

            if (this._blacklist.fullBlackList) {
                for (let i = 0; i < this._blacklist.fullBlackList.length; i++) {
                    if (domain && mbr.tools.isSubdomain(domain, this._blacklist.fullBlackList[i])) {
                        mbr.hub.trigger('page:fullBlackList', domain);
                        mbr.log('full blacklist');

                        return false;
                    }
                }
            }
            if (this._blacklist.yandexWebPartners) {
                for (let i = 0; i < this._blacklist.yandexWebPartners.length; i++) {
                    if (domain && mbr.tools.isSubdomain(domain, this._blacklist.yandexWebPartners[i])) {
                        mbr.hub.trigger('page:yandexWebPartners', domain);
                        mbr.log('yandex web partners');
                        return false;
                    }
                }
            }

            if (this._isYandexSite(domain)) {
                mbr.log('yandex site');
                return false;
            }
            if (this._fromYandexMarket()) {
                this._cacheFromYandexMarket();
                mbr.hub.trigger('script:disabled', 'fromMarketSite');
                mbr.log('from market');
                return false;
            }

            if (this._fromYandexPartner(document.referrer)) {
                mbr.log('from yandex partner');
                return false;
            }

            return true;
        },

        /**
         * return false if either pcBlacklist contains the domain or it's a main page of site
         * @returns {boolean}
         */
        isProductSuggestEnabled() {
            const domain = mbr.tools.getHostname(document);

            if (this.isYandexWebPartner()) {
                return true;
            }

            if (!this._siteInfo.canUsePriceContext()) {
                return false;
            }

            if (this._blacklist.pcBlackList) {
                for (let i = 0; i < this._blacklist.pcBlackList.length; i++) {
                    if (domain && mbr.tools.isSubdomain(domain, this._blacklist.pcBlackList[i])) {
                        mbr.log('pc blacklist');
                        return false;
                    }
                }
            }

            if (this._fromDirect(document.URL)) {
                mbr.hub.trigger('script:disabled', 'fromYandexDirect');
                mbr.log('from direct');
                return false;
            }

            if (window.location.pathname === '/') {
                mbr.log('main page');
                return false;
            }

            return true;
        },

        /**
         * returns true if current url seems to be product page or if we can't determine that fact, false if not
         * @returns {boolean}
         */
        canBeProductPage() {
            if (this._siteInfo) {
                return this._siteInfo.canBeProductPage();
            } else {
                return true;
            }
        },

        /**
         * return true if priceBlackList doesn't contain a domain
         * @returns {boolean}
         */
        canExtractPrice() {
            if (this._siteInfo) {
                return this._siteInfo.canExtractPrice();
            }
            return true;
        },

        /**
         * return false if microdataBlacklist contains a domain
         * @param domain
         * @returns {boolean}
         */
        canUseMicrodata() {
            const domain = mbr.tools.getHostname(document);

            if (!this._siteInfo.canUseMicrodata()) {
                return false;
            }
            if (this._blacklist.microdataBlackList) {
                for (let i = 0; i < this._blacklist.microdataBlackList.length; i++) {
                    if (domain && mbr.tools.isSubdomain(domain, this._blacklist.microdataBlackList[i])) {
                        return false;
                    }
                }
            }
            return true;
        },

        /**
         * required for the pricebar
         * return false if blacklist contains a domain
         * @param domain
         * @returns {boolean}
         */
        canAddRelativePosition: function(domain) {
            if (this._siteInfo && !this._siteInfo.canAddRelativePosition()) {
                return false;
            }
            if (this._blacklist.relativePositionBlacklist) {
                for (let i = 0; i < this._blacklist.relativePositionBlacklist.length; i++) {
                    if (domain && mbr.tools.isSubdomain(domain, this._blacklist.relativePositionBlacklist[i])) {
                        return false;
                    }
                }
            }

            return true;
        },

        canAddMarginTop() {
            return this._siteInfo && this._siteInfo.canAddMarginTop() && !this.isAnti();
        },

        getPricebarTopPosition() {
            if (this._siteInfo) {
                return this._siteInfo.getPricebarTopPosition();
            }
            return -1;
        },

        needUseRussianEnglishLetters() {
            return this._siteInfo && this._siteInfo.needUseRussianEnglishLetters();
        },

        /**
         * return false if selector for current domain exists
         * @returns {boolean}
         */
        canCheckDomain() {
            return !this.getSelector();
        },

        /**
         * return false if selector for current domain exists
         * @returns {boolean}
         */
        canCheckCMS() {
            return !this.getSelector();
        },

        isOurSite(domain) {
            return domain &&
                domain.indexOf('.metabar.ru') > -1 ||
                domain === 'localhost' ||
                domain.indexOf('.yandex.ru') > -1;
        },

        isSettingsPage() {
            return document.URL && document.URL.indexOf(mbr.config.getSettingsHost()) === 0;
        },

        /**
         * get additional classes for pricebar
         * @returns {Null, String}
         */
        getViewModificators() {
            return this._settings && this._settings.view;
        },

        /**
         * get custom pricebar's logo
         * @returns {Null, String}
         */
        getCustomLogo() {
            return this._settings && this._settings.customLogo;
        },

        isUniversalScript() {
            return this._defaultSettings && this._defaultSettings.universalScript;
        },

        getRandomNameLength() {
            if (document.URL.match(/holodilnik\.ru/)) {
                return 7;
            }
            return 13;
        },

        /**
         * return true if we can send client statistics
         * @returns {boolean|*}
         */
        isStatsEnabled() {
            return !(this._settings && this._settings.statsDisabled);
        },

        getContainerId(maxId, needUseSavedContainer) {
            if (needUseSavedContainer) {
                var id = (parseInt(localStorage.containerId, 10) || 0) % maxId;
                localStorage.containerId = id + 1;
                return id;
            } else {
                return Math.round(Math.random() * maxId);
            }
        },

        _onSettingsLoaded(params) {
            this._blacklist = params.blacklist || {};
            this._selector = params.selector;

            this._siteInfo = new mbr.SiteInfo(params.domainData, params.referrerData);

            this._versionSent = params.versionSent;

            this._isMobile = mbr.tools.isMobile();

            mbr.log(params);
        },

        getSelector() {
            let selector = null;
            let match = true;
            let customSelector = mbr.customSelectors[mbr.tools.getHostname()];

            if (this._settings && this._settings.selector) { //for yandex website partners
                return {
                    name: this._settings.selector
                };
            }

            this._selector = this._selector || this._siteInfo.selector;

            if (this._selector) {
                selector = this._selector;
            }

            if (customSelector && match) {
                if (!selector) {
                    selector = customSelector;
                } else {
                    for (var i in customSelector) {
                        if (customSelector.hasOwnProperty(i)) {
                            selector[i] = customSelector[i];
                        }
                    }
                }
            }
            return selector;
        },

        /**
         * return true if this site can contain reviews
         * @returns {boolean}
         */
        isReviewSite() {
            if (this._siteInfo.isReviewSite()) {
                return true;
            }

            let selector = this.getSelector();

            return selector && selector === 'review';
        },

        /**
         * for yandex partner's websites
         * partner can pass product's name into script as a query parameter
         * @return {String}
         */
        getProductName() {
            return this._settings && this._settings.productName;
        },

        /**
         * for yandex partner's websites
         * partner can pass market model id into script as a query parameter
         * @return {String}
         */
        getModelId() {
            return this._settings && this._settings.modelId;
        },

        getAppVersion() {
            return '201605131547';
        },

        getAffId() {
            return this._settings && this._settings.affId;
        },

        getClid() {
            return this._settings && this._settings.clid;
        },

        isLogEnabled() {
            return window.localStorage &&
                window.localStorage.getItem('svt.debug') &&
                window.localStorage.getItem('svt.debug') !== 'false';
        },

        /**
         * return true if we're on avito.ru
         * @returns {boolean}
         */
        isAvitoSite() {
            return location.host.indexOf('avito.ru') > -1;
        },

        isAliexpress() {
            return location.host.indexOf('aliexpress.com') > -1;
        },

        isWildberries() {
            return location.host.indexOf('wildberries.ru') > -1;
        },

        isLamoda() {
            return location.host.indexOf('lamoda.ru') > -1;
        },

        isShop() {
            return this._siteInfo && this._siteInfo.isShop();
        },

        isClassified: function() {
            return this._siteInfo && this._siteInfo.isClassified();
        },

        isSilentMode() {
            return this.isYandexWebPartner() && this._settings && this._settings.silent;
        },

        /**
         * return true if we have to remove both script tag and iframe storage after using.
         * @returns {boolean}
         */
        needCleanDOM() {
            return !this._doNotClean && !this.isYandexWebPartner();
        },

        synchronizeSettings() {
            if (mbr.settingsJSON || typeof (settingsJSON) !== 'undefined') {
                if (mbr.settingsJSON) {
                    return this.applySettings(mbr.settingsJSON);
                } else {
                    return this.applySettings(settingsJSON);
                }
            }
            if (this.isUniversalScript()) {
                return this.applySettingsFromUrl() || mbr.storage.loadSettings().then(this.applySettings.bind(this));
            } else if (this.isYandexWebPartner()) {
                return this.applySettingsFromUrl() || mbr.Promise.resolve();
            }

            return this.applySettingsFromUrl() || mbr.storage.loadSettings().then(this.applySettings.bind(this));
        },

        /**
         * return true if it's elements' extension
         * @returns {boolean}
         */
        isYandexElementsExtension() {
            return !!(mbr.extensionStorage &&
                (this.getAffId() == mbr.extensionStorage.getDefaultAffId() ||
                    this.getClid() == mbr.extensionStorage.getDefaultClid()
                )
            );
        },

        /**
         * get offsetY when we have to show pricebar
         */
        getScrollPosition() {
            return +(this._settings && this._settings.startScroll || 0);
        },

        /**
         * get delay before popup in seconds
         * @returns {number}
         */
        getStartDelay() {
            return +(this._settings && this._settings.startDelay || 0);
        },

        /**
         * return unique (for one request) transaction id
         * @returns {string|*}
         */
        getTransactionId() {
            if (typeof svt !== 'undefined' && svt.transactionId) {
                this._transactionId = svt.transactionId;
            }
            
            if (!this._transactionId) {
                let currentTime = new Date().getTime();
                currentTime = currentTime.toString(36);

                this._transactionId = currentTime + mbr.tools.getRandomHash(24);

            }
            return this._transactionId;
        },

        /**
         * get document referrer
         * @returns {string}
         */
        getReferrer() {
            return document.referrer;
        },

        canShowAdultOffer() {
            return this._adultOffer !== 'rejected';
        },

        needShowAdultOptIn() {
            return this._adultOffer !== 'accepted';
        },

        /**
         * we can put partner's settings to url by this way:
         * ..../ecomerce-context.js?param=param&settings=<JSON with settings>
         */
        applySettingsFromUrl() {
            let script = mbr.tools.getPriceContextElement(this.isYandexWebPartner());
            const params = ['affId',
                'clid',
                'applicationName',
                'offerEnabled',
                'affSub',
                'autoShowShopList',
                'selector',
                'productName',
                'modelId',
                'startScroll',
                'startDelay',
                'statsDisabled',
                'activeCity',
                'activeCountry',
                'otherRegions',
                'silent'
            ];

            if (script) {
                let settings;
                const settingsString = mbr.tools.getQueryParam(script.src, 'settings');
                if (settingsString) {
                    settings = JSON.parse(decodeURIComponent(settingsString));
                } else {
                    let param;
                    for (let i = 0; i < params.length; i++) {
                        param = mbr.tools.getQueryParam(script.src, params[i]);
                        if (typeof param !== 'undefined') {
                            param = param === 'true' ? true : param === 'false' ? false : param;

                            settings = settings || {};
                            settings[params[i]] = param;
                        }
                    }
                }

                script.parentNode && script.parentNode.removeChild(script);

                if (settings) {
                    return this.applySettings(settings);
                }
            }
        },

        _formatSettings(settings) {
            let modelId;

            if (settings.hasOwnProperty('modelId')) {
                modelId = Number(settings.modelId);

                if (!(modelId && modelId > 0)) { // check if natural number
                    delete settings.modelId;
                }
            }

            return settings;
        },

        applySettings(settings) {
            mbr.log('apply settings');
            mbr.log(settings);
            if (!this._settingsApplied) {
                while (typeof settings === 'string') {
                    settings = JSON.parse(settings);
                }
                this._settings = this._settings || {};
                let scriptOwnSettings = {};
                if (settings) {
                    settings = this._formatSettings(settings);
                    if (this.isYandexWebPartner()) { //if it's partner's website, apply all settings
                        delete this._settings.clid;
                        delete this._settings.affId;

                        for (let i in settings) {
                            if (settings.hasOwnProperty(i)) {
                                this._settings[i] = settings[i];
                            }
                        }
                    } else {
                        for (let i in settings) {
                            if (settings.hasOwnProperty(i)) {
                                if (typeof this._settings[i] === 'undefined') {
                                    if (i === 'clid') {
                                        //apply clid if only it has whether no tapki or the exact same partner's tapki
                                        if (!this._settings.affId || this._settings.affId == settings.affId) {
                                            this._settings[i] = settings[i];
                                        }
                                    } else {
                                        this._settings[i] = settings[i];
                                    }
                                }

                                scriptOwnSettings[i] = settings[i];
                            }
                        }
                    }
                }

                if (this._defaultSettings) {
                    for (let i in this._defaultSettings) {
                        if (this._defaultSettings.hasOwnProperty(i)) {
                            if (typeof this._settings[i] === 'undefined') {
                                if (this.isYandexWebPartner()) { //if it's partner's website, apply all settings
                                    this._settings[i] = this._defaultSettings[i];
                                } else if (i === 'clid') {
                                    //apply clid if only it has whether no tapki or the exact same partner's tapki
                                    if (!this._settings.affId || this._settings.affId == this._defaultSettings.affId) {
                                        this._settings[i] = this._defaultSettings[i];
                                    }
                                } else {
                                    this._settings[i] = this._defaultSettings[i];
                                }
                            }
                            if (typeof scriptOwnSettings[i] === 'undefined') {
                                scriptOwnSettings[i] = this._defaultSettings[i];
                            }
                        }
                    }
                }

                if (this._resolvePostMessage) {
                    this._resolvePostMessage();
                }

                this._settingsApplied = true;
            }

            return mbr.Promise.resolve();
        },

        /**
         * save time when script has been started
         * @param time
         */
        saveStartTime(time) {
            this._startTime = time;
        },

        /**
         * get time when script has been started
         * @returns {Number}
         */
        getStartTime() {
            return this._startTime;
        },

        /**
         * get time in ms between current time and DOMContentLoaded event (or script starting)
         * @returns {number}
         */
        getTimeAfterStart() {
            if (window.performance) {
                return new Date().getTime() - window.performance.timing.domContentLoadedEventStart;
            } else {
                return new Date().getTime() - this.getStartTime();
            }
        },

        delayAfterStart(delay) {
            var getTimeAfterStart = this.getTimeAfterStart.bind(this);
            return new mbr.Promise((resolve) => {
                function checkTime() {
                    if (getTimeAfterStart() > delay * 1000) {
                        clearInterval(intervalId);
                        resolve();
                    }
                }

                var intervalId = setInterval(checkTime, 2000);
            });
        },

        setSetting(name, value) {
            var provider = (mbr.xhr && mbr.xhr.isCORSSupported() || !mbr.JSONP) ? mbr.xhr : mbr.JSONP;

            var settings = {};
            settings[name] = value;
            settings.transactionId = this.getTransactionId();

            var params = {
                settings: JSON.stringify(settings)
            };

            return new mbr.Promise((resolve, reject) => {
                provider.post(mbr.config.getApiHost() + '/settings', params, function(res) {
                    mbr.log(res);
                    if (res) {
                        resolve();
                        return;
                    }
                    reject();
                });
            });
        },

        getSettings() {
            return this._settings;
        },

        shouldUseIframeStorage() {
            return !this._settings || !this._settings.extensionStorage;
        },

        isCustomSettingsPageExists() {
            return this._settings && this._settings.customSettingsPage;
        },

        isOptOutEnabled() {
            if (this._settings) {
                return !this._settings.optIn;
            }
            return true;
        },

        /**
         * get rights from storage
         */
        init(domain) {
            if (this._loadPromise) {
                return this._loadPromise;
            }

            this._loadPromise = mbr.storage.canUseDomainData()
                .then((canUseDomainData) => {
                    let paramsToLoad = {};
                    if (canUseDomainData) {
                        paramsToLoad.domainData = mbr.storage.getDomainData(domain);
                        if (!this._settings.extensionStorage && mbr.storage.needSetYSCookie()) {
                            paramsToLoad.versionSent = mbr.storage.get('versionSent', true);
                        } else {
                            paramsToLoad.versionSent = mbr.Promise.resolve(true);
                        }

                        if (document.referrer) {
                            var referrerDomain = document.referrer
                                .replace(/^https?\:\/\//, '')
                                .replace(/\/.*$/, '');
                            if (referrerDomain) {
                                paramsToLoad.referrerData = mbr.storage.getDomainData(referrerDomain);
                            }
                        }
                    } else {
                        paramsToLoad.selector = mbr.storage.getSelector(domain);
                        paramsToLoad.blacklist = mbr.storage.get('blacklist');
                    }

                    let paramsToLoadNames = [];
                    let promises = [];
                    for (var i in paramsToLoad) {
                        if (paramsToLoad.hasOwnProperty(i)) {
                            paramsToLoadNames.push(i);
                            promises.push(paramsToLoad[i]);
                        }
                    }

                    return mbr.Promise.all(promises)
                        .then((data) => {
                            var params = {};
                            for (var i = 0; i < data.length; i++) {
                                params[paramsToLoadNames[i]] = data[i];
                            }
                            return params;
                        });
                }).then((data) => this._onSettingsLoaded(data));

            return this._loadPromise;
        },

        waitToStartScript() {
            const scrollPosition = this.getScrollPosition();
            const startDelay = this.getStartDelay();

            return new mbr.Promise((resolve) => {
                function onScroll() {
                    if (mbr.tools.getOffsetTop() / mbr.tools.getPageHeight() * 100 > scrollPosition) {
                        mbr.log('try run after scroll');
                        if (window.removeEventListener) {
                            window.removeEventListener('scroll', onScroll);
                        } else if (window.detachEvent) {
                            window.detachEvent('onscroll', onScroll);
                        }
                        resolve();
                    }
                }

                if (scrollPosition) {
                    mbr.log('wait when scroll is ' + scrollPosition + '%');
                    if (window.addEventListener) {
                        window.addEventListener('scroll', onScroll, false);
                    } else if (window.attachEvent) {
                        window.attachEvent('onscroll', onScroll);
                    }
                }
                if (startDelay) {
                    mbr.log('wait ' + startDelay + ' seconds');
                    mbr.settings.delayAfterStart(startDelay)
                        .then(function() {
                            mbr.log('run after delay');
                            resolve();
                        });
                }

                if (!scrollPosition && !startDelay) {
                    mbr.log('run script without delay');
                    resolve();
                }
            });
        },

        /**
         * return unique script hash (clid + version)
         * @returns {*}
         * @private
         */
        _getScriptHash() {
            return (this.getClid() || this.getAffId()) + this.getAppVersion();
        },

        /**
         * each script writes uniqueId (clid + version) to document's attribute 'g_init'
         * get all hashes
         * @private
         */
        _getStartedScriptsHashes() {
            let startedScripts = [];
            const started = document.documentElement.getAttribute('g_init');

            if (started) {
                startedScripts = started.split(',');
            }

            return startedScripts;
        },

        /**
         * each script writes uniqueId (clid + version) to document's attribute 'g_init'
         * return true if the attribute had been set before
         */
        isScriptStarted() {
            var currentScriptHash = this._getScriptHash();
            var isStarted = this._getStartedScriptsHashes().filter((hash) => hash === currentScriptHash).length === 1;

            return isStarted;
        },

        /**
         * clear information about current script has been started
         */
        removeScriptStartedInfo() {
            const currentScriptHash = this._getScriptHash();
            const otherScriptsStartedHashes = this._getStartedScriptsHashes()
                .filter((hash) => hash !== currentScriptHash);

            if (otherScriptsStartedHashes.length) {
                document.documentElement.setAttribute('g_init', otherScriptsStartedHashes.join(','));
            } else {
                document.documentElement.removeAttribute('g_init');
            }
        },

        setScriptStarted() {
            const currentScriptHash = this._getScriptHash();
            let scriptStartedHashes = this._getStartedScriptsHashes();

            scriptStartedHashes.push(currentScriptHash);

            document.documentElement.setAttribute('g_init', scriptStartedHashes.join(','));
        },

        needUseRandomContainer() {
            return this._siteInfo && this._siteInfo.needUseRandomContainer();
        },

        /**
         * return true if page has antisovetnik
         * @returns {boolean}
         */
        isAnti() {
            return !!document.querySelector('[checkSovetnik="1"]');
        },

        needSendVersion() {
            return !this._versionSent && this.isSuggestScriptEnabled();
        },

        sendVersionToServer() {
            if (!this.needSendVersion() || !mbr.xhr.isCORSSupported()) {
                mbr.log('i dont need send version');
            } else {
                mbr.log('sending version');
                mbr.xhr.post(mbr.config.getApiHost() + '/sovetnik', {
                    version: this.getAppVersion(),
                    url: document.URL
                }, () => {
                    mbr.log('version has been sent');
                    mbr.storage.set('versionSent', true, true);
                });
            }
        },

        isMobileVersionEnabled() {
            return this._defaultSettings.mobileEnabled;
        },

        isMobile() {
            return this._isMobile;
        },
        
        getNotificationStatus() {
            return this._settings && this._settings.notificationStatus;
        },
        
        isButtonExtension() {
            return this._settings && this._settings.withButton;
        }
    };
})();
'use strict';

mbr.iframeStorage = mbr.iframeStorage || {
    listeners: {},
    messages: [],
    iframe: {},
    ready: false,
    iframepath: '/static/storage/index.html',
    version: 1,

    generateCookie: function() {
        return Math.round(Math.random() * 9000000);
    },

    sendMessage: function(message) {
        this.iframe.postMessage(message, this.host);
        this.iframe.postMessage(JSON.stringify(message), this.host);
    },

    processMessages: function() {
        while (this.messages.length) {
            var message = this.messages.pop();
            this.sendMessage(message);
        }
    },

    /**
     * create cookie from message and bind it to the callback
     * @param message
     * @param callback
     * @returns {Object} message
     */
    prepareMessage: function(message, callback) {
        var messageCookie = this.generateCookie();
        message.cookie = messageCookie;
        this.listeners[messageCookie] = callback;

        return message;
    },

    /**
     * prepare message and put it to queue
     * @param {Object} message
     * @return {Promise}
     */
    pullMessage: function(message) {
        var promise = new mbr.Promise(function(resolve) {
            message = this.prepareMessage(message, resolve);
        }.bind(this));

        this.messages.push(message);
        if (this.ready) {
            this.processMessages();
        }
        return promise;
    },

    /**
     * get storage version
     * @returns {Promise}
     */
    getVersion: function() {
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'get',
            'key': 'version'
        };

        var promise = new mbr.Promise(function(resolve) {
            message = this.prepareMessage(message, resolve);
        }.bind(this));

        this.sendMessage(message);

        return promise;
    },

    /**
     * get key value from metabar localStorage
     * @param {String} key
     * @param {Boolean} [session]
     * @return {Promise}
     */
    get: function(key, session) {
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'get',
            'key': key,
            'session': session
        };
        return this.pullMessage(message);
    },
    /**
     * set key value to metabar localStorage
     * @param {String} key
     * @param {*} value
     * @param {Boolean} session
     * @return {Promise}
     */
    set: function(key, value, session) {
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'set',
            'key': key,
            'value': value,
            'session': session
        };
        return this.pullMessage(message);
    },

    /**
     * send request for settings
     * @return {Promise}
     */
    loadSettings: function() {
        return this.init(mbr.config.getStorageHost()).then(function() {
            if (this.version > 1) {
                return this._loadSettingsV2();
            } else {
                return this._loadSettingsV1();
            }
        }.bind(this));
    },

    /**
     * send request for settings
     * @returns {Promise}
     * @private
     */
    _loadSettingsV1: function() {
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'loadSettings'
        };
        return this.pullMessage(message);
    },

    /**
     * we have split settings to two parts - partner's settings and user's settings.
     * here we have to send 2 messages for getting partner's settings and user's settings and aggregate them
     * @private
     */
    _loadSettingsV2: function() {
        return mbr.Promise.all([
            this._loadPartnerSettings(),
            this._loadUserSettings()
        ]).then(function(settings) {
            var partnerSettings = settings[0];
            var userSettings = settings[1];

            for (var i in partnerSettings) {
                if (partnerSettings.hasOwnProperty(i) && !userSettings.hasOwnProperty(i)) {
                    userSettings[i] = partnerSettings[i];
                }
            }

            return userSettings;
        });
    },

    _loadPartnerSettings: function() {
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'loadPartnerSettings'
        };
        return this.pullMessage(message);
    },

    _loadUserSettings: function() {
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'loadUserSettings'
        };
        return this.pullMessage(message);
    },

    /**
     * save settings to iframeStorage
     * @param {Object} settings
     */
    saveSettings: function(settings) {
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'saveSettings',
            'value': settings
        };
        this.pullMessage(message);
    },

    /**
     * send request for selector
     * @param {String} domain
     * @return {Promise}
     */
    getSelector: function(domain) {
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'getSelector',
            'domain': domain
        };
        return this.pullMessage(message);
    },

    getDomainData: function(domain) {
        var domains = [];
        while (domain.indexOf('.') !== -1) {
            domains.push(mbr.crypto.MD5(domain).toString());
            domain = domain.replace(/^[^\.]+\./, '');
        }
        if (domains.toJSON) {
            //fucking prototype.js!
            domains.toJSON = function() { {
                return this.map((el) => el.toString());
            }};
        }
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'getDomainInfo',
            'domains': JSON.stringify(domains)
        };

        return this.pullMessage(message);
    },

    canUseDomainData: function() {
        return this.init(mbr.config.getStorageHost()).then(function() {
            return this.version > 2;
        }.bind(this));
    },

    /**
     * send request for cookies
     * @return {Promise}
     */
    getCookies: function() {
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'getCookies'
        };
        return this.pullMessage(message);
    },

    /**
     * send request for localStorage
     * @return {Promise}
     */
    getLocalStorage: function() {
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'getLocalStorage'
        };
        return this.pullMessage(message);
    },

    /**
     * test iframe's availability
     * @returns {Promise}
     */
    test: function() {
        var message = {
            'type': 'MBR_STORAGE',
            'command': 'testStorage'
        };
        return this.pullMessage(message);
    },

    listener: function(event) {
        var data;
        if (event && event.data) {
            if (typeof event.data === 'string') {
                try {
                    data = JSON.parse(event.data);
                } catch(ex) {
                    return;
                }
            } else {
                data = event.data;
            }

            if (data.cookie && data.type === 'MBR_STORAGE') {
                var callback = this.listeners[data.cookie];
                if (callback) {
                    try {
                        callback(data.value);
                    }
                    catch (e) {
                    }
                    delete this.listeners[data.cookie];
                }
            }

            if (data && data.type === 'MBR_SETTINGS' && data.value) {
                mbr.log('save settings');
                if (mbr.settings.isUniversalScript()) {
                    mbr.settings.applySettings(data.value);
                }
            }
        }

    },

    /**
     * remove iframe from DOM
     */
    clear: function() {
        if (!mbr.settings.isOurSite(mbr.tools.getHostname(document)) &&
            !mbr.settings.isYandexWebPartner() &&
            !mbr.settings.needSendVersion()) {

            this._container && this._container.parentNode && this._container.parentNode.removeChild(this._container);
            this.readyPromise = false;
        }
    },

    init: function(host) {
        if (!this.readyPromise) {
            var storage = this;
            this.readyPromise = new mbr.Promise(function(resolve) {
                storage.host = host;
                var frame = document.createElement("iframe");

                frame.style.display = "none";
                frame.onload = function () {
                    storage.iframe = this.contentWindow;

                    storage.getVersion().then(function(version) {
                        if (version) {
                            storage.version = version;
                        }
                        storage.ready = true;

                        if (storage.messages.length) {
                            storage.processMessages();
                        }
                        resolve();
                    });
                };
                frame.src = storage.host + storage.iframepath + '?version=' + mbr.settings.getAppVersion();
                storage._container = frame;
                document.body.appendChild(frame);
                if (window.addEventListener) {
                    window.addEventListener("message", function () {
                        storage.listener.apply(storage, arguments);
                    }, true);

                } else {
                    window.attachEvent("onmessage", function () {
                        storage.listener.apply(storage, arguments);
                    });
                }
            });
        }


        this.test().then(function(value) {
            if (!value) {
                this.clear();
                mbr.tools.clearPriceContextNodes();
            }
        }.bind(this));

        return this.readyPromise;

    }
};
'use strict';

mbr.storage = mbr.storage || {
    init: function(domain) {
        if (mbr.settings.shouldUseIframeStorage()) {
            return mbr.iframeStorage.init(domain);
        }
        if (mbr.extensionStorage && mbr.extensionStorage.init) {
            return mbr.extensionStorage.init();
        }

        return mbr.Promise.resolve();
    },

    /**
     *
     * @param key
     * @returns {Promise}
     */
    get: function(key, session) {
        if (mbr.extensionStorage) {
            return mbr.extensionStorage.get(key);
        }
        if (mbr.settings.shouldUseIframeStorage()) {
            return mbr.iframeStorage.get(key, session);
        }
        return mbr.Promise.resolve();
    },

    /**
     *
     * @param domain
     * @returns {Promise}
     */
    getSelector: function(domain) {
        if (mbr.extensionStorage) {
            return mbr.extensionStorage.getSelector(domain);
        }
        if (mbr.settings.shouldUseIframeStorage()) {
            return mbr.iframeStorage.getSelector('key');
        }
        return mbr.Promise.resolve();
    },

    /**
     * @returns {Promise}
     */
    loadSettings: function() {
        if (mbr.extensionStorage) {
            return mbr.extensionStorage.loadSettings();
        }
        if (!mbr.settings.shouldUseIframeStorage()) {
            return mbr.environment.getSovetnikInfo();
        }
        return mbr.Promise.resolve({});
    },

    /**
     * return true if we have one file with information about domains
     * @returns {Promise}
     */
    canUseDomainData: function() {
        if (mbr.extensionStorage) {
            return mbr.Promise.resolve(!!mbr.extensionStorage.getDomainData);
        }
        return mbr.Promise.resolve(true);
    },

    getDomainData: function(domain) {
        if (mbr.extensionStorage && mbr.extensionStorage.getDomainData) {
            return mbr.extensionStorage.getDomainData();
        }

        if (mbr.settings.shouldUseIframeStorage()) {
            return mbr.iframeStorage.getDomainData(domain);
        }

        return mbr.environment.getDomainInfo(domain);
    },

    /**
     *
     * @param key
     * @param value
     * @param session
     * @returns {Promise}
     */
    set: function(key, value, session) {
        var storage = mbr.extensionStorage || mbr.iframeStorage;
        return storage.set(key, value, session);
    },

    needSetYSCookie: function() {
        if (mbr.extensionStorage) {
            return !!mbr.extensionStorage.get;
        } else {
            return true;
        }
    }
};
'use strict';

/**
 * object for communication between the script and the page environment through window.postMessage
 */
mbr.environment = {
    _listeners: {},

    _generateCookie() {
        return Math.round(Math.random() * 9000000);
    },

    _sendMessageToExtension(command, data) {
        return new mbr.Promise((resolve) => {
            const listenerId = this._generateCookie();
            this._listeners[listenerId] = resolve;

            window.postMessage(JSON.stringify({
                type: 'MBR_ENVIRONMENT',
                command: command,
                clid: mbr.settings.getClid(),
                affId: mbr.settings.getAffId(),
                listenerId,
                data
            }), mbr.tools.getLocationOrigin());
        });
    },

    _listenExtensionMessages(event) {
        if (event && event.data) {
            let data = event.data;
            const clid = mbr.settings.getClid();
            const affId = mbr.settings.getAffId();

            if (typeof data === 'string') {
                try {
                    data = JSON.parse(data);
                } catch(ex) {
                    return;
                }
            }

            if (this.isSettingsPage) {
                const {type, domain} = data;
                if (type && domain) {
                    if (type === 'removeDomain') {
                        this._onDomainEnabled(domain);
                    } else if (type === 'addDomain') {
                        this._onDomainDisabled(domain);
                    }
                }
            }

            if (typeof data.response === 'undefined') {
                return;
            }

            if (clid) {
                if (clid != data.clid) {
                    return;
                }
            } else if (affId && affId != data.affId) {
                return;
            }

            //message from our extension
            if (data.listenerId && this._listeners[data.listenerId]) {
                this._listeners[data.listenerId](data.response);
            }
        }
    },

    _onSecondScript() {
        this._sendMessageToExtension('serverMessage', {type: 'secondScript'});
    },

    _onOfferRejected() {
        this._sendMessageToExtension('serverMessage', {type: 'offerRejected'});
    },

    _onDomainDisabled(domain=document.domain) {
        this._sendMessageToExtension('serverMessage', {type: 'domainDisabled', domain});
    },

    _onDomainEnabled(domain) {
        this._sendMessageToExtension('serverMessage', {type: 'domainEnabled', domain});
    },

    _showSettingsPage() {
        this._sendMessageToExtension('showSettingsPage');
    },

    getDomainInfo(domain) {
        return this._sendMessageToExtension('getDomainData', {domain});
    },

    getSovetnikInfo() {
        return this._sendMessageToExtension('getSovetnikInfo');
    },

    _showNotification(notificationInfo) {
        return this._sendMessageToExtension('showNotification', notificationInfo);
    },

    init() {
        const origin = mbr.tools.getLocationOrigin();
        this.isSettingsPage = mbr.config.getSettingsHost() === origin;

        mbr.hub.on('script:secondScript', (event) => this._onSecondScript(event));
        mbr.hub.on('script:offerRejected', (event) => this._onOfferRejected(event));
        mbr.hub.on('script:domainDisabled', (event) => this._onDomainDisabled(event));
        mbr.hub.on('pricebar:settingsPage', (event) => this._showSettingsPage(event));
        mbr.hub.on('pricebar:notification', (notificationInfo) => this._showNotification(notificationInfo));

        if (window.addEventListener) {
            window.addEventListener('message', (event) => this._listenExtensionMessages(event));
        } else {
            window.attachEvent('onmessage', (event) => this._listenExtensionMessages(event));
        }

        window.postMessage({
            type: 'MBR_ENVIRONMENT'
        }, origin);
    }
};

'use strict';

mbr.stats = {
    /**
     * get provider which can send post requests
     * @returns {Object}
     * @private
     */
    _getProvider() {
        let provider = (mbr.xhr && mbr.xhr.isCORSSupported() || !mbr.JSONP) ? mbr.xhr : mbr.JSONP;
        if (provider && provider.post) {
            return provider;
        }
    },

    /**
     * send interaction to server
     * @param {String} interactionName
     * @param {String} [typeView='desktop']
     * @param {String} [interactionDetails]
     * @private
     */
    _sendInteraction(interactionName, typeView='desktop', interactionDetails) {
        let provider = this._getProvider();
        if (!provider) {
            mbr.log('provider is not available');
            return;
        }

        let clientEvent = {
            transaction_id: mbr.settings.getTransactionId(),
            interaction: interactionName,
            interaction_details: interactionDetails,
            type_view: typeView
        };
    
        provider.post(mbr.config.getClientEventUrl(), clientEvent);
    },
    
    /**
     * Rendered mobile version with wrong scale
     * @param {String} typeView Mobile view type - 'tablet' or 'phone'
     * @param {String} reason The reason why we failed scaling - user interaction or initial scale of the page
     */
    trackMobileScaleFail(typeView, reason) { 
        this._sendInteraction('mobile-scale-fail', typeView, reason);
    },
    
    trackUnsupportedMobileBrowser(reason) { 
        this._sendInteraction('unsupported-mobile-browser', 'mobile', reason);
    },
    
    /**
     * Pricebar has been closed
     */
    trackPriceBarClose() {
        this._sendInteraction('pricebar_close');
    },

    /**
     * track unacceptable action such as removing pricebar from page
     * @param {String} wrongParam
     */
    trackUnacceptableAction(wrongParam) {
        this._sentWrongParams = this._sentWrongParams || [];

        if (this._sentWrongParams.indexOf(wrongParam) === -1) {
            this._sentWrongParams.push(wrongParam);

            this._sendInteraction('error', 'desktop', wrongParam);
        }
    },

    /**
     * send info when we haven't properly detected current product
     */
    trackWrongProduct() {
        this._sendInteraction('wrong_product');
    },
    
    trackYandexBrowserOptOutSettings(type) {
        this._sendInteraction('opt-out-settings', 'desktop', type);
    },

    /**
     * send info about mobile action e.g. show or expand popup
     * @param {String} action
     * @param {String} type type of view e.g. 'phone' or 'tablet'
     * @param {String} [details]
     */
    trackMobileAction(action, type, details) {
        this._sendInteraction(action, type, details);
    },
    
     /**
     * отправить инфо о том что пользователь перешал в "Помощь" при показе 
     * мобильного оптаута в Я.БРО
     */
    trackOptOutHelp(){
        this._sendInteraction('mobile-optout-help');
    },

    init() {
        mbr.hub.on('script:unacceptableAction', (wrongParam) => this.trackUnacceptableAction(wrongParam));
        mbr.hub.once('script:mobileScaleFail', (typeView, reason) => this.trackMobileScaleFail(typeView, reason));
        mbr.hub.on('script:unsupportedMobileBrowser', (reason) => this.trackUnsupportedMobileBrowser(reason));
        mbr.hub.on('script:wrongProduct', () => this.trackWrongProduct());
        mbr.hub.on('pricebar:closeByButton', (type) => this.trackPriceBarClose(type));

        mbr.hub.on('mobile:opt-out-help', () => this.trackOptOutHelp());
        mbr.hub.on('mobile:shown', (typeView) => this.trackMobileAction('mobile-shown', typeView));
        mbr.hub.on('mobile:closed', (typeView, reason) => this.trackMobileAction('mobile-closed', typeView, reason));
        mbr.hub.on('mobile:popup-shown', (typeView, reason) => {
            this.trackMobileAction('mobile-popup-shown', typeView, reason);
        });
        mbr.hub.on('mobile:popup-hidden', (typeView, reason) => {
            this.trackMobileAction('mobile-popup-hidden', typeView, reason);
        });
        mbr.hub.on('mobile:settings-open', (typeView) => this.trackMobileAction('mobile-settings-open', typeView));
        mbr.hub.on('stat:yandex-browser-opt-out-settings', (type) => this.trackYandexBrowserOptOutSettings(type));

    }
};

(() => {
    mbr.requestComposer = {
        /**
         * add common properties to request's params
         * @param {Object} params
         * @private
         */
        _addScriptDataToParams(params) {
            let result = {};

            const settings = mbr.settings.getSettings && mbr.settings.getSettings();
            const version = mbr.settings.getAppVersion && mbr.settings.getAppVersion();
            const transactionId = mbr.settings.getTransactionId && mbr.settings.getTransactionId();
            const isShop = mbr.settings.isShop && mbr.settings.isShop();
            const isYandexWebPartner = mbr.settings.isYandexWebPartner && mbr.settings.isYandexWebPartner();
            const referrer = mbr.settings.getReferrer && mbr.settings.getReferrer();
            const adult = mbr.settings.canShowAdultOffer && mbr.settings.canShowAdultOffer();
            const antiSovetnik = mbr.settings.isAnti && mbr.settings.isAnti();
            const screenSize = mbr.tools.getScreenResolution && mbr.tools.getScreenResolution();
            const viewport = mbr.tools.getViewport && mbr.tools.getViewport();
            const isPlugHunter = mbr.tools.isPlugHunterExist && mbr.tools.isPlugHunterExist();
            const isMobile = mbr.settings.isMobile && mbr.settings.isMobile();
            const isTablet =mbr.tools.isTabletYandexBrowser && mbr.tools.isTabletYandexBrowser();
            const notificationStatus = mbr.settings.getNotificationStatus && mbr.settings.getNotificationStatus();

            if (version) {
                result.v = version;
            }

            if (transactionId) {
                result.transaction_id = transactionId;
            }

            if (isShop) {
                result.is_shop = true;
            }

            if (settings) {
                result.settings = JSON.stringify(settings);
            }

            if (isYandexWebPartner) {
                result.webpartner = isYandexWebPartner;
            }

            if (referrer) {
                result.referrer = referrer;
            }

            if (adult) {
                result.adult = adult;
            }

            if (antiSovetnik) {
                result.as = antiSovetnik;
            }

            if (isPlugHunter) {
                result.ph = isPlugHunter;
            }

            if (screenSize) {
                result.screen = screenSize;
            }

            if (viewport) {
                result.viewport = viewport;
            }

            if (isMobile) {
                result.is_mobile = true;
            }
            if (isTablet) {
                result.is_tablet = true;
            }

            if (isTablet) {
                result.is_tablet = true;
            }
            
            if (notificationStatus) {
                result.notifications = notificationStatus;
            }

            result.url = document.URL;

            for (let i in params) {
                if (params.hasOwnProperty(i)) {
                    result[i] = params[i];
                }
            }
            return result;
        },

        /**
         * get object with request's params
         * @param {Object} data
         * @returns {Object}
         */
        composeProductRequest(data) {
            return this._addScriptDataToParams(data);
        }
    };
})();
(() => {
    /**
     * Object for interacting with backend server
     */
    mbr.requestSender = {
        _host: mbr.config.getApiHost(),

        /**
         * give the best approach for getting data from the server
         * Provider is the xhr if CORS is allowed for current environment.
         * Otherwise we need use JSONP
         * @returns {Object}
         * @private
         */
        _getNetProvider() {
            return (mbr.xhr && mbr.xhr.isCORSSupported() || !mbr.JSONP) ? mbr.xhr : mbr.JSONP;
        },

        /**
         * get url with params for request
         * @param {String} url
         * @param {Object} params
         * @returns {string}
         * @private
         */
        _getURL(url, params = {}) {
            let qs = Object.keys(params).map((key) => {
                return encodeURIComponent(key) + '=' + encodeURIComponent(params[key]);
            }).join('&');

            return `${url}?${qs}`;
        },

        /**
         * Send request to /product API and trigger an event when response was received
         * @param {String} requestId
         * @param {Object} requestData params to be sent with GET requests
         *
         * @emits 'server-response:<requestId>' server respond to request with 'response'
         * @private
         */
        _sendProductRequest(requestId, requestData) {
            const requestUrl = this._getURL(`${this._host}/products`, requestData);
            const provider = this._getNetProvider();

            provider.get(requestUrl, null, (response) => mbr.hub.trigger(`server-response:${requestId}`, response));
        },

        /**
         * Initialize event liseners
         *
         * @listens 'server-request:<requestId>' command to send a request to /products API
         */
        init() {
            if (!this._initialized) {
                this._initialized = true;

                mbr.hub.on('server-request', (requestData, event) => {
                    if (event && event.namespace) {
                        const requestId = event.namespace.split(':')[1];

                        this._sendProductRequest(requestId, requestData);
                    }
                });
            }
        }
    };
})();
(() => {
    mbr.server = {
        /**
         * mark offers from response as 'with-higher-price' or 'with-lower-price'
         * @param {Object} response
         * @returns {Object} response
         * @private
         */
        _parseProductResponse(response) {
            if (response.offers && response.offers.length && response.offers[0].price) {
                var convertedPrice = 0;
                if (response.searchInfo && response.searchInfo.convertedPrice) {
                    convertedPrice = response.searchInfo.convertedPrice.value;
                }

                response.offers = response.offers.map((offer) => {
                    offer.price.value = Math.round(
                        parseFloat(offer.price.value)
                    );

                    if (convertedPrice) {
                        offer.price.isPriceExtracted = true;
                        offer.price.isHigherThanCurrent = offer.price.value >= convertedPrice;
                        offer.price.isLowerThanCurrent = offer.price.value < convertedPrice;
                    }

                    return offer;
                });
            }

            return response;
        },

        /**
         * trigger events depending on rules
         * @param {Array<String>} rules
         *
         * @fires 'script:secondScript'
         * @fires 'script:offer(isOfferAccepted)'
         * @fires 'script:domainDisabled(domain)'
         * @private
         */
        _onRejectedWithRules(rules = []) {
            if (!mbr.settings.isButtonExtension()) {
                rules.forEach((rule) => {
                    if (rule === 'second-script') {
                        mbr.hub.trigger('script:secondScript');
                    } else if (rule === 'offer-rejected') {
                        mbr.hub.trigger('script:offer', false);
                    } else if (rule === 'domain-disabled') {
                        mbr.hub.trigger('script:domainDisabled', document.domain);
                    }
                });
            }
        },

        /**
         * Ask requestSender to send request to /products (via mbr.hub) and parse the response
         *
         * @fires 'server-request:<requestId>(GET-params)' event to start request to /products with GET-params
         *
         * @listens 'server-response:<requestId>(response)' triggers when server respond to our request
         *
         * @param {Object} data params extracted from page
         */
        getProductOffers(data) {
            mbr.perf.start('request');
            mbr.log('get offers');

            data = mbr.requestComposer.composeProductRequest(data);
            const requestId = Math.round(Math.random() * 9000000);

            if (!data.manual) {
                mbr.hub.once(`server-response:${requestId}`, (response) => {
                    mbr.perf.end('request');
                    mbr.perf.start('after-request-stage');

                    if (response.error) {
                        mbr.hub.trigger('script:not-found');
                    }

                    let {rules, offers, similarModels} = response;

                    if (rules && rules.length) {
                        this._onRejectedWithRules(response.rules);
                    } else if (offers && offers.length && offers[0].price) {
                        response = this._parseProductResponse(response);

                        mbr.log('offers found');
                        mbr.log(response);
                        mbr.hub.trigger('suggest:productOfferFound', response);
                    } else if (similarModels && similarModels.length) {
                        mbr.log('similar models found');
                        mbr.log(response);
                        mbr.hub.trigger('suggest:similarModelsFound', response);
                    } else {
                        mbr.log('have not offers');
                        mbr.log('have not similar models');
                    }
                });
            }

            mbr.hub.trigger(`server-request:${requestId}`, data);
        }
    };
})();
/**
 * Sometimes we can't extract product's information with either querySelector or querySelectorAll
 * Therefore we can create custom extractors for specific cases.
 * An extractor should contain at least one of methods: 'getName', 'getPrice', 'getCurrency'
 */
mbr.customSelectors = {
    "aliexpress.com": {
        /**
         * return first string without russian letters.
         * @param {Array} names
         * @returns {String}
         * @private
         */
        _tryGetEnglishName: function(names) {
            names = names || [];
            names = names.filter(function(name) {
                return name !== 'oem' && name !== 'new' && name.indexOf('Другой') === -1;
            });

            if (!names.length) {
                return '';
            }


            var ruRE = /[а-яА-Я]/;
            var englishNames = names.filter(function(name) {
                return !ruRE.test(name);
            });
            if (englishNames.length) {
                return englishNames[0];
            }
            if (names[0].indexOf('Яблоко') > -1 || names[0].indexOf('яблоко') > -1) {
                return 'Apple';
            }
            return names[0];
        },

        _getNameByCategoryRegex: function(info, regex) {
            return this._tryGetEnglishName(info.filter(function(item) {
                return regex.test(item.innerHTML);
            }).map(function(item) {
                return mbr.tools.getTextContents(item.querySelector('dd')).toLowerCase();
            }));
        },

        getName: function() {
            var name = '';

            var brandRE = /^(Фирменное\sнаименование)|(Производитель)|(>Brand)/;
            var modelRE = /(Model)|(моделирует)|(Модел)/;
            var memoryRE = /(ПЗУ)|(ROM)/;

            var info = [].slice.call(document.querySelectorAll('#product-desc .product-params .ui-box-body .ui-attr-list'));
            if (info && info.length) {
                var brand = this._getNameByCategoryRegex(info, brandRE);
                var model = this._getNameByCategoryRegex(info, modelRE);
                var memory = this._getNameByCategoryRegex(info, memoryRE);

                if (brand && model && !model.match(/другой/i)) {
                    if (model.indexOf(brand) === -1) {
                        name = brand + ' ';
                    }

                    name += model;
                    if (memory) {
                        if (/\dg$/.test(memory)) {
                            memory += 'b'; //replace 16G to 16GB
                        }
                        name += ' ' + memory;
                    }

                }
            }

            return name;
        }
    },

    "videoigr.net": {
        getName: function() {
            var productName;
            var br = document.querySelector('tbody>tr>.pageHeading:nth-of-type(1) br');
            var heading = document.querySelector('tbody>tr>.pageHeading:nth-of-type(1)');

            productName = br && br.previousSibling.textContent;

            if (!productName) {
                productName = heading ? mbr.tools.getTextContents(heading) : ''
            }

            return productName;
        }
    }
};
mbr.selectorsParser = {
    _attributesHaveManyValues: {
        category: {
            type: 'string',
            separator: '/'
        },
        pictures: {
            type: 'array'
        }
    },

    _extractValueBySelector(selector) {
        let selectors = selector.split(',');

        while (selectors.length) {
            let domElement = document.querySelector(selectors.shift());
            if (domElement) {
                let attribute = mbr.tools.getTextContents(domElement) || domElement.getAttribute('value');
                if (attribute) {
                    return attribute;
                }
            }
        }
    },

    _extractManyValuesBySelector: function(selector) {
        let selectors = selector.split(',');

        return mbr.tools.reduce(selectors,
            (values, selector) => {
                let elements = document.querySelectorAll(selector);
                if (elements && elements.length) {
                    elements = Array.prototype.slice.call(elements);
                    values = values.concat(elements);
                }

                return values;
            }, [])
            .map((el) => mbr.tools.getTextContents(el) || el.getAttribute('value'))
            .filter((val) => val);
    },

    _extractAttributes: function(selectorObject) {
        const selectorFunctionRE = /^get(.+)$/;

        if (selectorObject && selectorObject.price && !selectorObject.currency) {
            selectorObject.currency = selectorObject.price;
        }

        let selectors = Object.keys(selectorObject);

        let result = mbr.tools.reduce(selectors, (attributes, selectorName) => {
            if (typeof selectorObject[selectorName] === 'function' && selectorFunctionRE.test(selectorName)) {
                const attributeName = RegExp.$1.toLowerCase();

                const attribute = selectorObject[selectorName]();
                if (attribute) {
                    attributes[attributeName] = attribute;
                }
            } else if (typeof selectorObject[selectorName] === 'string') {
                const attributeName = selectorName;
                let selectors = selectorObject[selectorName].split(',');

                if (this._attributesHaveManyValues[selectorName]) {
                    const attributeValues = this._extractManyValuesBySelector(selectorObject[selectorName]);

                    if (attributeValues.length) {
                        if (this._attributesHaveManyValues[selectorName].type === 'array') {
                            attributes[selectorName] = attributeValues;
                        } else if (this._attributesHaveManyValues[selectorName].type === 'string') {
                            attributes[selectorName] = attributeValues.join(
                                this._attributesHaveManyValues[selectorName].separator
                            );
                        }
                    }
                } else {
                    let attribute = this._extractValueBySelector(selectorObject[selectorName]);

                    if (attributeName === 'isbn' && attribute) {
                        attribute = mbr.tools.getISBN(attribute);
                    } else if (attributeName === 'price' && attribute) {
                        attribute = +mbr.tools.priceAnalyze(attribute);
                    } else if (attributeName === 'currency' && attribute) {
                        attribute = mbr.tools.getCurrencyFromStr(attribute);
                    }

                    if (attribute) {
                        attributes[attributeName] = attribute;
                    }
                }
            } else if (selectorName === 'specifics' && typeof selectorObject[selectorName] === 'object') {
                let specifics = this._extractSpecifics(
                    selectorObject[selectorName].keys,
                    selectorObject[selectorName].values
                );
                if (specifics) {
                    attributes.specifics = JSON.stringify(specifics);
                }
            }
            return attributes;
        }, {});

        if (typeof result !== 'object' || Object.keys(result).length === 0) {
            result = null;
        }

        return result;
    },

    _extractSpecifics(keySelector, valueSelector) {
        const MAX_SPECIFICS_LENGTH = 1000;

        if (keySelector && valueSelector) {
            let keys = document.querySelectorAll(keySelector);
            let values = document.querySelectorAll(valueSelector);

            if (keys && values && keys.length === values.length) {
                let specifics = [];
                let length = 0;

                for (let i=0; i<keys.length; i++) {
                    let key = mbr.tools.getTextContents(keys[i]);
                    let value = mbr.tools.getTextContents(values[i]);

                    if (key && value) {
                        let currentItemLength = key.length + value.length;
                        if (currentItemLength < 120 && length + currentItemLength < MAX_SPECIFICS_LENGTH) {
                            length += currentItemLength;
                            specifics.push(`${key}: ${value}`);
                        }
                    }
                }

                if (specifics.length > 0) {
                    return specifics;
                }
            }
        }
    },

    /*
     * @return {Boolean}
     * @private
     */
    _canParse() {
        return mbr.settings.isProductSuggestEnabled() && mbr.settings.canBeProductPage();
    },

    /**
     * try to get both name and price by selectors.
     * If name has been found, return an object with fields name and price (price is not required)
     * If name has not been found, return null and trigger the event 'notFound'
     * @param {Object} selector
     * @returns {Object, null}
     * @private
     */
    _parse(selector) {
        let res = this._extractAttributes(selector);

        if (res) {
            if (res.name) {
                mbr.hub.trigger('productName:found', document.querySelector(selector.name));
            }
            if (res.price && selector.price) {
                mbr.hub.trigger('productPrice:found', document.querySelector(selector.price));
            }
        }

        return res;
    },
    
    getData(isTriggeredManually) {
        let result;

        if (isTriggeredManually || this._canParse()) {
            mbr.log('selectors run!');
            let selector = mbr.settings.getSelector();
            if (selector) {
                if (selector.manual && isTriggeredManually) {
                    selector = mbr.tools.mixin({}, selector, selector.manual);
                }
                
                let parseResult = this._parse(selector);
                if (parseResult) {
                    mbr.log('Something is found by selector');
                    mbr.log(parseResult);

                    return {
                        method: 'sl',
                        data: parseResult
                    };
                }
            }
        }
    }
};

mbr.microdataParser = {
    _microdataSelectors: {
        price: {
            selector: '[itemprop=price],[itemprop=average],[itemprop=lowPrice],[property="gr:hasCurrencyValue"],' +
            '.hproduct .price'
        },
        currency: {
            selector: '[itemprop=priceCurrency],[itemprop=currency],[itemprop=price],[itemprop=average],' +
            '[itemprop=lowPrice],[property="gr:hasCurrencyValue"].hproduct .price'
        },
        name: {
            selector: '[itemprop="name"],[property="gr:name"],.fn'
        },
        vendor: {
            selector: '[itemprop="brand"], .brand'
        },
        isbn: {
            selector: '[itemprop="productID"],[itemprop="isbn"],.isbn,.identifier'
        },
        vendorCode: {
            selector: '[itemprop="mpn"],[itemprop="hasMPN"],[property="gr:mpn"],.mpn'
        },
        model: {
            selector: '[itemprop="model"],[itemprop="model"] [itemprop=name]'
        },
        barcode: {
            selector: '[itemprop^="gtin"],.identifier,.ean,[property="gr:hasEAN_UCC-13"]'
        },
        color: {
            selector: '[itemprop="color"], .color'
        },
        category: {
            selector: '[itemprop$="category"], .category',

            getCategoriesFromOneBreadCrumb() {
                const breadCrumbSelector = '[itemtype="http://data-vocabulary.org/Breadcrumb"]';
                const titleSelector = '[itemprop="title"]';

                const breadCrumb = document.querySelector(breadCrumbSelector);

                if (breadCrumb) {
                    let titleElements = breadCrumb.querySelectorAll(titleSelector);

                    return mbr.tools.reduce(titleElements, (categories, titleElement) => {
                        let title = breadCrumb && mbr.tools.getTextContents(titleElement);
                        if (title) {
                            categories.push(title);
                        }

                        return categories;
                    }, []);
                }
            },

            getCategoriesFromManyBreadCrumbs() {
                const breadCrumbSelector = '[itemtype="http://data-vocabulary.org/Breadcrumb"]';
                const breadCrumbTitleSelector = '[itemtype="http://data-vocabulary.org/Breadcrumb"] [itemprop="title"]';
                const titleSelector = '[itemprop="title"]';

                let breadCrumbs = document.querySelectorAll(breadCrumbTitleSelector);
                if (!breadCrumbs.length) {
                    breadCrumbs = document.querySelectorAll(breadCrumbSelector);
                }

                if (breadCrumbs && breadCrumbs.length) {
                    return mbr.tools.reduce(breadCrumbs, (categories, breadCrumb) => {
                        let title = breadCrumb && mbr.tools.getTextContents(breadCrumb);
                        if (title) {
                            categories.push(title);
                        }

                        return categories;
                    }, []);
                }
            },

            selectorFunction() {
                let categories = this.getCategoriesFromOneBreadCrumb();
                if (!categories || categories.length <= 1) {
                    categories = this.getCategoriesFromManyBreadCrumbs();
                }

                return categories && categories.length ? categories.join('/') : null;
            }
        },
        pictures: {
            selectorFunction(rootElem) {
                if (rootElem) {
                    let elements = rootElem.querySelectorAll('[itemprop$="image"], .photo');

                    if (elements && elements.length) {
                        elements = Array.prototype.slice.call(elements);

                        let pictures = elements.map((node) => {
                            return node.getAttribute('content') ||
                                node.getAttribute('src') ||
                                node.getAttribute('value');
                        }).filter((url) => !!url)
                            .map((url) => {
                                if (url.indexOf(location.protocol) === 0) {
                                    return url;
                                } else {
                                    return location.protocol + '//' + location.host + url;
                                }
                            });

                        if (pictures.length) {
                            return pictures;
                        }
                    }
                }
            }
        }
    },

    /*
     * @return {Boolean}
     * @private
     */
    _canParse(domain) {
        return mbr.settings.isProductSuggestEnabled() &&
            mbr.settings.canUseMicrodata() &&
            mbr.settings.canBeProductPage();
    },

    _getRootElement() {
        let schemaEl = null;
        let productElements = mbr.tools.getUniqueElements('[itemtype="http://schema.org/Product"],' +
            '[itemtype="http://data-vocabulary.org/Product"],' +
            '[xmlns\\:gr="http://purl.org/goodrelations/v1#"],' +
            '.hProduct,.hproduct');
        let offerElements = mbr.tools.getUniqueElements('[itemtype="http://schema.org/Offer"]');

        offerElements = offerElements.filter(el => !el.getAttribute('itemref'));

        productElements = productElements.filter(el => !el.getAttribute('itemref'));

        if (offerElements.length) {
            if (offerElements.length === 1 && productElements.length !== 1 || !productElements.length) {
                return offerElements[0];
            }
        }

        if (productElements.length) {
            return productElements[0];
        }
    },

    _extractTextFromNode(node) {
        return mbr.tools.getTextContents(node) ||
            node.getAttribute('content') ||
            node.getAttribute('value');
    },

    _getTextBySelector(rootElement, selector) {
        let text;
        let elements = rootElement.querySelectorAll(selector);

        if (elements && elements.length) {
            text = mbr.tools.reduce(elements, (text, element) => {
                text = text || this._extractTextFromNode(element);
                return text;
            }, '');
        }

        return text;
    },

    _parse() {
        let rootElement = this._getRootElement();
        let res = {};

        if (rootElement) {
            for (let field in this._microdataSelectors) {
                if (this._microdataSelectors.hasOwnProperty(field)) {
                    let fieldValue;

                    if (this._microdataSelectors[field].selectorFunction) {
                        fieldValue = this._microdataSelectors[field].selectorFunction(rootElement);
                    }
                    if (!fieldValue && this._microdataSelectors[field].selector) {
                        fieldValue = this._getTextBySelector(rootElement, this._microdataSelectors[field].selector);
                    }
                    if (fieldValue) {
                        res[field] = fieldValue;
                    }
                }
            }

            if (res.vendor && res.name && res.name.indexOf(res.vendor) === -1) {
                res.name = res.vendor + ' ' + res.name;
            }

            if (res.price) {
                res.price = +mbr.tools.priceAnalyze(res.price) || 0;
                if (!res.price) {
                    delete res.price;
                }
            }
            if (res.currency) {
                res.currency = mbr.tools.getCurrencyFromStr(res.currency);
                if (!res.currency) {
                    delete res.currency;
                }
            }
        }

        if (Object.keys(res).length === 0) {
            res = null;
        }

        return res;
    },

    getData: function(doNotCheck) {
        if (doNotCheck || this._canParse()) {
            mbr.log('md.run!');
            let parseResult = this._parse();
            if (parseResult) {
                mbr.log('Something is found by microdata');
                mbr.log(JSON.stringify(parseResult));

                return {
                    method: 'md',
                    data: parseResult
                };
            }
        }
    }
};

'use strict';

mbr.cmsParser = {

    _selectors: [
        {
            selector: 'link[href*="bitrix/"]',
            cms: '1C-Bitrix'
        },
        {
            selector: 'meta[content*="Amiro.CMS"]',
            cms: 'Amiro.CMS'
        },
        {
            selector: '[umi\\:field-name],html[xmlns\\:umi*="umi-cms.ru"]',
            cms: 'UMI.CMS',
            product: '[umi\\:field-name="h1"]',
            price: '[umi\\:field-name="price"]'
        },
        {
            selector: 'meta[content*="AdVantShop.NET"]',
            cms: 'AdVantShop.NET'
        },
        {
            selector: 'meta[content*="PHPSHOP"]',
            cms: 'PHPShop'
        },
        {
            selector: 'link[href*="insales.ru"]',
            cms: 'InSales'
        },
        {
            selector: 'h1.mainbox-title',
            cms: 'CS-Cart',
            product: 'h1.mainbox-title'
        },
        {
            cms: 'PrestaShop',
            selector: 'meta[content*="PrestaShop"]'
        },
        {
            cms: 'OsCommerce',
            selector: 'link[rel="stylesheet"][href^="templates/"][href$="/stylesheet.css"]'
        },
        {
            cms: 'Joomla!',
            selector: 'meta[content*="Joomla"]'
        },
        {
            cms: 'WordPress',
            selector: 'meta[content*="WordPress"]'
        },
        {
            selector: 'script[src*="drupal"]',
            cms: 'Drupal'

        }

    ],

    /*
     * @param {String} domain
     * @return {Boolean}
     * @private
     */
    _canParse() {
        return mbr.settings.isProductSuggestEnabled() &&
            mbr.settings.canBeProductPage() &&
            mbr.settings.canCheckCMS();
    },

    /**
     * check cms for current site
     * @private
     */
    _getCMS() {
        for (let i = 0; i < this._selectors.length; i++) {
            if (this._selectors[i].selector) {
                if (document.querySelector(this._selectors[i].selector)) {
                    return this._selectors[i];
                }
            }
        }
        return null;
    },

    /**
     * find product name
     * @return {String}
     */
    _getProductName(cms) {
        const selectorProduct = cms.product || 'h1';

        let node = document.querySelector(selectorProduct);
        if (node) {
            return mbr.tools.getTextContents(node);
        }
        return null;
    },

    /**
     * find product price of current page
     * @return {Number, String}
     */
    _getProductPriceBySelector(selector) {
        selector = selector || '.price';
        let node = document.querySelector(selector);
        if (node) {
            let price = mbr.tools.getTextContents(node);
            price = mbr.tools.priceAnalyze(price);
            price = Number(price) || 0;
            return price;
        }
        return 0;
    },

    getData(doNotCheck) {
        if (doNotCheck || this._canParse()) {
            mbr.log('cms.run!');

            let cms = this._getCMS();
            if (cms) {
                mbr.log('find cms = ' + cms.cms);

                const name = this._getProductName(cms);
                if (name) {
                    let res = {name};
                    const price = this._getProductPriceBySelector(cms.price);
                    if (price) {
                        res.price = price;

                        mbr.log(res);

                        return {
                            method: 'cms',
                            data: res
                        };
                    }
                }
            }
        }
    }
};

mbr.manualParser = {
    /**
     * Задает набор элементов из которых извлекаем данные
     */
    _targets: [
        {
            selector: 'title',
            name: 'title'
        },
        {
            selector: 'h1',
            name: 'h1'
        },
        {
            selector: 'meta[name="title"]',
            name: 'meta_title'
        },
        {
            selector: 'meta[name="description"]',
            name: 'meta_description'
        },
        {
            selector: 'meta[name="keywords"]', 
            name: 'meta_keywords'
        }
    ],

    /**
     * Пытаемся получить данные со страницы, а именно
     * из элементов перечисленных в _targets
     * @param {Object} selector
     * @returns {Object, null}
     * @private
     */
    _parse(targets) {
        let res;
        
        res = this._targets.reduce((res, target) => {
            let el = document.querySelector(target.selector);
            
            if (el) {
                res[target.name] = el.content || mbr.tools.getTextContents(el);
            }
            
            return res;
        }, {});
        
        return res;
    },

    getData(canParse) {
        if (canParse) {
            mbr.log('manual parser run!');
            let parseResult = this._parse();
            if (parseResult) {
                mbr.log('Something is found by manual parser');
                mbr.log(JSON.stringify(parseResult));

                return {
                    method: 'mp',
                    data: parseResult
                };
            }
        }
    }
};

'use strict';

mbr.urlParser = {

    _canParse() {
        return mbr.settings.isProductSuggestEnabled() &&
            mbr.settings.canBeProductPage();
    },

    getData(doNotCheck) {
        mbr.log('url parser run');

        if (doNotCheck || this._canParse()) {
            if (mbr.settings.isReviewSite()) {
                return {
                    method: 'rs',
                    data: {
                        url: document.URL
                    }
                };
            }

            if (mbr.settings.isShop()) {
                return {
                    method: 'sh',
                    data: {
                        url: document.URL
                    }
                };
            }
        }
    }
};

'use strict';
mbr.searchParser = {
    /**
     * check first search
     * @return {Boolean}
     * @private
     */
    _isFirstSearch(query) {
        return !mbr.cookie.get(query);
    },

    _searchEngines: {
        //'Mail.ru': {
        //    urlPattern: /https?:\/\/go\.mail\.ru\/search/,
        //    queryParam: 'q',
        //    nextPageParam: 'sf'
        //},
        //'Yandex': {
        //    urlPattern: /https?:\/\/(?:www.)?yandex\.ru\/yandsearch/,
        //    queryParam: 'text',
        //    nextPageParam: 'p'
        //},
        //'Google': {
        //    urlPattern: /^https?:\/\/(?:www.)?google\.(ru|com)\/.+q=/,
        //    nextPageParam: 'start',
        //    queryParam: 'q'
        //},
        //'SuperJob': {
        //    urlPattern: /https?:\/\/(?:www.)?superjob\.ru\/(vacancy|resume)\/search/,
        //    queryParam: 'keywords[0][keys]',
        //    nextPageParam: 'page'
        //},
        'Avito': {
            urlPattern: /https?:\/\/(?:www.)?avito\.ru\/.+?\//,
            queryParam: 'q',
            infoRe: /https?:\/\/(?:www.)?avito\.ru\/.+?\/([^\/\?]+)\/?([^\?]+)?(?:.*?)(?:q\=([^&]+))?$/,
            priceContextSections: {
                telefony: true,
                bytovaya_elektronika: true,
                velosipedy: true,
                bytovaya_tehnika: true,
                tovary_dlya_kompyutera: true,
                audio_i_video: true
            },

            /**
             * return true if url match for infoRe and priceContextSections contains current section
             * @param url
             * @returns {boolean}
             */
            isPriceContextEnabled(url) {
                const [res, section] = this.infoRe.exec(url) || [];
                if (section) {
                    return !!this.priceContextSections[section];
                }
                return false;
            }
        }
    },

    /**
     * get information about avito page: section, subSection (non-required) and query (non-required)
     * @param {String} url
     * @returns {Object}
     */
    getInfoFromAvito(url) {
        const [res, section, subSection, query] = this._searchEngines['Avito'].infoRe.exec(url) || [];
        let info = {};
        if (section) {
            info.section = section;
        }
        if (subSection && subSection.search(/_\d+$/) === -1) {
            info.subSection = subSection;
        }
        if (query) {
            info.query = decodeURIComponent(query.replace(/\+/g, ' '));
        }

        return Object.keys(info).length > 0 ? info : null;
    },

    /**
     * get info about search page: get query from url or delegate execution to specific method
     * @param {String} url
     * @returns {Object}
     */
    getInfoAboutSearchPage() {
        let info = null;
        const url = document.URL;

        for (let se in this._searchEngines) {
            if (this._searchEngines.hasOwnProperty(se)) {
                let engine = this._searchEngines[se];
                if (engine.urlPattern.test(url)) {
                    let isNotNextPage = !engine.nextPageParam || url.indexOf(`${engine.nextPageParam}=`) === -1;
                    if (isNotNextPage) {
                        if (se === 'Avito') {
                            info = this.getInfoFromAvito(url);
                        } else {
                            info = {
                                query: mbr.tools.getQueryParam(url, engine.queryParam)
                            };
                        }
                        if (info) {
                            info.engine = se;
                            break;
                        }
                    }
                }
            }
        }
        return info;
    },

    _canParse() {
        return mbr.settings.isProductSuggestEnabled();
    },

    getData(doNotCheck) {
        if (doNotCheck || this._canParse()) {
            mbr.log('search run!');
            let info = this.getInfoAboutSearchPage();

            if (info) {
                let engine = this._searchEngines[info.engine];

                if (engine.isPriceContextEnabled && engine.isPriceContextEnabled(document.URL)) {
                    if (info.query && this._isFirstSearch(info.query)) {
                        mbr.cookie.set(info.query, 'true');

                        return {
                            method: 'sr',
                            data: {
                                name: info.query
                            }
                        };
                    }
                }
            }
        }
    }
};

mbr.partnerWebsiteParser = {
    _canParse() {
        return mbr.settings.isYandexWebPartner && mbr.settings.isYandexWebPartner();
    },

    /**
     * get product name or modelId and send request to the server
     * @return {Promise}
     */
    getData() {
        if (this._canParse()) {
            mbr.log('partner\'s website parser run!');
            const productName = mbr.settings.getProductName();
            const modelId = mbr.settings.getModelId();

            if (productName || modelId) {
                var res = {};
                if (modelId) {
                    res.model_id = modelId;
                } else if (productName) {
                    res.name = productName;
                }

                mbr.log(`Name: ${res.name}; ModelId: ${res.model_id}`);

                return {
                    method: 'pw',
                    data: res
                };
            }
        }
    }
};

'use strict';

mbr.defaultSelectorsParser = {

    _canParse() {
        return mbr.settings.isProductSuggestEnabled() &&
            mbr.settings.canBeProductPage() &&
            (mbr.settings.isShop() || mbr.settings.getSelector());
    },

    getData: function(doNotCheck) {
        mbr.log('default-selector parser run');

        if (doNotCheck || this._canParse()) {
            let data = {};

            const h1 = document.querySelector('h1');
            const priceNode = document.querySelector('.price');

            if (h1 && mbr.settings.isShop()) {
                const h1Text = mbr.tools.getTextContents(h1);
                if (h1Text) {
                    data.h1 = h1Text;
                }
            }

            if (priceNode) {
                let price = mbr.tools.getTextContents(priceNode);

                if (price) {
                    price = +mbr.tools.priceAnalyze(price);
                    if (price) {
                        data.price = price;
                    }
                }
            }

            if (Object.keys(data).length) {
                return {
                    method: 'df',
                    data
                };
            }
        }
    }
};

/**
 * Product info
 * @typedef {Object} ProductInfo
 * @property {String} [name]
 * @property {Number} [price]
 * @property {String} [currency]
 * @property {String} [vendor]
 * @property {String} [category]
 */

mbr.dataLayerParser = {
    /*
     * @param {String} domain
     * @return {Boolean}
     * @private
     */
    _canParse(domain) {
        return mbr.settings.isProductSuggestEnabled(domain) && mbr.settings.canBeProductPage();
    },

    /**
     * get array of dataLayer objects
     * https://developers.google.com/tag-manager/enhanced-ecommerce
     * @returns {Array|null}
     * @private
     */
    _getDataLayer() {
        let mainDataLayer = window.dataLayer;

        if (typeof mainDataLayer !== 'object' && typeof dataLayer === 'object') { //For Firefox's sandbox
            mainDataLayer = dataLayer;
        }

        if (!mainDataLayer || typeof mainDataLayer !== 'object' || !mainDataLayer.length) {
            mainDataLayer = [];
        }

        for (let i = 0; i < 10; i++) {
            if (window[`dataLayer${i}`]) {
                let currentDataLayer = window[`dataLayer${i}`];
                if (typeof currentDataLayer === 'object' && currentDataLayer.length) {
                    mainDataLayer = mainDataLayer.concat(currentDataLayer);
                }
            }
        }

        return mainDataLayer.length && mainDataLayer || null;
    },

    /**
     * get product info from dataLayer
     * @param {Array} dataLayer
     * @returns {ProductInfo} productInfo
     * @private
     */
    _extractInfoFromDataLayer(dataLayer) {
        let infoFromEcomerce = {};
        let infoFromProductPage = {};
        let info = {};

        let sectionsWithEcommerce = dataLayer.filter((dlObject) => dlObject.ecommerce);
        let productPageSection = dataLayer.filter((dlObject) => {
            return dlObject.pageType && /product/i.test(dlObject.pageType);
        });

        if (sectionsWithEcommerce.length) {
            let ecommerce = sectionsWithEcommerce[0].ecommerce;
            if (ecommerce.detail && ecommerce.detail.products) {
                let products = ecommerce.detail.products;
                if (!Array.isArray(products)) { //products can be an object!
                    products = [products];
                }

                const currency = ecommerce.currencyCode;
                const {name, price, brand:vendor, category} = products[0];

                infoFromEcomerce = {name, price, vendor, category, currency};
            }
        }

        if (productPageSection.length) {
            const fieldsSelectors = [
                {
                    field: 'name',
                    selectors: ['name', 'productName', 'prodName']
                },
                {
                    field: 'price',
                    selectors: ['price', 'productPrice', 'productPriceLocal', 'itemPrice']
                },
                {
                    field: 'category',
                    selectors: ['categoryName', 'productGroupName', 'category', 'productCategoryName']
                },
                {
                    field: 'vendor',
                    selectors: ['brand', 'vendorName', 'productVendorName']
                }
            ];

            fieldsSelectors.forEach(({field, selectors}) => {
                let result = mbr.tools.reduce(selectors, (res, selector) => {
                    return res || productPageSection[0][selector];
                }, null);

                if (result) {
                    infoFromProductPage[field] = result;
                }
            });
        }

        info = mbr.tools.mixin(info, infoFromProductPage);
        info = mbr.tools.mixin(info, infoFromEcomerce);

        let keys = Object.keys(info);
        for (let i = 0; i < keys.length; i++) {
            if (!info[keys[i]]) {
                delete info[keys[i]];
            }
        }

        if (info.price) {
            info.price = parseInt(info.price, 10);
        }

        if (Object.keys(info).length > 0) {
            return info;
        }
    },

    getData(doNotCheck) {
        const domain = mbr.tools.getHostname(document);
        if (doNotCheck || this._canParse(domain)) {
            mbr.log('dl run');
            let mainDataLayer = this._getDataLayer();
            if (mainDataLayer && mainDataLayer.length) {
                let data = this._extractInfoFromDataLayer(mainDataLayer);

                if (data && typeof data === 'object') {
                    mbr.log('dl extract');
                    mbr.log(data);
                    return {
                        method: 'dl',
                        data
                    };
                }
            }
        }
    }
};

mbr.parser = {
    /**
     * Для некоторых сайтов у нас запрещено извлечение цены, т.к. там извлекаем что-то нехорошее.
     * Мы не запрещаем извлекать, но извлеченную цену не компонуем в результат извлечения
     *
     * @param {Boolean} canExtractPrice
     * @param data
     * @returns {Object}
     * @private
     */
    _composeRequest(canExtractPrice, ...data) {
        const maxLength = 200;
        data = data.filter((parserData) => parserData);

        mbr.log(data);
        if (data.length) {
            let nameIsFound = false;
            let isShop = false;

            let composed = mbr.tools.reduce(data, (request, parserData) => {
                let {method, data} = parserData;
                if (data) {
                    let tmpRequest = {};
                    for (let i in data) {
                        if (i === 'name' || i === 'h1' || i === 'isbn' || i === 'title') {
                            nameIsFound = true;
                        }
                        if (method === 'sh' || method === 'rs') {
                            isShop = true;
                        }
                        if (canExtractPrice || i !== 'price') {
                            if (typeof data[i] === 'string' && data[i].length > maxLength) {
                                data[i] = data[i].substr(0, maxLength);
                            }

                            tmpRequest[`${i}_by_${method}`] = data[i];
                        }
                    }

                    request = mbr.tools.mixin({}, request, tmpRequest);
                }

                return request;
            }, {});

            if (nameIsFound || isShop) {
                return composed;
            } else {
                mbr.log('we have not found name, h1 and this is not a shop');
            }
        }
    },

    parse(isTriggeredByButton) {
        let partnerWebsiteParserData = mbr.partnerWebsiteParser.getData(isTriggeredByButton);
        let selectorParserData = mbr.selectorsParser.getData(isTriggeredByButton);
        let dataLayerParserData = mbr.dataLayerParser.getData(isTriggeredByButton);
        let microdataParserData = mbr.microdataParser.getData(isTriggeredByButton);
        let cmsParserData = mbr.cmsParser.getData(isTriggeredByButton);
        let searchParserData = mbr.searchParser.getData(isTriggeredByButton);
        let urlParserData = mbr.urlParser.getData(isTriggeredByButton);
        let defaultSelectorsParser = mbr.defaultSelectorsParser.getData(isTriggeredByButton);
        let manualParser = mbr.manualParser.getData(isTriggeredByButton);

        let request = this._composeRequest(
            mbr.settings.canExtractPrice(),
            partnerWebsiteParserData,
            selectorParserData,
            dataLayerParserData,
            microdataParserData,
            cmsParserData,
            searchParserData,
            urlParserData,
            defaultSelectorsParser,
            manualParser
        );

        mbr.log(request);

        return request;
    }
};

(() => {
    class Randomizer {
        constructor(html, randomNameLength, saveNames) {
            this.html = html;
            this.randomNameLength = randomNameLength || 13;
            this.saveNames = !!saveNames;

            var allNames = this._getAllClassesAndIds();
            this.randomNames = this._createRandomNames(allNames);
            this.re = this._createRandomizationRegEx(allNames);
        }

        /**
         * extract all classes and ids and return them sorted by descending length
         * @returns {Array}
         * @private
         */
        _getAllClassesAndIds() {
            let resultObj = {};
            const re = /\s(?:class|id)\s*=["'](.+?)["']/g;

            let classOrId;
            do {
                [, classOrId] = re.exec(this.html) || [];

                if (classOrId) {
                    classOrId
                        .replace(/\s+/, ' ')
                        .split(' ')
                        .forEach((str) => {
                            if (str) {
                                resultObj[str] = true;
                            }
                        });
                }
            } while (classOrId);

            //sort by length
            return Object.keys(resultObj).sort((a, b) => b.length - a.length);
        }

        /**
         * create hash {originalName: randomName}
         * @param {Array} allNames
         * @returns {Object}
         * @private
         */
        _createRandomNames(allNames) {
            let randomNames = {};
            let saveNames = this.saveNames;
            let pattern = 'm';

            while (pattern.length < this.randomNameLength) {
                pattern += 'x';
            }

            allNames.forEach((name) => {
                randomNames[name] = saveNames ? name : pattern.replace(/x/g, () => {
                    return Math.round(Math.random() * 35).toString(36);
                }); //letter 'm' + random string 0-9 a-z
            });

            return randomNames;
        }

        /**
         * create regexp for replacing classes and ids. Regexp is kind of /class1Long|class2|class1Min|class1|id1/g
         * @param {Array} allNames
         * @returns {RegExp}
         * @private
         */
        _createRandomizationRegEx(allNames) {
            return new RegExp(allNames.join('|'), 'g');
        }

        get _russianLetters() {
            return {
                'а': 'a',
                'о': 'o',
                'е': 'e'
            };
        }

        _randomizeRussianText(text) {
            let percent = 0.7;
            let isReplaced = false;

            text = text.replace(/\S/g, (letter) => {
                if (this._russianLetters[letter] && Math.random() < percent) {
                    isReplaced = true;
                    return this._russianLetters[letter];
                }
                return letter;
            });

            if (!isReplaced) {
                text = text.replace(/\S/g, (letter) => {
                    return this._russianLetters[letter] || letter;
                });
            }

            return text;
        }
            
        randomizeTextInNode(node) {
            Array.prototype.filter.call(node.childNodes, (child) => {
                if (child.nodeType === 3) {
                    child.textContent = this._randomizeRussianText(child.textContent);
                } else {
                    this.randomizeTextInNode(child);
                }
            });
        }

        /**
         * Return string with randomized text
         * @param {String} input HTML-string or russian text
         * @param {Boolean} [isRussianText] when true randomizer don't try to replace classes and ids but replace random
         * russian letters to english analogues
         * @returns {String}
         */
        randomize(input) {
            const re = /(?:(?:class|id)\s*=["'](.+?)["'])|(?:(?:#|\.)([a-z-_\d]+))/g;
            const spaceRe = /\s+/g;

            let replaced = false;
            input = input.replace(re, (match, classOrId1, classOrId2) => {
                let classOrId = classOrId1 || classOrId2;
                let newClassOrId = classOrId
                    .replace(spaceRe, ' ')
                    .split(' ')
                    .map(pattern => this.randomNames[pattern] || pattern)
                    .join(' ');

                replaced = classOrId !== newClassOrId;

                return match.replace(classOrId, newClassOrId);
            });

            if (!replaced) {
                input = input.replace(this.re, (pattern) => this.randomNames[pattern]);
            }

            return input;
        }
    }

    mbr.Randomizer = Randomizer;
})();

let abtest = {
    tests: [
       /* {
            match: {
                bestcpc_offers: 'bestcpc'
            }
        } for example */
    ],

    /**
     * get ab-modificators for popup. Ex. ["popup_red", "optIn_invert"]
     * @param {Object} bucket
     * @returns {Array}
     */
    getModificators: function(bucket) {
        bucket = bucket || {};
        var modificators = [];

        //if bucket has not value for experiment - use 'original' value
        this.tests.forEach(function(test) {
            for (var experimentName in test.match) {
                if (test.match.hasOwnProperty(experimentName) && !bucket.hasOwnProperty(experimentName)) {
                    bucket[experimentName] = 'original';
                }
            }
        });

        for (var i in bucket) {
            if (bucket.hasOwnProperty(i)) {
                modificators.push(i + '_' + bucket[i]);
            }
        }
        return modificators;
    }
};

if (typeof mbr !== 'undefined') {
    mbr.abtest = abtest;
}

if (typeof svt !== 'undefined') {
    svt.abtest = abtest;
}

/*Используется и скриптом и расширением, вносить изменения КРАЙНЕ осторожно*/

(() => {
    let tools;
    let abtest;
    
    if (typeof mbr !== 'undefined') {
        tools = mbr.tools;
        abtest = mbr.abtest;
    }
    
    if (typeof svt !== 'undefined') {
        tools = svt.tools;
        abtest = svt.abtest;
    }
    
    let responseParser = {
        /**
         * get whole parse result for desktop view
         * @param {Object} response
         * @param {Boolean} parseAppSettings для попапа кнопки нам не нужны данные о приложении
         * @param {Object} paramsToLinks параметры вида {key:value}, которые нужно добавить во все урлы
         * Используется, например, попапом кнопки, у которого все таргеты такие же, но нужен дополнительный параметр
         * для отслеживания, что клик был из кнопки
         * 
         * @returns {{}}
         */
        getParseResult(response, parseAppSettings=true, paramsToLinks=null) {
            let data = {};

            data.isAvia = false;
            data.isProduct = this.isProductResponse(response);
            data.isClothes = this.isClothesResponse(response);
            data.isSimilarModels = this.isSimilarModelsResponse(response);
            data.isSearchResult = this.isSearchResultResponse(response);

            if (data.isProduct) {
                let shopInfo = this.getShopInfo(response);
                if (shopInfo) {
                    data.shopInfo = shopInfo;
                }

                if (data.isClothes) {
                    data = tools.mixin(
                        data,
                        this.getClothesInfo(response),
                        this.getClothesUrls(response)
                    );
                } else {
                    let model = this.getModel(response);
                    if (model) {
                        data.model = model;
                    }

                    data = tools.mixin(
                        data,
                        this.getPopupOffersInfo(response),
                        this.getPricebarInfo(response),
                        this.getProductUrls(response)
                    );
                }
            } else if (data.isSimilarModels) {
                data.model = this.getModel(response);
                data = tools.mixin(
                    data,
                    {isProduct: true},
                    this.getSimilarProducts(response),
                    this.getProductUrls(response)
                );
            } else if (data.isSearchResult) {
                data = tools.mixin(
                    data,
                    this.getSearchResult(response),
                    this.getProductUrls(response)
                );
            }
            
            data = tools.mixin(
                data,
                this.getRelevantCategories(response)
            );

            data = tools.mixin(
                data,
                this.getAbInfo(response),
                parseAppSettings && this.getAppSettings(response),
                parseAppSettings && this.getSiteInfo(),
                this.getNotification(response)
            );
            
            if (paramsToLinks) {
                this._wrapLinks(data, paramsToLinks);
            }
            
            return data;
        },

        /**
         * Return true if the response is product's response
         * @param {Object} response
         * @returns {boolean}
         */
        isProductResponse(response) {
            return !!(response.offers &&
            response.offers.length &&
            response.offers[0].price);
        },

        getNotification(response) {
            if (response.notification) {
                return {notification: response.notification};
            }
            return null;
        },

        /**
         * Return true if the response contains clothes
         * @param response
         * @returns {boolean}
         */
        isClothesResponse(response) {
            return !!(response.offers &&
            response.offers.length &&
            response.offers[0].price &&
            response.offers[0].target === 'clothes-list');
        },

        /**
         * Return true if the response contains similarModels
         * @param response
         * @returns {boolean}
         */
        isSimilarModelsResponse(response) {
            return !!(response && response.similarModels && response.similarModels.length);
        },
        
        /**
         * Return true if the response is search result
         * @param {Object} response
         * @returns {boolean}
         */
        isSearchResultResponse(response) {
            return !!(response && response.searchResult && response.searchResult.length);
        },

        /**
         * Get info about AB-tests
         * @param {Object} response
         * @returns {Object} abInfo
         * @returns {String} abInfo.abClass
         * @returns {Object} abInfo.ab modificators like {experiment_name_value: true}
         */
        getAbInfo(response) {
            let result = {};
            if (response && response.bucketInfo) {
                let ab = abtest.getModificators(response.bucketInfo);
                result.abClass = ab.join(' ');
                result.ab = tools.reduce(ab, (result, abModificator) => {
                    result[abModificator] = true;
                    return result;
                }, {});
            }

            return result;
        },

        /**
         * Get info about AB-tests
         * @param {Object} response
         * @response {Object} bucketInfo
         */
        getBucketInfo(response) {
            return response && response.bucketInfo || {};
        },

        /**
         * get whole app settings for desktop view
         * @param response
         */
        getAppSettings(response) {
            let {settings, searchInfo} = response;

            let result = {
                isMbrApplication: settings.isMbrApplication,
                applicationName: settings.applicationName,
                needShowOptIn: settings.needShowOptIn,
                isOptOutEnabled: typeof settings.needShowOptOut !== 'undefined' ?
                    settings.needShowOptOut :
                    mbr.settings.isOptOutEnabled(),
                useSavedRandomContainer: settings.randomContainer,
                autoShowShopList: settings.autoShowShopList,
                needShowNotifications: settings.needShowNotifications,
                viewModificators: mbr.settings.getViewModificators(),
                customLogo: mbr.settings.getCustomLogo(),
                settingsURL: mbr.config.getSettingsURL(),
                showWelcome: settings.isFirstDisplay && mbr.settings.isYandexElementsExtension(),
                needShowShopsPopupForever: settings.needShowShopsPopupForever,
                eulaUrl: searchInfo.urls.eula,
                feedbackUrl: searchInfo.urls.feedback,
                helpUrl: searchInfo.urls.help,
                settingsItems: settings.items,
                regionName: settings.region,
                needShowAdultOptIn: settings.needShowAdultOptIn
            };

            if (result.needShowOptIn && result.isOptOutEnabled) {
                result.optInImage = mbr.config.getStorageHost() + '/static/images/' + settings.optOutImage;
                result.optInTitle = settings.optOutTitle;
                if (settings.optOutNotAcceptByDefault) {
                    result.optOutNotAcceptByDefault = true;
                }
            }

            result = tools.removeUndefined(result);

            return result;
        },

        /**
         * get info about current shop
         * @param response
         * @returns {*|Object}
         */
        getShopInfo(response) {
            let shopInfo = response.shopInfo;
            if (shopInfo) {
                shopInfo.gradeText = tools.getGradeText(shopInfo.gradeTotal);
            }

            return shopInfo;
        },

        /**
         * get info about current page
         */
        getSiteInfo() {
            return {
                isClassified: !!mbr.settings.isClassified(),
                domain: document.domain,
                isWebPartner: !!mbr.settings.isYandexWebPartner(),
                useRussianEnglishLetters: !!mbr.settings.needUseRussianEnglishLetters()
            };
        },

        /**
         * get model from response
         * @param {Object} response
         * @returns {Object} model
         * @returns {String} caption vendor + modelName. e.g. 'Apple iPhone 5S 16GB'
         * @returns {String} name e.g. 'iPhone 5S 16GB'. Can contain vendor
         * @returns {String} photo url to model's photo
         * @returns {String} rating e.g. 4.2 or 2.0
         * @returns {Number} gradeCount count of votes for the model
         * @returns {Number} outletsCount count of shops with the product
         * @returns {Number} offersCount
         * @returns {Number} reviewsCount
         * @returns {Object} model.urls
         * @returns {String} model.urls.map
         * @returns {String} model.urls.model
         * @returns {String} model.urls.offers
         * @returns {String} model.urls.price
         * @returns {Object} model.urls.reviews
         * @returns {String} model.prices.avg e.g. '100 500'
         * @returns {String} model.prices.max
         * @returns {String} model.prices.min
         * @returns {String} model.prices.curCode
         * @returns {String} model.prices.curName
         *
         */
        getModel(response) {
            if (response.model) {
                let model = response.model;
                if (model.prices) {
                    for (let price in model.prices) {
                        if (model.prices.hasOwnProperty(price)) {
                            if (/^\d+$/.test(model.prices[price])) {
                                model.prices[price] = tools.formatPrice(
                                    model.prices[price]
                                );
                            }
                        }
                    }
                }

                model.caption = '';

                if (model.name) {
                    model.caption = model.name;
                }

                if (model.vendor) {
                    if (model.caption.indexOf(model.vendor) !== 0) {
                        model.caption = model.vendor + ' ' + model.caption;
                    }
                }

                if (model.rating) {
                    model.ratingText = tools.ratingText(model.rating);
                }

                if (response.offers) {
                    response.offers.forEach((offer) => {
                        if (offer.warning) {
                            model.warning = offer.warning;
                        }
                    });
                }

                return model;
            }
        },

        getAllOffersFromResponse(response) {
            if (response.offers) {
                response.offers = response.offers
                    .map((offer) => {
                        offer.price.value = tools.formatPrice(offer.price.value);
                        if (offer.price.base) {
                            offer.price.base = tools.formatPrice(offer.price.base);
                        }

                        return offer;
                    });

                return response.offers;
            }
        },

        /**
         * get formatted info about offers from response
         * @param {Object} response
         *
         * @returns {Object} offersInfo
         * @returns {String} offersInfo.warning
         * @returns {Boolean} offersInfo.needShowAgeColumnt
         * @returns {Boolean} offersInfo.haveAnyDiscounts
         * @returns {Number} offersInfo.offersCount
         * @returns {Boolean} offersInfo.hasAdultOffers
         * @returns {Array<Object>} offersInfo.offers
         */
        getPopupOffersInfo(response) {
            let {offers, searchInfo, settings} = response;

            if (offers) {
                let offersInfo = {
                    offersFound: true
                };

                offersInfo.shops = offers
                    .filter((offer) => offer.target !== 'pricebar')
                    .map((offer, id) => {
                        if (offer.age) {
                            offer.age = parseInt(offer.age, 10);
                            offer.needShowAgeBadge = true;
                            offersInfo.needShowAgeColumn = true;
                        }

                        if (!offersInfo.warning && offer.warning) {
                            offersInfo.warning = offer.warning;
                        }

                        if (offer.price.discount) {
                            offersInfo.haveAnyDiscounts = true;
                        }

                        offer.shopInfo.rating = Math.max(offer.shopInfo.rating, 0); // it can be -1

                        if (offer.mostRelevant) {
                            offer.type = 'BestCPC';
                        } else if (offer.guaranteedLowestPrice) {
                            offer.type = 'Lowest';
                        } else {
                            offer.type = 'Profitable';
                        }

                        offer = tools.removeUndefined({
                            index: id + 1,
                            id: offer.shopInfo.id,
                            type: offer.type,
                            name: offer.shopInfo.name,
                            productName: offer.name,
                            rating: offer.shopInfo.rating,
                            gradeText: tools.getGradeText(offer.shopInfo.gradeTotal),
                            url: offer.url,
                            buttonUrl: offer.buttonUrl,
                            price: tools.formatPrice(offer.price.value, offer.price.currencyName || ''),
                            priceValue: offer.price.value,
                            discount: offer.price.discount,
                            oldPrice: tools.formatPrice(Number(offer.price.base), offer.price.currencyName || ''),
                            photo: offer.photo,
                            target: offer.target,
                            delivery: offer.delivery,
                            shopUrl: offer.shopInfo.url,
                            age: offer.age,
                            needShowAgeBadge: offer.needShowAgeBadge
                        });

                        return offer;
                    });

                offersInfo.offersCount = searchInfo && searchInfo.offersCount || 0;

                offersInfo.hasAdultOffers = offers.some((offer) => offer.adult);

                return offersInfo;
            }
        },

        /**
         * get info we need to render on pricebar
         * @param {Object} response
         * @returns {Object} result
         */
        getPricebarInfo(response) {
            let {offers, model, searchInfo} = response;

            if (offers && offers.length) {
                let result = {};

                let mainOffer = offers[0];

                result.priceText = tools.formatPrice(
                    mainOffer.price.value,
                    mainOffer.price.currencyName || ''
                );

                if (model) {
                    result.originalProductName = model.caption;
                } else {
                    result.originalProductName = mainOffer.name;
                }

                result.productName = result.originalProductName;

                if (result.productName && result.productName.length > 64) {
                    result.productName = result.productName.substr(0, 64) + '...';
                }

                if (mainOffer.price.currencyCode === 'RUB' || mainOffer.price.currencyCode === 'RUR') {
                    result.currencyClass = 'rouble';
                } else {
                    result.currencyClass = mainOffer.price.currencyCode;
                }

                if (searchInfo.convertedPrice) {
                    mainOffer.price.value = Math.round(parseFloat(mainOffer.price.value));

                    mainOffer.price.isPriceExtracted = true;
                    mainOffer.price.isHigherThanCurrent = mainOffer.price.value >= searchInfo.convertedPrice.value;
                    mainOffer.price.isLowerThanCurrent = !mainOffer.price.isHigherThanCurrent;
                }

                result = tools.mixin(result, {
                    currency: mainOffer.price.currencyName,
                    age: parseInt(mainOffer.age, 10) || undefined,
                    needShowAgeBadge: !!mainOffer.age,
                    photo: mainOffer.photo,
                    shop: mainOffer.shopInfo,
                    mainOfferDelivery: mainOffer.delivery,
                    isLowestPrice: mainOffer.price.isLowerThanCurrent,
                    isHigherPrice: mainOffer.price.isHigherThanCurrent,
                    isMostRelevant: mainOffer.mostRelevant,
                    isHigherThanCurrent: mainOffer.price.isHigherThanCurrent,
                    url: mainOffer.url
                });

                return tools.removeUndefined(result);
            }
        },
        
        getRelevantCategories(response) {
            let result = {};
            
            if (response.searchInfo) {
                tools.mixin(
                    result,
                    {
                        relevantCategories: response.searchInfo.categories
                    }
                );
            }
            
            return tools.removeUndefined(result);
        },

        /**
         * get clothes info
         * @param response
         * @returns {{offers: *, maxDiscount: number, offersCount: (*|number), category: *, categoryUrl: *}}
         */
        getClothesInfo(response) {
            let {offers, searchInfo} = response;
            if (offers && offers.length) {
                let maxDiscount = 0;
                let offers;

                offers = response.offers.map(offer => {
                    offer.priceText = tools.formatPrice(offer.price.value, offer.price.currencyName || '', 'от');
                    if (offer.price.base) {
                        offer.oldPriceText = tools.formatPrice(offer.price.base, offer.price.currencyName || '', 'от');
                    }

                    return offer;
                });

                maxDiscount = tools.reduce(offers, (max, offer) => {
                    let currentDiscount = parseInt(offer.price.discount, 10);
                    return currentDiscount > max ? currentDiscount : max;
                }, 0);

                return {
                    offers: offers,
                    maxDiscount: maxDiscount,
                    offersCount: searchInfo.offersCount,
                    category: searchInfo.category.name,
                    categoryUrl: searchInfo.category.url
                };
            }

        },

        /**
         * get urls for desktop view
         * @param response
         * @returns {*|Object}
         */
        getProductUrls(response) {
            if (response && response.searchInfo && response.searchInfo.urls) {
                let responseUrls = response.searchInfo.urls;
                let urls = {
                    marketUrl: responseUrls.market,
                    shopsInfoUrl: responseUrls.shopsInfo,
                    pricesUrl: responseUrls.prices,
                    searchUrl: responseUrls.search,
                    searchUrlButton: responseUrls.searchButton
                };

                return tools.removeUndefined(urls);
            }
        },

        /**
         * get urls for mobile view
         * @param response
         * @returns {{market: *, shopsInfo: *, help: *, eula: *}}
         */
        getMarketUrlsFromResponse(response) {
            if (response && response.searchInfo && response.searchInfo.urls) {
                const {
                    market,
                    shopsInfo,
                    help,
                    helpPhone,
                    helpTablet,
                    eula
                    } = response.searchInfo.urls;

                return {
                    market,
                    shopsInfo,
                    help,
                    helpPhone,
                    helpTablet,
                    eula
                };
            }
        },

        /**
         * get urls for clothes pricebar
         * @param response
         * @returns {{marketUrl: *, offersUrl: String}}
         */
        getClothesUrls(response) {
            if (response && response.searchInfo && response.searchInfo.urls) {
                let responseUrls = response.searchInfo.urls;
                let urls = {
                    marketUrl: responseUrls.market,
                    offersUrl: responseUrls.prices,
                    searchUrlButton: responseUrls.searchButton
                };

                return urls;
            }
        },
        
        /**
         * get info about search result
         * @param response
         * @returns {{searchResult: array}}
         */
        getSearchResult(response) {
            if (response && response.searchResult) {
                let result = {};
                
                result.searchResult = response.searchResult.map((item) => {
                    if (item.isModel) {
                        let {reviewsCount} = item;
                        let reviewsText = tools.pluralize(['отзыв', 'отзыва', 'отзывов'], reviewsCount);

                        item.reviewsCountText = `${reviewsCount} ${reviewsText}`;
                        item.ratingText = tools.ratingText(item.rating);
                        item.priceText = tools.formatPrice(item.prices.min, item.prices.curName || '');
                        item.priceMaxText = tools.formatPrice(item.prices.max, item.prices.curName || '');

                        if (item.vendor && item.name.indexOf(item.vendor) !== 0) {
                            item.caption = item.vendor + ' ' + item.name;
                        } else {
                            item.caption = item.name;
                        }
                    } else {
                        if (item.age) {
                            item.age = parseInt(item.age, 10);
                            item.needShowAgeBadge = true;
                        }

                        item.shopInfo.rating = Math.max(item.shopInfo.rating, 0); // it can be -1

                        if (item.mostRelevant) {
                            item.type = 'BestCPC';
                        } else if (item.guaranteedLowestPrice) {
                            item.type = 'Lowest';
                        } else {
                            item.type = 'Profitable';
                        }

                        item = tools.removeUndefined({
                            id: item.shopInfo.id,
                            type: item.type,
                            name: item.shopInfo.name,
                            productName: item.name,
                            rating: item.shopInfo.rating,
                            gradeText: tools.getGradeText(item.shopInfo.gradeTotal),
                            url: item.url,
                            buttonUrl: item.buttonUrl,
                            price: tools.formatPrice(item.price.value, item.price.currencyName || ''),
                            priceValue: item.price.value,
                            discount: item.price.discount,
                            oldPrice: tools.formatPrice(Number(item.price.base), item.price.currencyName || ''),
                            photo: item.photo,
                            target: item.target,
                            delivery: item.delivery,
                            shopUrl: item.shopInfo.url,
                            age: item.age,
                            needShowAgeBadge: item.needShowAgeBadge
                        });
                    }

                    return item;
                });

                return result;
            }
        },

        /**
         * get info about similar models
         * @param response
         * @returns {{offersFound: boolean, similarModels: array, originalProductName: string, productName: string}}
         */
        getSimilarProducts(response) {
            if (response && response.similarModels) {
                let result = {
                    offersFound: false
                };

                result.similarModels = response.similarModels.map((model) => {
                    let {reviewsCount} = model;
                    let reviewsText = tools.pluralize(['отзыв', 'отзыва', 'отзывов'], reviewsCount);

                    model.reviewsCountText = `${reviewsCount} ${reviewsText}`;
                    model.ratingText = tools.ratingText(model.rating);
                    model.priceText = tools.formatPrice(model.prices.min, model.prices.curName || '');

                    if (model.vendor && model.name.indexOf(model.vendor) !== 0) {
                        model.caption = model.vendor + ' ' + model.name;
                    } else {
                        model.caption = model.name;
                    }

                    return model;
                });

                result.originalProductName = result.productName = response.model.caption;
                if (result.productName && result.productName.length > 64) {
                    result.productName = result.productName.substr(0, 64) + '...';
                }

                return result;
            }
        },
        
        _appendStringToLinks(objWithLinks, stringToAppend) {
            if (objWithLinks) {
                const linkRe = /^http.+redir\?/;

                let newObj = {};
                if (objWithLinks) {
                    for (let i in objWithLinks) {
                        if (objWithLinks.hasOwnProperty(i)) {
                            if (typeof objWithLinks[i] === 'string') {
                                if (linkRe.test(objWithLinks[i]) && objWithLinks[i].indexOf(stringToAppend) === -1) {
                                    objWithLinks[i] += '&' + stringToAppend;
                                }
                            } else if (typeof objWithLinks[i] === 'object') {
                                this._appendStringToLinks(objWithLinks[i], stringToAppend);
                            }
                        }
                    }
                }
            }
        },
        
        _wrapLinks(data, paramsToLinks) {
            let paramsToLinksArr = [];
            for (let i in paramsToLinks) {
                if (paramsToLinks.hasOwnProperty(i)) {
                    paramsToLinksArr.push(i + '=' + paramsToLinks[i]);
                }
            }
            
            paramsToLinks = paramsToLinksArr.join('&');
            if (data) {
                this._appendStringToLinks(data, paramsToLinks);
            }
        }
    };
    
    if (typeof mbr !== 'undefined') {
        mbr.responseParser = responseParser;
    }

    if (typeof svt !== 'undefined') {
        svt.responseParser = responseParser;
    }
})();
'use strict';

let pricebar = {
    type: '',
    data: {},
    css: "#market_context_headcrab_container{position:absolute!important;top:-40px!important;left:0!important}#market_context_headcrab_container_relative{position:relative!important}#market_context_headcrab *{margin:0;padding:0;text-shadow:none;background:0 0;color:#000;-webkit-font-smoothing:initial!important;-moz-osx-font-smoothing:initial!important;text-rendering:initial!important;text-indent:0!important}#market_context_headcrab a{border:0!important;outline:0!important;font-style:normal}#market_context_headcrab .pb-sitebar-right-action{cursor:pointer!important}html>body>:not(#mbr-citilink-container):not(#mbr-citilink-container):not(#mbr-citilink-container)#market_context_headcrab,#market_context_headcrab .pb-cell{transition:background .2s ease 0s;background:#fadf75}#market_context_headcrab:hover,#market_context_headcrab.hover,#market_context_headcrab:active,#market_context_headcrab.active,#market_context_headcrab:hover .pb-cell,#market_context_headcrab.hover .pb-cell,#market_context_headcrab:active .pb-cell,#market_context_headcrab.active .pb-cell{background:#ffeeae!important}html>body>:not(#mbr-citilink-container):not(#mbr-citilink-container):not(#mbr-citilink-container)#market_context_headcrab,#market_context_headcrab{display:table!important;visibility:visible!important;opacity:100!important;font:13px/38px Arial,sans-serif!important;cursor:default;color:#000;width:100%!important;min-width:800px!important;height:35px!important;position:fixed;top:0;left:0;right:0;z-index:2147483647;border-collapse:collapse;text-transform:none!important;border-bottom:1px solid #c8c3ad;padding:0!important;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.13);-moz-box-shadow:0 1px 3px rgba(0,0,0,.13);box-shadow:0 1px 3px rgba(0,0,0,.13)}#market_context_headcrab .pb-sitebar-cnt *{font:13px/38px Arial,sans-serif!important}#market_context_headcrab .pb-sitebar-cnt strong{font-weight:700!important}#market_context_headcrab .pb-sitebar-cnt span,#market_context_headcrab .pb-sitebar-btns span,#market_context_headcrab .pb-sitebar_popover span,#market_context_headcrab .pb-cell span{background:0 0;display:inline;font-style:normal;float:inherit;padding:0;width:auto}#market_context_headcrab .pb-sitebar_popover p{background:0 0;font-style:normal;float:inherit;padding:0;text-align:inherit}#market_context_headcrab img{visibility:visible;position:inherit}#market_context_headcrab .pb-dash{font:13px/38px Arial,sans-serif!important;border:0!important}#market_context_headcrab strong{font-weight:700!important}#market_context_headcrab .pb-cell{display:table-cell;vertical-align:top!important;white-space:nowrap;text-align:left!important;font:13px/38px Arial,sans-serif!important;color:#000!important}#market_context_headcrab .pb-sitebar-logo{vertical-align:middle!important;width:50px}#market_context_headcrab .pb-sitebar-logo img{display:block!important;max-width:inherit!important;margin:0 14px 0 11px!important;max-height:37px!important}#market_context_headcrab .pb-sitebar-options{width:89px;padding:0 5px 0 27px;text-align:right!important;box-sizing:initial!important;font-size:0!important}#market_context_headcrab .pb-sitebar-i,#market_context_headcrab .pb-sitebar-button .pb-caret,.pb-sitebar_popover-close,.pb-icheckbox,#market_context_headcrab .pb-sitebar_popover .pb-checkbox-label input,#market_context_headcrab .pb-sitebar_popover .pb-checkbox-label .jq-checkbox,#market_context_headcrab .pb-i-delivery,#market_context_headcrab .pb-disclaimer-i,#market_context_headcrab .pb-i{width:16px;height:16px;text-indent:-9999px!important;display:inline-block;*display:inline;*zoom:1;vertical-align:top!important;overflow:hidden;margin:11px 6px 0 7px!important;position:relative;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJIAAAAxCAYAAAAx8/DOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0IzNUFGRTZFMzZBMTFFNTlCMkNGRDVERkQ4RDNGQTciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0IzNUFGRTVFMzZBMTFFNTlCMkNGRDVERkQ4RDNGQTciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEJCN0E4RkI1NEEwMTFFNUI2REU4REJGQ0Q4NkVCQ0QiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEJCN0E4RkM1NEEwMTFFNUI2REU4REJGQ0Q4NkVCQ0QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7K0iaXAAAWU0lEQVR42uycDVAU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) 0 0 no-repeat}#market_context_headcrab .pb-sitebar_popover .pb-checkbox-label{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAWUlEQVR42mP4//8/AyUYBoSAWBuIjYDYGA82AGJFIGYBaYIZwAfEOkDMxUAYMAGxFBCrIxugCHUBKQBkITvMADUg5iHRALCeUQOGlQEUJySKkzJlmYnS7AwAm1iSw3nOshwAAAAASUVORK5CYII=) 0 4px no-repeat;cursor:pointer;font-weight:400!important;font-size:1em!important;color:#000!important;line-height:24px}#market_context_headcrab .pb-sitebar_popover .pb-checkbox-label.checked{background:url(data:image/png;base64,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) 0 2px no-repeat}#market_context_headcrab .pb-sitebar_popover .pb-checkbox-label input{opacity:0!important;cursor:pointer}#market_context_headcrab .pb-sitebar-close{background-position:-32px 0;margin-left:5px}#market_context_headcrab:hover .pb-sitebar-close{background-position:-32px -16px}#market_context_headcrab .pb-sitebar-close:hover{background-position:-32px -32px}#market_context_headcrab:hover .pb-sitebar-question{background-position:0 -16px}#market_context_headcrab .pb-sitebar-question:hover{background-position:0 -32px}#market_context_headcrab .pb-sitebar-btns{text-align:right!important;vertical-align:middle!important;font-style:normal!important}#market_context_headcrab .pb-sitebar-button{cursor:pointer;*cursor:pointer;height:26px;display:inline-block;*display:inline;*zoom:1;text-decoration:none;text-align:center;color:#000!important;padding:0 22px;line-height:25px!important;background:transparent;border:1px solid rgba(0,0,0,.2)!important;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;transition:all .2s ease 0s}#market_context_headcrab .pb-sitebar-settings{background-position:-16px 0!important}#market_context_headcrab:hover .pb-sitebar-settings{background-position:-16px -16px!important}#market_context_headcrab .pb-sitebar-settings:hover{background-position:-16px -32px!important}#market_context_headcrab .pb-sitebar-btns .pb-sitebar-button{margin:0 2px 0 3px!important;*margin:0 4px 0 5px!important;vertical-align:middle!important;position:relative;top:-1px;font-weight:400;font-style:normal;font-size:inherit!important}#market_context_headcrab .pb-sitebar-button-all~.pb-sitebar-button{right:249px}#market_context_headcrab .pb-sitebar-button-all{background:#fff}#market_context_headcrab .pb-sitebar-button-all .pb-caret{vertical-align:middle!important;background-position:-64px 0;margin:0 -3px 0 5px!important;border:0!important;padding:0!important}#market_context_headcrab .pb-sitebar-button-all:hover .pb-caret,#market_context_headcrab .pb-sitebar-button-all:active .pb-caret{}#market_context_headcrab.shoplist.shoplist .pb-sitebar-button .pb-caret{background-position:-64px -32px;padding:0!important}#market_context_headcrab .pb-sitebar-cnt{text-align:left;white-space:nowrap}#market_context_headcrab .pb-sitebar-cnt div{display:inline-block;vertical-align:top!important;line-height:inherit!important}#market_context_headcrab .pb-sitebar-text,#market_context_headcrab .pb-offer-text{text-overflow:ellipsis;overflow:hidden;max-width:100%;float:left}#market_context_headcrab .pb-sitebar-badge{width:28px;float:left}#market_context_headcrab .pb-sitebar-badge .pb-badge{margin-top:13px}#market_context_headcrab .pb-sitebar-cnt .pb-sitebar-price{font-weight:700!important;background:none!important;position:relative!important}#market_context_headcrab .pb-sitebar-cnt div.pb-sitebar-price-delivery{min-width:20%;color:#898163!important;max-width:240px!important;overflow:hidden;text-overflow:ellipsis;display:inline-block}#market_context_headcrab .pb-sitebar-cnt div.pb-sitebar-price-delivery img{height:8px!important;margin-left:2px;vertical-align:baseline;visibility:inherit!important;display:inline-block}#market_context_headcrab .pb-sitebar-welcome .settings-link{color:#777!important}#market_context_headcrab .pb-sitebar_popover{cursor:auto;position:fixed;top:53px;right:38px;width:356px;padding:45px 40px 25px 50px;font:12px/24px arial,sans-serif;color:#000;background:#fff;border:1px solid rgba(0,0,0,.1);text-align:left!important;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 10px 20px rgba(0,0,0,.4);-moz-box-shadow:0 10px 20px rgba(0,0,0,.4);box-shadow:0 10px 20px rgba(0,0,0,.4)}#market_context_headcrab .pb-sitebar_popover_large{width:737px}#market_context_headcrab .pb-sitebar_popover_clothes{width:612px}#market_context_headcrab .pb-sitebar_popover *{margin:0;padding:0;font-family:arial,sans-serif!important}#market_context_headcrab .pb-sitebar_popover a{color:#669!important;text-decoration:underline!important;display:inline!important;border:0!important;font-weight:400!important;cursor:pointer!important;font-size:inherit}#market_context_headcrab .pb-sitebar_popover a.pb-color{color:#070!important;outline:0}#market_context_headcrab .pb-sitebar_popover .pb-block{display:block!important}#market_context_headcrab .pb-underline{text-decoration:underline!important}#market_context_headcrab a.pb-newline{display:inline-block!important}#market_context_headcrab .pb-sitebar_popover a:hover,#market_context_headcrab .pb-sitebar_popover a:active{color:red!important;text-decoration:underline!important}#market_context_headcrab .pb-sitebar_popover_footer{background:inherit;height:50px!important}#market_context_headcrab .pb-product-shop{height:50px!important}#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover_footer .pb-items{margin:0 -7px 0 -8px!important;padding:0!important;list-style:none!important}#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover_footer .pb-item{margin:0 7px 0 8px!important;list-style:none!important;display:inline!important;color:#999!important}#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover_footer a{color:#4a4a4a!important;font-size:11px!important}#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover_footer a:hover,#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover_footer a:active{color:#2a2a2a!important}#market_context_headcrab .pb-sitebar_popover .pb-product-all .pb-sitebar_popover_footer{margin:20px -30px -30px;padding:19px 30px}#market_context_headcrab .pb-sitebar_popover a.link-inside,#market_context_headcrab .pb-sitebar_popover a.link-inside:hover{text-decoration:none!important}#market_context_headcrab .pb-sitebar_popover a.link-inside{border-bottom:1px dashed!important}#market_context_headcrab .pb-sitebar_popover ul,#market_context_headcrab .pb-sitebar_popover li{list-style:none!important;font-size:1em!important}#market_context_headcrab .pb-sitebar_popover h1{border:0!important;position:static!important;height:inherit;text-transform:none;display:block}#market_context_headcrab .pb-sitebar_popover h1 strong{float:none}#market_context_headcrab .pb-sitebar_popover p{font-size:1em!important;color:#000!important;margin:0 0 2em!important}#market_context_headcrab .pb-sitebar_popover label{font-weight:400!important}#market_context_headcrab .pb-sitebar_popover_product{right:123px;padding:30px 30px 0}#market_context_headcrab.shoplist .pb-sitebar_popover_product,#market_context_headcrab.shoplist .pb-sitebar_popover_clothes{display:block!important}#market_context_headcrab .pb-sitebar_popover .pb-title{font:700 12px/24px arial,sans-serif!important;color:#000!important;margin:0!important;text-align:left!important;border:0!important}#market_context_headcrab .pb-sitebar_popover_policy .pb-title{font-weight:400!important;margin:0 0 16px!important}#market_context_headcrab .pb-sitebar_popover_opt_out .pb-title.pb-title_vendor{margin:0!important;margin-bottom:0!important}#market_context_headcrab .pb-sitebar_popover .pb-header{margin:1px 0 20px!important}#market_context_headcrab .pb-sitebar_popover .pb-header .pb-title,#market_context_headcrab .pb-sitebar_popover .pb-header img{display:inline-block!important;*display:inline!important;*zoom:1!important;vertical-align:middle!important;width:48px}#market_context_headcrab .pb-sitebar_popover .pb-header img{margin-right:16px!important}#market_context_headcrab .pb-sitebar_popover .pb-header .pb-title{font:700 22px/24px arial,sans-serif!important;width:70%!important}#market_context_headcrab .pb-sitebar_popover_opt_out .pb-title{font-weight:400!important;margin:0 0 16px!important}#market_context_headcrab .pb-sitebar_popover .pb-footer{color:#a9a9a9!important;font-size:11px!important;line-height:18px!important}#market_context_headcrab .pb-sitebar_popover_opt_out .pb-footer a{white-space:nowrap}#market_context_headcrab .pb-sitebar_popover .pb-checkbox-label{margin:1em 0 0 -22px!important;padding:0 0 0 22px!important;position:relative!important;display:block!important;width:auto!important}#market_context_headcrab .pb-sitebar_popover .pb-icheckbox,#market_context_headcrab .pb-sitebar_popover .pb-checkbox-label input,#market_context_headcrab .pb-sitebar_popover .pb-checkbox-label .jq-checkbox{padding:0;background-position:-80px 0;display:block;position:absolute!important;left:0!important;top:4px!important;width:16px!important;height:16px!important}#market_context_headcrab .pb-sitebar_popover .pb-checkbox-label input{top:-7px!important;left:-8px!important}#market_context_headcrab .pb-sitebar_popover .pb-icheckbox:hover,#market_context_headcrab .pb-sitebar_popover .pb-icheckbox.hover{background-position:-80px -16px}#market_context_headcrab .pb-sitebar_popover .pb-icheckbox.checked{background-position:-80px -32px;height:17px!important;top:2px!important}#market_context_headcrab .pb-sitebar_popover .pb-checkbox-label:first-child{margin-top:0!important}#market_context_headcrab .pb-sitebar_popover .pb-checkbox-label b{display:block!important;font-weight:700!important}#market_context_headcrab .pb-sitebar_popover_settings .pb-btn{margin-top:15px!important;margin-bottom:10px!important}#market_context_headcrab .pb-sitebar_popover .pb-btn-cnt{margin:0 -10px 1.25em 0!important}#market_context_headcrab .pb-sitebar_popover_opt_in .pb-btn-cnt{margin:0 0 .7em!important}#market_context_headcrab .pb-sitebar_popover_opt_out p+.pb-btn-cnt{margin-top:-.7em!important}#market_context_headcrab .pb-sitebar_popover_opt_in h1{width:initial}#market_context_headcrab .pb-sitebar_popover .pb-btn{display:inline-block!important;margin:0 10px 10px 0;padding:0 19px;text-align:center!important;text-decoration:none!important;font:13px/25px Arial,sans-serif!important;color:#000!important;min-width:118px;height:28px;border:1px solid rgba(0,0,0,.2)!important;transition:all .2s ease 0s;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}#market_context_headcrab .pb-sitebar_popover .pb-btn:last-child{margin-right:0;*margin-right:0}#market_context_headcrab .pb-sitebar_popover .pb-btn:hover,#market_context_headcrab .pb-sitebar_popover .pb-btn:focus,#market_context_headcrab .pb-sitebar_popover .pb-btn:active{color:#000!important;text-decoration:none!important}#market_context_headcrab .pb-sitebar_popover .pb-btn:hover{border-color:rgba(0,0,0,.3)!important}#market_context_headcrab .pb-sitebar_popover .pb-btn:focus,#market_context_headcrab .pb-sitebar_popover .pb-btn:active{background:#f6f5f3;border-color:rgba(0,0,0,.2)!important}#market_context_headcrab .pb-sitebar_popover .pb-btn-primary{min-width:128px;background:#ffdb4d;border-color:transparent!important}#market_context_headcrab .pb-sitebar_popover .pb-btn-primary:hover,#market_context_headcrab .pb-sitebar_popover .pb-btn-primary:focus,#market_context_headcrab .pb-sitebar_popover .pb-btn-primary:active{border-color:transparent!important;background:#ffd633}#market_context_headcrab .pb-sitebar_popover .pb-btn-success{color:rgba(0,0,0,.6)!important;background:#7ED321;border:1px solid #71BA21!important}#market_context_headcrab .pb-sitebar_popover .pb-btn-success:hover{color:rgba(0,0,0,.6)!important;border-color:#5AA409!important}#market_context_headcrab .pb-sitebar_popover .pb-btn-success:focus,#market_context_headcrab .pb-sitebar_popover .pb-btn-success:active{color:rgba(0,0,0,.6)!important;background:#91E436;border-color:#5AA409!important}#market_context_headcrab .pb-sitebar_popover .pb-btn-block{display:block!important}#market_context_headcrab .pb-sitebar_popover .pb-btn-lg{height:38px;line-height:35px!important}#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover-close{position:absolute;right:3px;top:-3px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJIAAAAxCAYAAAAx8/DOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0IzNUFGRTZFMzZBMTFFNTlCMkNGRDVERkQ4RDNGQTciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0IzNUFGRTVFMzZBMTFFNTlCMkNGRDVERkQ4RDNGQTciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEJCN0E4RkI1NEEwMTFFNUI2REU4REJGQ0Q4NkVCQ0QiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEJCN0E4RkM1NEEwMTFFNUI2REU4REJGQ0Q4NkVCQ0QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7K0iaXAAAWU0lEQVR42uycDVAU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) -48px 0 no-repeat}#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover-close:hover{text-decoration:none!important;background-position:-48px -16px}#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover-close:focus,#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover-close:active{text-decoration:none!important;background-position:-48px -32px}#market_context_headcrab .pb-product-best{border-bottom:solid 1px #eee;position:relative;overflow:hidden;padding-top:4px;padding-bottom:9px;margin-top:-4px;margin-bottom:11px}#market_context_headcrab .pb-product-best-img{width:70px;float:left}#market_context_headcrab .pb-product-best-img img{border:1px solid #eee;max-width:48px;display:block}#market_context_headcrab .pb-product-best-txt{width:267px;float:left}#market_context_headcrab .pb-sitebar_popover h1.pb-disclaimer{position:absolute!important;color:#999!important;right:30px;top:6px;font-size:12px!important;font-weight:inherit!important}#market_context_headcrab .pb-product-best-btn{padding-top:28px;width:118px;float:right;clear:right}#market_context_headcrab .pb-product-best-btn .pb-btn{width:118px;min-width:118px}#market_context_headcrab .pb-product-best-btn .pb-btn:hover{text-decoration:none!important}#market_context_headcrab .pb-divider-cell{padding:0 27px!important;border:0!important}#market_context_headcrab .pb-product-all .pb-divider{width:100%!important;border:0!important;height:1px!important;background:#e5e5e5!important;display:block!important;visibility:visible!important;margin:18px 0 11px!important}#market_context_headcrab .pb-product-best h1,#market_context_headcrab .pb-product-all h1{color:#999;font-weight:400;font-size:13px;padding:4px 0 2px;text-align:left}#market_context_headcrab .pb-product-best h1{padding:0 0 2px;margin:0}#market_context_headcrab ul.pb-products{margin:0 -30px -2px!important}#market_context_headcrab .pb-products li,#market_context_headcrab .pb-products p{*zoom:1;margin:0!important;line-height:inherit!important}#market_context_headcrab .pb-products li:hover{background:#ffeba0}#market_context_headcrab .pb-products li:before,#market_context_headcrab .pb-products p:before,#market_context_headcrab .pb-products li:after,#market_context_headcrab .pb-products p:after{display:table;content:\" \"}#market_context_headcrab .pb-products li:after,#market_context_headcrab .pb-products p:after{clear:both}#market_context_headcrab .pb-products a{display:block!important;*zoom:1;position:relative;padding:2px 0 1px;overflow:hidden}#market_context_headcrab .pb-products a:hover,#market_context_headcrab .pb-products a:active{color:#669!important}#market_context_headcrab .pb-products .pb-products-name{float:left;max-width:242px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}#market_context_headcrab .pb-product-best .pb-products .pb-products-name{max-width:177px}#market_context_headcrab .pb-products .pb-products-price{font-size:13px!important;float:right!important;clear:right!important;font-weight:700!important;color:#000!important;text-align:right!important;margin:1px 0 0 10px!important}#market_context_headcrab .pb-products-rate{width:85px;float:right;clear:right;margin-top:4px;margin-right:62px}#market_context_headcrab .pb-products-rate,#market_context_headcrab .pb-products-rate-active{height:16px;overflow:hidden;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAgCAYAAAD0S5PyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAmZJREFUeNqkVc9rE0EUnk21TVODLXiwSXUxEsRLCj2VoJcUcoiiRwVz8JhDyCHgxYO39uTV/AGW/gHtIYcWcmghAQOiufTctIUgMSYUadGU9Xvr2zKdzM7S9MHHzM578/Z7P2bGchxHmMSyrEkMMHP++tmERLDMMMRYTsDCcxLh+VhMwplMZiKVSt3EfNLP6EZQKPl8XnQ6HdFqtYjRHy1jv8Ra//kv9Pv9UK/XE4lEYojvY609L0aBeQkxIF4ul23oXRQKBZt1dxVEXSactNvAbLVaFbFYTEQiEZFMJi/9sNlsiuFwKMBO5HI5WuoDA5eJB6oCcL9SqVwwUEE6siHbi32yE3ZEVYjX6/URB7VajRzEyUbeE9LkiCowwB9H8sdrv9gmsE/C2WzWnTQaDTcXJOgZGqa11VHCIbnX7XbtYrFocwXmS6WS3W636XtB3adzMpVOp8mYMEstw5gDExvda6s5GWk2lHuOq/QTujNFF8ZwBziBbmAKh/olpK5L+gmyMTJR5WTPWsJwGn3q7F/nPskDr4xXhokJWBD1I7e1hXgMNs44TDJc4kfA4rjhvJHmr68cDkKhMnf4miA5AB7oQnKdYEMR87fMzAM5eajYfwXUW3/dux4/AbeANe5OP1mSTwzwns7lpXDA6CWGjaAnAvKb8oXQNrU5gSOqwhZfPDppAy/g4LtvdVj5wcDinezAVOKswclKYIkRDiX7Bx19XvrC75OX1GO6b+RS65gsswMyWgWeAGngI+vjavfqXsDnwCEdPPxtV84FWG5j/Aw8A76ZmFD5FhUHXtJ3MKSAc3n9nwADAP67YTz5bbWmAAAAAElFTkSuQmCC) 0 0 repeat-x}#market_context_headcrab .pb-products-rate-active{display:block;background-position:0 -16px;text-indent:-9999em!important;position:inherit}#market_context_headcrab .pb-products-rate-active-0{width:0}#market_context_headcrab .pb-products-rate-active-1{width:17px}#market_context_headcrab .pb-products-rate-active-2{width:34px}#market_context_headcrab .pb-products-rate-active-3{width:51px}#market_context_headcrab .pb-products-rate-active-4{width:68px}#market_context_headcrab .pb-products-rate-active-5{width:100%}#market_context_headcrab .pb-products-txt{width:337px;float:left;padding-left:30px}#market_context_headcrab .track{width:1px!important;height:1px!important;position:absolute!important;bottom:0;right:0}#market_context_headcrab .sitebar__logo{position:absolute;top:0;left:0;width:80px;height:37px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAZFJREFUSA3tVD1Lw1AUfSdtI1U7unVQughuIghOdvCL+g+69we0g+DUUfFjUATt3C2DVipauqt/oqDoIP6BYLW93pS2vJDc4IuOFkJvzj33nLyXk4dC+Y5UyC9lT8xd7eWfQlpGkCWxe93PValngosGCvQnBtCfplBpPSqi5QEG9XxztDmr9+PUPoPtSqtIRPU4QtKMb4vSmayjoN4kchzcZ+BUF7ognMcRkmZ8Bh4pnbAvANWVBkzxgIFzkOctgmMqJPEDBgNigk6kAVPclyJ92BdZvWFYh6+ARdj51FArQAfwIhr8OrLAlyLsiwamkeXk9RVwD1g7iaQ9P5OxM83j9bNkYF0a4EXW7X/sEilbg8clFFw+s9pEaKSgmpeHG+/j5rAQX/KIyMdHnY+P4uie99UTaXqik9nptlNecUe9sP/IFQwGOLLoqSWuG5ZlXS9OrT1Uq+iHif1jsXYg9CXncrktVqsNFUudTuc2Sj2KL30HNU5O1rs0oygPkS8ZRIkZ9SSDEuf91btYrfQDRZH/De3SdgrToMfXAAAAAElFTkSuQmCC);background-repeat:no-repeat;background:#fdeeaa;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.13);-moz-box-shadow:0 1px 3px rgba(0,0,0,.13);box-shadow:0 1px 3px rgba(0,0,0,.13)}#market_context_headcrab.lowest .pb-sitebar-text:not(.lowest){display:none!important}#market_context_headcrab.profitable .pb-sitebar-text:not(.profitable){display:none!important}#market_context_headcrab .pb-sitebar_popover .app-title{font:15px Arial,sans-serif}#market_context_headcrab .pb-sitebar_popover .pb-btn-attention{background:#FFD100!important;border-color:#AF9D00!important}#market_context_headcrab:not(.pb-sitebar_offer) .pb-sitebar_popover_opt_out{display:none}#market_context_headcrab:not(.pb-sitebar_offer) .pb-overlay{display:none}#market_context_headcrab .pb-sitebar-welcome{display:block!important}#market_context_headcrab .pb-sitebar_popover_feedback{right:67px;display:none}#market_context_headcrab .pb-sitebar_popover_feedback ul{padding:0!important;margin:11px 0 21px!important;list-style:none}#market_context_headcrab .pb-sitebar_popover_feedback li{margin:10px 0;list-style:none!important}#market_context_headcrab .pb-sitebar_popover_feedback li a.active{color:#000!important}#market_context_headcrab .pb-sitebar_popover_feedback li a.pb-link-underline{color:#777!important;text-decoration:underline!important}#market_context_headcrab .pb-sitebar_popover_feedback form{text-align:right;padding-bottom:5px;display:none}#market_context_headcrab .pb-sitebar_popover_feedback form.error-shown{display:block}#market_context_headcrab .pb-sitebar_popover_feedback form .pb-btn{margin:0;height:26px}#market_context_headcrab .pb-sitebar_popover_feedback li p{margin:10px 0;display:none;white-space:normal}#market_context_headcrab .pb-sitebar_popover_feedback textarea{border:1px solid #eee!important;width:100%!important;height:140px!important;margin:17px 0 8px!important;color:#000!important;padding:5px!important;background:#fff!important;font:12px/15px Arial,sans-serif!important;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}#market_context_headcrab a:after{background:none!important;height:0;width:0;margin:0}#market_context_headcrab.without_settings .pb-sitebar-options{width:60px}#market_context_headcrab.without_settings .pb-sitebar-settings{display:none!important}#market_context_headcrab.without_settings .pb-sitebar_popover_feedback{right:38px!important}#market_context_headcrab.without_settings .pb-sitebar_popover_product,#market_context_headcrab.without_settings .pb-sitebar_popover_clothes{right:94px!important}#market_context_headcrab.without_about_link .link-about{display:none!important}#market_context_headcrab .pb-sitebar_popover .link-underline{color:#777!important;text-decoration:underline!important}#market_context_headcrab .pb-sitebar_popover p{white-space:normal}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-title{margin:-18px 0 15px!important}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-title,#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-title *{font-size:20px!important;font-weight:400!important;line-height:24px!important}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-title a{color:#000!important}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes{margin:-9px -27px -11px -7px;padding:12px 0 0;height:330px;overflow-y:auto;font-size:0!important;position:relative}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-item{display:inline-block;*display:inline;*zoom:1;vertical-align:top;width:174px;margin:0 7px 12px;font-size:14px!important;position:relative}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-item a{display:block}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-img{border:1px solid #e5e5e5;height:228px;width:174px!important;display:table-cell;vertical-align:middle;text-align:center}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-img img{max-height:213px;display:inline-block;*display:inline;*zoom:1;margin:0 auto!important;max-width:172px!important}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-item-title,#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-item-title *,#market_context_headcrab .pb-sitebar_popover_product .pb-clothes .pb-product-price,#market_context_headcrab .pb-sitebar_popover_product .pb-clothes .pb-product-price *,#market_context_headcrab .pb-sitebar_popover_product .pb-clothes .pb-product-shops-name,#market_context_headcrab .pb-sitebar_popover_product .pb-clothes .pb-product-shops-name *{font-weight:700;font-size:14px!important}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-item-title{display:block!important;margin:11px 0 2px!important}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes .pb-product-price{padding:0!important;margin:0 0 1px}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes .pb-price-old{position:relative;font-size:11px!important;display:inline!important;top:0!important;margin:0!important;text-decoration:line-through;color:#999;font-weight:400}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes .pb-product-shops-name{width:100%!important;padding:0!important;margin:0 0 3px!important;color:#070!important;display:block!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes .pb-product-shops-delivery{width:100%!important;padding:0!important}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes .pb-sale{position:absolute;top:10px;left:10px;padding:0 6px;background:#48B714;color:#fff!important;font-size:13px!important;padding:0 7px;margin-right:6px;margin-bottom:-1px;line-height:1.465!important;display:inline-block;vertical-align:top;height:19px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-item:hover .pb-clothes-item-title{color:red!important}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-item:hover .pb-clothes-img,#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-item:active .pb-clothes-img{border-color:#fadf75}#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-img,#market_context_headcrab .pb-sitebar_popover_product .pb-clothes-item:hover .pb-clothes-item-title{-webkit-transition:all .2s ease;-moz-transition:all .2s ease;transition:all .2s ease}#market_context_headcrab .pb-overlay{position:fixed;top:38px;bottom:0;left:0;right:0;background:rgba(24,28,33,.89);z-index:232367364;cursor:default}#market_context_headcrab .pb-overlay-title{margin:0;padding:0;text-transform:none;font:100 20px/24px Arial,sans-serif!important;color:#fff!important;position:relative;text-align:center!important}#market_context_headcrab .pb-overlay-title:before,#market_context_headcrab .pb-overlay-title:after{content:'';border-left:2px dotted #fff;width:2px;margin:14px auto 12px;height:42px;display:block}#market_context_headcrab .pb-overlay-header{visibility:visible;text-align:center;margin-bottom:-12px}#market_context_headcrab .pb-overlay-header:after{content:'';border-left:4px inset transparent;border-right:4px inset transparent;border-top:9px solid #fff;display:inline-block;*display:inline;*zoom:1;top:-19px;left:-1px;position:relative}#market_context_headcrab .pb-overlay-header h6,#market_context_headcrab .pb-overlay-header:after{opacity:0}#market_context_headcrab.overlay-suggest-arrow .pb-overlay-header h6,#market_context_headcrab.overlay-suggest-arrow .pb-overlay-header:after{opacity:1!important;transition:opacity .2s linear}#market_context_headcrab .pb-overlay .pb-sitebar_popover{display:block;position:relative;top:0;left:auto;right:auto;margin:0 auto}#market_context_headcrab .pb-overlay .pb-sitebar_popover_opt_out{top:122px}#market_context_headcrab .pb-overlay-arr{display:block;position:absolute;top:12px;right:309px;width:132px;height:252px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAAD8CAYAAAC2NQwLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc5OEE3OTY0REJBMjExRTRBMUY4REE0QUIyNkY2REI0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjc5OEE3OTY1REJBMjExRTRBMUY4REE0QUIyNkY2REI0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjMwOEVGMTdEQjg5MTFFNEExRjhEQTRBQjI2RjZEQjQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjMwOEVGMThEQjg5MTFFNEExRjhEQTRBQjI2RjZEQjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4EML9xAAAJuklEQVR42uydC5CW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) 0 0 no-repeat;margin-left:200px;opacity:1}#market_context_headcrab.overlay-suggest-arrow .pb-overlay-arr{opacity:0!important;transition:opacity .2s linear}#market_context_headcrab.opt_in_overlay_white .pb-overlay-arr{background:url(data:image/png;base64,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) 0 0 no-repeat;opacity:.6;transition:opacity .5s linear}#market_context_headcrab.opt_in_overlay_white .pb-overlay{background:rgba(255,255,255,.95)}#market_context_headcrab.opt_in_overlay_white .pb-overlay-title{color:#000!important}#market_context_headcrab.opt_in_overlay_white .pb-overlay-title:before,#market_context_headcrab.opt_in_overlay_white .pb-overlay-title:after{border-color:#666}#market_context_headcrab.opt_in_overlay_white .pb-overlay-header:after{border-top-color:#666}#market_context_headcrab .pb-table{width:100%!important;table-layout:auto!important;border-spacing:0!important}#market_context_headcrab .pb-table,#market_context_headcrab .pb-table-cell{border:0!important;background:none!important}#market_context_headcrab .pb-table-cell{vertical-align:top!important;text-align:left!important;white-space:nowrap!important;padding:11px 5px 11px 0!important}#market_context_headcrab .pb-table-cell_right{text-align:right!important;padding-right:0!important}#market_context_headcrab .pb-table-cell_center{text-align:center!important}#market_context_headcrab .pb-block_full{margin:0 -30px}#market_context_headcrab .pb-block_full .pb-table-cell:first-child{padding-left:30px!important}#market_context_headcrab .pb-block_full .pb-table-cell:last-child{padding-right:30px!important}#market_context_headcrab .pb-product-stat .pb-table-cell{vertical-align:top!important}#market_context_headcrab .pb-product-stat .pb-table-cell:first-child{width:70%!important;white-space:normal!important}#market_context_headcrab .pb-product-stat .pb-table-cell:first-child a{white-space:nowrap!important;margin-right:6px!important}#market_context_headcrab .pb-product-stat td.pb-table-cell.pb-product-prices{width:75%!important}#market_context_headcrab .pb-grey-row .pb-table-cell{background:#F6F5F3!important;height:28px!important}#market_context_headcrab .pb-sitebar_popover .pb-product-discount{width:45px;display:inline-block;text-align:center;color:#fff;font-size:13px!important;border-radius:2px;background-color:#3db73a}#market_context_headcrab .pb-divider{background:#e5e5e5;height:1px!important;margin:11px 0 9px!important}#market_context_headcrab .pb-product-title+.pb-divider{margin-top:16px!important}#market_context_headcrab .pb-sitebar_popover_product,#market_context_headcrab .pb-sitebar_popover_product *{font-size:15px!important;line-height:18px!important}#market_context_headcrab .pb-sitebar_popover_product a,#market_context_headcrab .pb-sitebar_popover_product a:hover{text-decoration:none!important}#market_context_headcrab .pb-product-title,#market_context_headcrab .pb-product-title *{font-size:25px!important;font-weight:400!important;line-height:30px!important}#market_context_headcrab .pb-product-title{margin:-10px 0 -1px!important}#market_context_headcrab .pb-product-title a{color:#000!important;max-width:620px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block!important;width:inherit;height:inherit}#market_context_headcrab .pb-product-price,#market_context_headcrab .pb-product-price a{font-weight:700!important;color:#000!important}#market_context_headcrab .pb-product-price,#market_context_headcrab .pb-product-price_range{white-space:nowrap!important}#market_context_headcrab .pb-product-price_range{font-weight:100!important}#market_context_headcrab .pb-product-price_range,#market_context_headcrab .pb-product-total{color:#999}#market_context_headcrab .pb-product-price .pb-product-old-price_text{color:#999!important;font-size:12px!important;display:block;font-weight:400;text-decoration:line-through;margin-bottom:-11px;margin-top:-3px;text-align:right}#market_context_headcrab .pb-product-rate{color:#4A4A4A!important;font-size:13px!important}#market_context_headcrab .pb-product-rate .pb-tooltip-cnt{cursor:default}#market_context_headcrab .pb-product-rate .pb-product-rate-value{color:#fff!important;display:inline-block;vertical-align:middle!important;font-weight:700!important;font-size:13px!important;background:#3E9E00;position:relative;padding:3px 7px 0 2px;margin:0 0 0 6px;height:22px;width:36px;top:-1px;background:url(data:image/png;base64,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) 0 0 no-repeat;text-align:center;box-sizing:border-box}#market_context_headcrab .pb-rate{width:85px;display:inline-block;*display:inline;*zoom:1;vertical-align:top}#market_context_headcrab .pb-rate,#market_context_headcrab .pb-rate-active{height:16px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAgCAYAAAD0S5PyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQwMzk2QUU1RkRGQjExRTQ4RDE0Q0EyMjhDRTIyOTI0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQwMzk2QUU2RkRGQjExRTQ4RDE0Q0EyMjhDRTIyOTI0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDAzOTZBRTNGREZCMTFFNDhEMTRDQTIyOENFMjI5MjQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDAzOTZBRTRGREZCMTFFNDhEMTRDQTIyOENFMjI5MjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6ABngbAAACHElEQVR42qSVS0tbQRTHZ5Jo7BUlRqxYrY/blS5cqCAWd2njJlQtt5v6FfwaumiX2q/g1kVA8NEuFUHdFAoGevsiYpsSQ0tKMY/xf/SoiTp3rsmBH5mcOf6dc86ciVBKCYOFGa0FhNl6mLpEehmthQwCjSBSsT6t5SSUxhHTU2s6lMZ38AM8NqXTB8ZAA/gPLltWAj95PQKmeS1BEyiAPUktlpJ8ohk8BWWwA/5p/rEFJjiLbZAXN+4JqQ2Dl5rj9/LeMMdemOayPQJOVeDF2uE9Xy2mdqa5NlH2ZdnX6FeEUvkCBsEQ+z5xlwbAV5MI+bq4+lS8DfZfFr2NY4pe96Sb/RkW+MtssC/AMcKrsKOg0+MCdnKMp0jQx1AGTSJVlk72dxyt9T+s6ymwLDn7ICxn63xPpIOpcDwjKmbnluXW7XaM5DGt86VSV/fzb7/vfRIVUjN8J0JWMDBTUzpVaSjpeKaT+/DkNdbv8EcthnaXqjt7fgnnr2qSXbftQINage648GVqt1yUc9G4+/kqneiU634s/JmE5gLPiM5ob5FiSUDbndyWnUC1kncfQLyIxNyksbDq+mfirr02f92R4lVF8fJExa5jFDletVuQXZwFDmRRjBD4ts9tj2eSdqunSLhVJOijrNTb9K/TiciUmyJShwV64d/Q8xiyzmP0U3zy3l7Kbg0809Uku2nHELPsKYKxbzbdkJsxZwIMAE/AskGGPoD+AAAAAElFTkSuQmCC) 0 0 repeat-x}#market_context_headcrab .pb-rate-active{display:block;background-position:0 -16px;text-indent:-9999em!important;background-color:#fff;font-size:0!important;position:inherit}#market_context_headcrab .pb-rate-active-0{width:0}#market_context_headcrab .pb-rate-active-1{width:17px}#market_context_headcrab .pb-rate-active-2{width:34px}#market_context_headcrab .pb-rate-active-3{width:51px}#market_context_headcrab .pb-rate-active-4{width:68px}#market_context_headcrab .pb-rate-active-5{width:100%}#market_context_headcrab .pb-product-shops{margin-top:13px}#market_context_headcrab .pb-product-shops tr{cursor:pointer}#market_context_headcrab .pb-product-shops tr:not(.pb-no-hover):hover .pb-table-cell,#market_context_headcrab .pb-product-shops tr:not(.pb-no-hover):active .pb-table-cell,#market_context_headcrab .pb-product-shops tr:not(.pb-no-hover):hover .pb-rate-active,#market_context_headcrab .pb-product-shops tr:not(.pb-no-hover):active .pb-rate-active{background-color:#FFEBA0!important}#market_context_headcrab .pb-product-shops-name{width:190px!important;white-space:normal!important}#market_context_headcrab .pb-product-shops-name,#market_context_headcrab .pb-product-price{padding-top:10px!important;padding-bottom:12px!important}#market_context_headcrab .pb-product-shops-badge{width:30px!important;padding-top:12px!important;padding-bottom:10px!important}#market_context_headcrab .pb-product-shops-name{width:160px!important;white-space:normal!important}#market_context_headcrab .pb-product-shops tr.pb-no-hover{cursor:default}#market_context_headcrab .pb-product-shops-rate{width:97px!important;padding:0 15px!important;vertical-align:middle!important}#market_context_headcrab .pb-product-shops-delivery .pb-link-mask{max-width:133px;color:#4A4A4A;display:inline-block;overflow:hidden;text-overflow:ellipsis}#market_context_headcrab .pb-product-shops tr:hover .pb-product-shops-delivery,#market_context_headcrab .pb-product-shops tr:active .pb-product-shops-delivery,#market_context_headcrab .pb-product-shops tr:hover .pb-price-old,#market_context_headcrab .pb-product-shops tr:active .pb-price-old{color:#9A9069}#market_context_headcrab .pb-product-shops tr:hover .pb-price-old:after,#market_context_headcrab .pb-product-shops tr:active .pb-price-old:after{background:rgba(154,144,105,.3)}#market_context_headcrab .pb-product-shops .pb-product-price{vertical-align:middle!important;height:25px;padding:0 15px!important}#market_context_headcrab .pb-product-shops .pb-product-shops-btn{width:100px!important;padding-top:6px!important;padding-bottom:0!important}#market_context_headcrab .pb-product-shops .pb-product-shops-btn .pb-btn{min-width:10px!important;margin:0}#market_context_headcrab .pb-product-shops-name .pb-link-mask{color:#070!important;display:block!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;max-width:160px!important}#market_context_headcrab .pb-product-shops .pb-table-cell:hover .pb-link-mask,#market_context_headcrab .pb-product-shops .pb-table-cell:hover .pb-link-mask span,#market_context_headcrab .pb-product-shops .pb-link-mask:hover,#market_context_headcrab .pb-product-shops .pb-link-mask:hover span{color:red!important}#market_context_headcrab .pb-product-shops .pb-table-cell:hover .pb-price-old:after,#market_context_headcrab .pb-product-shops .pb-link-mask:hover .pb-price-old:after{background:rgba(255,0,0,.3)}#market_context_headcrab .pb-product-shops-delivery,#market_context_headcrab .pb-product-shops-delivery *,#market_context_headcrab .pb-product-total,#market_context_headcrab .pb-product-total *{font-size:12px!important}#market_context_headcrab .pb-i-delivery{background-position:-112px 0;vertical-align:middle!important;margin:0 9px 0 -1px!important}#market_context_headcrab .pb-product-shops tr:hover .pb-i-delivery,#market_context_headcrab .pb-product-shops tr:active .pb-i-delivery{background-position:-112px -16px}#market_context_headcrab .pb-product-shops .pb-table-cell:hover .pb-i-delivery,#market_context_headcrab .pb-product-shops .pb-link-mask:hover .pb-i-delivery{background-position:-112px -32px}#market_context_headcrab .pb-product-shop{padding:6px 0 4px;margin-top:3px}#market_context_headcrab .pb-product-shop .pb-table-cell{vertical-align:middle!important;color:#4A4A4A}#market_context_headcrab .pb-product-shop_clothes .pb-table-cell{padding:5px 0!important}#market_context_headcrab .pb-product-shop .pb-table-cell,#market_context_headcrab .pb-product-shop .pb-table-cell *{font-size:13px!important}#market_context_headcrab .pb-product-shop .pb-product-shop-title span{white-space:nowrap!important;display:inline-block!important;*display:inline!important;*zoom:1!important;overflow:hidden!important;text-overflow:ellipsis!important;max-width:320px!important;vertical-align:top!important}#market_context_headcrab .pb-product-shop,#market_context_headcrab .pb-product-shop .pb-rate-active{background-color:#F6F5F3}#market_context_headcrab .pb-product-shop .pb-rate{margin:0 4px}#market_context_headcrab .pb-product-shop .pb-rate-active{font-size:0!important}#market_context_headcrab .pb-product-shop .pb-table-cell:first-child{white-space:normal!important;overflow:visible!important;text-overflow:none!important;width:60%!important}#market_context_headcrab .pb-product-shop .pb-product-total,#market_context_headcrab .pb-product-shop .pb-product-total *{font-size:12px!important}#market_context_headcrab .pb-product-shop .pb-table{height:100%}#market_context_headcrab .pb-product-shops-name .pb-link-mask{text-decoration:underline}#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover_footer,#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover_footer *{font-size:11px!important;line-height:14px!important}#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover_footer a{text-decoration:underline!important;color:#4A4A4A!important}#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover_footer a:hover{color:red!important}#market_context_headcrab .pb-ya{color:red!important;text-decoration:underline!important}#market_context_headcrab .pb-sitebar_popover .pb-sitebar_popover_footer td{vertical-align:middle!important;height:28px}.pb-sitebar_popover_footer_clothes{width:100%}.pb-sitebar_popover_footer_clothes .pb-table-cell_first{width:36%}#market_context_headcrab .pb-table-cell .pb-tooltip-cnt{position:relative;display:inline-block;*display:inline;*zoom:1;cursor:pointer}#market_context_headcrab .pb-sitebar_popover .pb-tooltip{font:13px/15px Arial,sans-serif!important;color:#fff!important}#market_context_headcrab .pb-table-cell .pb-tooltip{background:rgba(50,50,50,.8);padding:4px 12px 0;position:absolute;top:50%;margin-top:-12px;z-index:10;display:block;visibility:hidden;height:18px;white-space:nowrap!important;opacity:0;transition:all .15s linear}#market_context_headcrab .pb-table-cell .pb-tooltip span{width:100%;height:100%;overflow:hidden;text-overflow:clip;-o-text-overflow:clip;display:inline-block;line-height:15px!important;color:#fff!important}#market_context_headcrab .pb-table-cell .pb-tooltip{margin-top:-11px}#market_context_headcrab .pb-table-cell.wrong-product .pb-tooltip{margin-top:-10px}#market_context_headcrab .pb-product-shops-rate .pb-tooltip{margin-top:-12px}#market_context_headcrab .pb-tooltip-cnt .pb-tooltip:after{position:absolute;content:'';top:50%;margin-top:-7px;line-height:0}#market_context_headcrab .pb-tooltip-cnt .pb-tooltip_left:after{border-width:7px 0 7px 7px;border-style:inset solid solid;border-color:transparent transparent transparent rgba(50,50,50,.8);right:-7px}#market_context_headcrab .pb-tooltip-cnt .pb-tooltip_right:after{border-width:7px 7px 7px 0;border-style:inset solid solid;border-color:transparent rgba(50,50,50,.8) transparent transparent;left:-7px}#market_context_headcrab .pb-tooltip_left{transition:all .15s linear;right:100%;margin-right:24px}#market_context_headcrab .pb-tooltip_right{left:100%;margin-left:24px;transition:all .15s linear}#market_context_headcrab .pb-tooltip-cnt .pb-tooltip_success{background:rgba(108,186,104,.9)}#market_context_headcrab .pb-tooltip-cnt .pb-tooltip_success.pb-tooltip_left:after{border-left-color:rgba(108,186,104,.9)}#market_context_headcrab .pb-tooltip-cnt .pb-tooltip_success.pb-tooltip_right:after{border-right-color:rgba(108,186,104,.9)}#market_context_headcrab .pb-tooltip-cnt .pb-tooltip_error{background:rgba(255,100,100,.9)}#market_context_headcrab .pb-tooltip-cnt .pb-tooltip_error.pb-tooltip_left:after{border-left-color:rgba(255,100,100,.9)}#market_context_headcrab .pb-tooltip-cnt .pb-tooltip_error.pb-tooltip_right:after{border-right-color:rgba(255,100,100,.9)}#market_context_headcrab .pb-tooltip-cnt:hover .pb-tooltip{visibility:visible;transition:all .15s linear .7s;opacity:1}#market_context_headcrab .pb-tooltip-cnt:hover .pb-tooltip_right{transition:all .15s linear .7s;margin-left:14px}#market_context_headcrab .pb-tooltip-cnt:hover .pb-tooltip_left{transition:all .15s linear .7s;margin-right:14px}#market_context_headcrab .pb-product-availability{color:#999;margin-top:10px}#market_context_headcrab .pb-badge{width:16px;height:16px;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjQzNnB4IiBoZWlnaHQ9Ijg3cHgiIHZpZXdCb3g9IjAgMCA0MzYgODciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMzk2Ljg1Miw0MC4yMjggQzQwMS4wMzQsNDAuMjI4IDQwMi43MDcsMzguNTU1IDQwMi43MDcsMzMuNjEzIEM0MDIuNzA3LDI4LjUyIDQwMS4wMzQsMjcgMzk2Ljg1MiwyNyBDMzkyLjY3MywyNyAzOTEsMjguNTIgMzkxLDMzLjYxMyBDMzkxLDM4LjU1NSAzOTIuNjczLDQwLjIyOCAzOTYuODUyLDQwLjIyOCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiMxQTE5MTgiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMzk2LjYxMyw0NyBDMzkxLjc0OSw0NyAzOTAsNDkuMjA0IDM5MCw1My45OTMgQzM5MCw1OC43ODMgMzkxLjc0OSw2MC42ODIgMzk2LjYxMyw2MC42ODIgQzQwMS40NzksNjAuNjgyIDQwMy4yMjgsNTguNzgzIDQwMy4yMjgsNTMuOTkzIEM0MDMuMjI4LDQ5LjIwNCA0MDEuNDc5LDQ3IDM5Ni42MTMsNDciIGlkPSJGaWxsLTI0IiBmaWxsPSIjMUExOTE4Ij48L3BhdGg+CiAgICAgICAgPHBhdGggZD0iTTM5Ni4zNTA1OTEsNjguMDM1IEMzODQuODcyNTkxLDY3LjgwOCAzODEuOTA4NTkxLDYzLjYyNyAzODEuOTA4NTkxLDU1LjE4OCBDMzgxLjkwODU5MSw0OS40ODggMzgyLjI4ODU5MSw0NS4xNTQgMzg3LjM4MTU5MSw0My4xNzggQzM4My4xMjQ1OTEsNDAuMDYyIDM4My4wNDg1OTEsMzYuODY4IDM4My4wNDg1OTEsMzQuMjg0IEwzODMuMDQ4NTkxLDMxLjY5OSBDMzgzLjUwNTU5MSwyMy4xMDggMzg2LjM5MzU5MSwxOS44NDEgMzk2LjM1MDU5MSwxOS44NDEgQzQwNi4zMDk1OTEsMTkuODQxIDQwOS4xOTc1OTEsMjMuMTA4IDQwOS42NTM1OTEsMzEuNjk5IEw0MDkuNjUzNTkxLDM0LjI4NCBDNDA5LjY1MzU5MSwzNi44NjggNDA5LjU3NzU5MSw0MC4wNjIgNDA1LjMyMDU5MSw0My4xNzggQzQxMC40MTU1OTEsNDUuMTU0IDQxMC43OTU1OTEsNDkuNDg4IDQxMC43OTU1OTEsNTUuMTg4IEM0MTAuNzk1NTkxLDYzLjYyNyA0MDcuODI5NTkxLDY3LjgwOCAzOTYuMzUwNTkxLDY4LjAzNSBMMzk2LjM1MDU5MSw2OC4wMzUgWiBNNDE1LjA1MTU5MSwyLjI4IEM0MTMuMzAyNTkxLDAuNTMyIDQxMS4wOTg1OTEsMCA0MDguNTkxNTkxLDAgTDM3NC42ODU1OTEsMCBDMzcyLjE3NzU5MSwwIDM2OS45NzM1OTEsMC41MzIgMzY4LjIyNDU5MSwyLjI4IEwzNTAuOTY5NTkxLDE5Ljc2NSBDMzQ4LjkxNzU5MSwyMS44MTYgMzQ4LjAwNDU5MSwyNC4yNSAzNDguMDA0NTkxLDI3LjA2MiBMMzQ4LjAwNDU5MSw2MC41ODYgQzM0Ny45MjY1OTEsNjMuMzk4IDM0OC44NDE1OTEsNjUuNDUgMzUwLjgxNzU5MSw2Ny40MjcgTDM2Ny43Njg1OTEsODQuMzc5IEMzNjkuNzQ1NTkxLDg2LjM1NSAzNzEuOTQ5NTkxLDg3LjI2NyAzNzQuNjg1NTkxLDg3LjI2NyBMNDA4LjU5MTU5MSw4Ny4yNjcgQzQxMS4zMjY1OTEsODcuMjY3IDQxMy41MzA1OTEsODYuMzU1IDQxNS41MDc1OTEsODQuMzc5IEw0MzIuNDU5NTkxLDY3LjQyNyBDNDM0LjQzNTU5MSw2NS41MjYgNDM1LjI3MjU5MSw2My4zOTggNDM1LjI3MjU5MSw2MC41ODYgTDQzNS4yNzI1OTEsNDkuMDMxIEM0MzUuMTk2NTkxLDQ4LjA0NCA0MzQuNjY0NTkxLDQ3LjUxMiA0MzMuNjc1NTkxLDQ3LjUxMiBMNDI4LjU4MzU5MSw0Ny41MTIgTDQyOC41ODM1OTEsNTEuMDg0IEM0MjguNTgzNTkxLDUzLjc0NCA0MjguMjAyNTkxLDU1LjExMiA0MjUuOTIyNTkxLDU1LjExMiBMNDIzLjY0MDU5MSw1NS4xMTIgQzQyMS4zNjE1OTEsNTUuMTEyIDQyMC45ODA1OTEsNTMuNzQ0IDQyMC45ODA1OTEsNTEuMDg0IEw0MjAuOTgwNTkxLDQ3LjUxMiBMNDE3LjQwODU5MSw0Ny41MTIgQzQxNC43NDg1OTEsNDcuNTEyIDQxMy4zNzk1OTEsNDcuMTMxIDQxMy4zNzk1OTEsNDQuODUgTDQxMy4zNzk1OTEsNDIuNDE4IEM0MTMuMzc5NTkxLDQwLjEzNyA0MTQuNzQ4NTkxLDM5Ljc1NyA0MTcuNDA4NTkxLDM5Ljc1NyBMNDIwLjk4MDU5MSwzOS43NTcgTDQyMC45ODA1OTEsMzYuMTgzIEM0MjAuOTgwNTkxLDMzLjUyNCA0MjEuMzYxNTkxLDMyLjE1NSA0MjMuNjQwNTkxLDMyLjE1NSBMNDI1LjkyMjU5MSwzMi4xNTUgQzQyOC4yMDI1OTEsMzIuMTU1IDQyOC41ODM1OTEsMzMuNTI0IDQyOC41ODM1OTEsMzYuMTgzIEw0MjguNTgzNTkxLDM5Ljc1NyBMNDMzLjY3NTU5MSwzOS43NTcgQzQzNC43Mzk1OTEsMzkuNzU3IDQzNS4yNzI1OTEsMzkuMTQ4IDQzNS4yNzI1OTEsMzguMDA5IEw0MzUuMjcyNTkxLDI3LjA2MiBDNDM1LjI3MjU5MSwyNC4yNSA0MzQuMjgzNTkxLDIxLjgxNiA0MzIuMzA3NTkxLDE5Ljc2NSBMNDE1LjA1MTU5MSwyLjI4IEw0MTUuMDUxNTkxLDIuMjggWiIgaWQ9IkZpbGwtMjUiIGZpbGw9IiMxQTE5MTgiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMzcxLjk0NiwyMSBMMzY1LjAyOCwyMSBDMzYyLjM2OSwyMSAzNjEsMjEuNDU3IDM2MSwyMy42NjEgTDM2MSwyNi4xNjkgQzM2MSwyOC4zNzQgMzYyLjM2OSwyOC44MjkgMzY1LjAyOCwyOC44MjkgTDM2Ni42MjUsMjguODI5IEMzNjcuNjEzLDI4LjgyOSAzNjguMDY4LDI5LjM2MiAzNjguMDY4LDMwLjg4MSBMMzY4LjA2OCw2My43MjEgQzM2OC4wNjgsNjYuMzgxIDM2OC41MjUsNjcuNzUgMzcwLjczLDY3Ljc1IEwzNzMuMzEzLDY3Ljc1IEMzNzUuNTE5LDY3Ljc1IDM3NS45NzYsNjYuMzgxIDM3NS45NzYsNjMuNzIxIEwzNzUuOTc2LDIzLjY2MSBDMzc1Ljk3NiwyMS40NTcgMzc0LjYwNiwyMSAzNzEuOTQ2LDIxIiBpZD0iRmlsbC0yNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik00MzQuODgyLDM3LjU0NyBDNDM0Ljg4MiwzOC42ODYgNDM0LjM0OSwzOS4yOTUgNDMzLjI4NSwzOS4yOTUgTDQyOC4xOTMsMzkuMjk1IEw0MjguMTkzLDM1LjcyMSBDNDI4LjE5MywzMy4wNjIgNDI3LjgxMiwzMS42OTMgNDI1LjUzMiwzMS42OTMgTDQyMy4yNSwzMS42OTMgQzQyMC45NzEsMzEuNjkzIDQyMC41OSwzMy4wNjIgNDIwLjU5LDM1LjcyMSBMNDIwLjU5LDM5LjI5NSBMNDE3LjAxOCwzOS4yOTUgQzQxNC4zNTgsMzkuMjk1IDQxMi45ODksMzkuNjc1IDQxMi45ODksNDEuOTU2IEw0MTIuOTg5LDQ0LjM4OCBDNDEyLjk4OSw0Ni42NjkgNDE0LjM1OCw0Ny4wNSA0MTcuMDE4LDQ3LjA1IEw0MjAuNTksNDcuMDUgTDQyMC41OSw1MC42MjIgQzQyMC41OSw1My4yODIgNDIwLjk3MSw1NC42NSA0MjMuMjUsNTQuNjUgTDQyNS41MzIsNTQuNjUgQzQyNy44MTIsNTQuNjUgNDI4LjE5Myw1My4yODIgNDI4LjE5Myw1MC42MjIgTDQyOC4xOTMsNDcuMDUgTDQzMy4yODUsNDcuMDUgQzQzNC4yNzQsNDcuMDUgNDM0LjgwNiw0Ny41ODIgNDM0Ljg4Miw0OC41NjkgTDQzNC44ODIsNjAuMTI0IEM0MzQuODgyLDYyLjkzNiA0MzQuMDQ1LDY1LjA2NCA0MzIuMDY5LDY2Ljk2NSBMNDE1LjExNyw4My45MTcgQzQxMy4xNCw4NS44OTMgNDEwLjkzNiw4Ni44MDUgNDA4LjIwMSw4Ni44MDUgTDM3NC4yOTUsODYuODA1IEMzNzEuNTU5LDg2LjgwNSAzNjkuMzU1LDg1Ljg5MyAzNjcuMzc4LDgzLjkxNyBMMzUwLjQyNyw2Ni45NjUgQzM0OC40NTEsNjQuOTg4IDM0Ny41MzYsNjIuOTM2IDM0Ny42MTQsNjAuMTI0IEwzNDcuNjE0LDI2LjYgQzM0Ny42MTQsMjMuNzg4IDM0OC41MjcsMjEuMzU0IDM1MC41NzksMTkuMzAzIEwzNjcuODM0LDEuODE4IEMzNjkuNTgzLDAuMDcgMzcxLjc4NywtMC40NjIgMzc0LjI5NSwtMC40NjIgTDQwOC4yMDEsLTAuNDYyIEM0MTAuNzA4LC0wLjQ2MiA0MTIuOTEyLDAuMDcgNDE0LjY2MSwxLjgxOCBMNDMxLjkxNywxOS4zMDMgQzQzMy44OTMsMjEuMzU0IDQzNC44ODIsMjMuNzg4IDQzNC44ODIsMjYuNiBMNDM0Ljg4MiwzNy41NDcgTDQzNC44ODIsMzcuNTQ3IFogTTQxOS4yOTcsLTIuNTkxIEM0MTYuMzMzLC01LjQ3OSA0MTIuNjA5LC03IDQwOC4xMjMsLTcgTDM3NC4zNzEsLTcgQzM2OS44ODYsLTcgMzY2LjA4NSwtNS40NzkgMzYzLjE5OCwtMi41OTEgTDM0NS4zMzIsMTUuMTk3IEMzNDIuNTIxLDE4LjAxMSAzNDEsMjEuNzM1IDM0MSwyNS44NDEgTDM0MSw2MC4xMjQgQzM0MSw2NC44MzcgMzQyLjU5Nyw2OC40ODYgMzQ1Ljc4OSw3MS42MDIgTDM2Mi43NDIsODguNTU0IEMzNjYuMDg1LDkxLjg5OCAzNjkuODEsOTMuNDIgMzc0LjYsOTMuMzQ0IEw0MDcuODk2LDkzLjM0NCBDNDEyLjUzMyw5My4zNDQgNDE2LjMzMyw5MS45NzQgNDE5Ljc1NCw4OC41NTQgTDQzNi43MDYsNzEuNjAyIEM0MzkuODIzLDY4LjQ4NiA0NDEuNDk1LDY0Ljc2MSA0NDEuNDk1LDYwLjEyNCBMNDQxLjQ5NSwyNS44NDEgQzQ0MS40OTUsMjEuNzM1IDQzOS45NzUsMTguMDExIDQzNy4xNjIsMTUuMTk3IEw0MTkuMjk3LC0yLjU5MSBMNDE5LjI5NywtMi41OTEgWiIgaWQ9IkZpbGwtMjciPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMzk2LjQ0Miw2MC45NzIgQzM5MS41NzgsNjAuOTcyIDM4OS44MjksNTkuMDczIDM4OS44MjksNTQuMjgzIEMzODkuODI5LDQ5LjQ5NCAzOTEuNTc4LDQ3LjI5IDM5Ni40NDIsNDcuMjkgQzQwMS4zMDgsNDcuMjkgNDAzLjA1Nyw0OS40OTQgNDAzLjA1Nyw1NC4yODMgQzQwMy4wNTcsNTkuMDczIDQwMS4zMDgsNjAuOTcyIDM5Ni40NDIsNjAuOTcyIEwzOTYuNDQyLDYwLjk3MiBaIE0zOTYuNDQyLDI2Ljk5MyBDNDAwLjYyNCwyNi45OTMgNDAyLjI5NywyOC41MTMgNDAyLjI5NywzMy42MDYgQzQwMi4yOTcsMzguNTQ4IDQwMC42MjQsNDAuMjIxIDM5Ni40NDIsNDAuMjIxIEMzOTIuMjYzLDQwLjIyMSAzOTAuNTksMzguNTQ4IDM5MC41OSwzMy42MDYgQzM5MC41OSwyOC41MTMgMzkyLjI2MywyNi45OTMgMzk2LjQ0MiwyNi45OTMgTDM5Ni40NDIsMjYuOTkzIFogTTQwNS40MTIsNDMuMzM3IEM0MDkuNjY5LDQwLjIyMSA0MDkuNzQ1LDM3LjAyNyA0MDkuNzQ1LDM0LjQ0MyBMNDA5Ljc0NSwzMS44NTggQzQwOS4yODksMjMuMjY3IDQwNi40MDEsMjAgMzk2LjQ0MiwyMCBDMzg2LjQ4NSwyMCAzODMuNTk3LDIzLjI2NyAzODMuMTQsMzEuODU4IEwzODMuMTQsMzQuNDQzIEMzODMuMTQsMzcuMDI3IDM4My4yMTYsNDAuMjIxIDM4Ny40NzMsNDMuMzM3IEMzODIuMzgsNDUuMzEzIDM4Miw0OS42NDcgMzgyLDU1LjM0NyBDMzgyLDYzLjc4NiAzODQuOTY0LDY3Ljk2NyAzOTYuNDQyLDY4LjE5NCBDNDA3LjkyMSw2Ny45NjcgNDEwLjg4Nyw2My43ODYgNDEwLjg4Nyw1NS4zNDcgQzQxMC44ODcsNDkuNjQ3IDQxMC41MDcsNDUuMzEzIDQwNS40MTIsNDMuMzM3IEw0MDUuNDEyLDQzLjMzNyBaIiBpZD0iRmlsbC0yOCIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik0yNDEuMDUyMzc2LDIuMjggQzIzOS4zMDMzNzYsMC41MzIgMjM3LjA5OTM3NiwwIDIzNC41OTEzNzYsMCBMMjAwLjY4NjM3NiwwIEMxOTguMTc4Mzc2LDAgMTk1Ljk3MzM3NiwwLjUzMiAxOTQuMjI1Mzc2LDIuMjggTDE3Ni45NjkzNzYsMTkuNzY1IEMxNzQuOTE3Mzc2LDIxLjgxNiAxNzQuMDA0Mzc2LDI0LjI1IDE3NC4wMDQzNzYsMjcuMDYyIEwxNzQuMDA0Mzc2LDYwLjU4NiBDMTczLjkyODM3Niw2My4zOTggMTc0Ljg0MTM3Niw2NS40NSAxNzYuODE3Mzc2LDY3LjQyNyBMMTkzLjc2OTM3Niw4NC4zNzkgQzE5NS43NDUzNzYsODYuMzU1IDE5Ny45NTAzNzYsODcuMjY3IDIwMC42ODYzNzYsODcuMjY3IEwyMzQuNTkxMzc2LDg3LjI2NyBDMjM3LjMyNjM3Niw4Ny4yNjcgMjM5LjUzMTM3Niw4Ni4zNTUgMjQxLjUwODM3Niw4NC4zNzkgTDI1OC40NTkzNzYsNjcuNDI3IEMyNjAuNDM1Mzc2LDY1LjUyNiAyNjEuMjcyMzc2LDYzLjM5OCAyNjEuMjcyMzc2LDYwLjU4NiBMMjYxLjI3MjM3Niw0OS4wMzEgQzI2MS4xOTYzNzYsNDguMDQ0IDI2MC42NjQzNzYsNDcuNTEyIDI1OS42NzYzNzYsNDcuNTEyIEwyNTQuNTgzMzc2LDQ3LjUxMiBMMjU0LjU4MzM3Niw1MS4wODQgQzI1NC41ODMzNzYsNTMuNzQ0IDI1NC4yMDIzNzYsNTUuMTEyIDI1MS45MjIzNzYsNTUuMTEyIEwyNDkuNjQxMzc2LDU1LjExMiBDMjQ3LjM2MTM3Niw1NS4xMTIgMjQ2Ljk4MDM3Niw1My43NDQgMjQ2Ljk4MDM3Niw1MS4wODQgTDI0Ni45ODAzNzYsNDcuNTEyIEwyNDMuNDA4Mzc2LDQ3LjUxMiBDMjQwLjc0ODM3Niw0Ny41MTIgMjM5LjM3OTM3Niw0Ny4xMzEgMjM5LjM3OTM3Niw0NC44NSBMMjM5LjM3OTM3Niw0Mi40MTggQzIzOS4zNzkzNzYsNDAuMTM3IDI0MC43NDgzNzYsMzkuNzU3IDI0My40MDgzNzYsMzkuNzU3IEwyNDYuOTgwMzc2LDM5Ljc1NyBMMjQ2Ljk4MDM3NiwzNi4xODMgQzI0Ni45ODAzNzYsMzMuNTI0IDI0Ny4zNjEzNzYsMzIuMTU1IDI0OS42NDEzNzYsMzIuMTU1IEwyNTEuOTIyMzc2LDMyLjE1NSBDMjU0LjIwMjM3NiwzMi4xNTUgMjU0LjU4MzM3NiwzMy41MjQgMjU0LjU4MzM3NiwzNi4xODMgTDI1NC41ODMzNzYsMzkuNzU3IEwyNTkuNjc2Mzc2LDM5Ljc1NyBDMjYwLjc0MDM3NiwzOS43NTcgMjYxLjI3MjM3NiwzOS4xNDggMjYxLjI3MjM3NiwzOC4wMDkgTDI2MS4yNzIzNzYsMjcuMDYyIEMyNjEuMjcyMzc2LDI0LjI1IDI2MC4yODMzNzYsMjEuODE2IDI1OC4zMDczNzYsMTkuNzY1IEwyNDEuMDUyMzc2LDIuMjgiIGlkPSJGaWxsLTI5IiBmaWxsPSIjMUExOTE4Ij48L3BhdGg+CiAgICAgICAgPHBhdGggZD0iTTE5OC45NDcsMjEgTDE5Mi4wMjksMjEgQzE4OS4zNjksMjEgMTg4LDIxLjQ1NyAxODgsMjMuNjYxIEwxODgsMjYuMTY5IEMxODgsMjguMzc0IDE4OS4zNjksMjguODI5IDE5Mi4wMjksMjguODI5IEwxOTMuNjI2LDI4LjgyOSBDMTk0LjYxNCwyOC44MjkgMTk1LjA3LDI5LjM2MiAxOTUuMDcsMzAuODgxIEwxOTUuMDcsNjMuNzIxIEMxOTUuMDcsNjYuMzgxIDE5NS41MjYsNjcuNzUgMTk3LjczMSw2Ny43NSBMMjAwLjMxNSw2Ny43NSBDMjAyLjUyLDY3Ljc1IDIwMi45NzYsNjYuMzgxIDIwMi45NzYsNjMuNzIxIEwyMDIuOTc2LDIzLjY2MSBDMjAyLjk3NiwyMS40NTcgMjAxLjYwNywyMSAxOTguOTQ3LDIxIiBpZD0iRmlsbC0zMCIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik0yNjAuODgxLDM3LjU0NyBDMjYwLjg4MSwzOC42ODYgMjYwLjM0OSwzOS4yOTUgMjU5LjI4NSwzOS4yOTUgTDI1NC4xOTIsMzkuMjk1IEwyNTQuMTkyLDM1LjcyMSBDMjU0LjE5MiwzMy4wNjIgMjUzLjgxMSwzMS42OTMgMjUxLjUzMSwzMS42OTMgTDI0OS4yNSwzMS42OTMgQzI0Ni45NywzMS42OTMgMjQ2LjU4OSwzMy4wNjIgMjQ2LjU4OSwzNS43MjEgTDI0Ni41ODksMzkuMjk1IEwyNDMuMDE3LDM5LjI5NSBDMjQwLjM1NywzOS4yOTUgMjM4Ljk4OCwzOS42NzUgMjM4Ljk4OCw0MS45NTYgTDIzOC45ODgsNDQuMzg4IEMyMzguOTg4LDQ2LjY2OSAyNDAuMzU3LDQ3LjA1IDI0My4wMTcsNDcuMDUgTDI0Ni41ODksNDcuMDUgTDI0Ni41ODksNTAuNjIyIEMyNDYuNTg5LDUzLjI4MiAyNDYuOTcsNTQuNjUgMjQ5LjI1LDU0LjY1IEwyNTEuNTMxLDU0LjY1IEMyNTMuODExLDU0LjY1IDI1NC4xOTIsNTMuMjgyIDI1NC4xOTIsNTAuNjIyIEwyNTQuMTkyLDQ3LjA1IEwyNTkuMjg1LDQ3LjA1IEMyNjAuMjczLDQ3LjA1IDI2MC44MDUsNDcuNTgyIDI2MC44ODEsNDguNTY5IEwyNjAuODgxLDYwLjEyNCBDMjYwLjg4MSw2Mi45MzYgMjYwLjA0NCw2NS4wNjQgMjU4LjA2OCw2Ni45NjUgTDI0MS4xMTcsODMuOTE3IEMyMzkuMTQsODUuODkzIDIzNi45MzUsODYuODA1IDIzNC4yLDg2LjgwNSBMMjAwLjI5NSw4Ni44MDUgQzE5Ny41NTksODYuODA1IDE5NS4zNTQsODUuODkzIDE5My4zNzgsODMuOTE3IEwxNzYuNDI2LDY2Ljk2NSBDMTc0LjQ1LDY0Ljk4OCAxNzMuNTM3LDYyLjkzNiAxNzMuNjEzLDYwLjEyNCBMMTczLjYxMywyNi42IEMxNzMuNjEzLDIzLjc4OCAxNzQuNTI2LDIxLjM1NCAxNzYuNTc4LDE5LjMwMyBMMTkzLjgzNCwxLjgxOCBDMTk1LjU4MiwwLjA3IDE5Ny43ODcsLTAuNDYyIDIwMC4yOTUsLTAuNDYyIEwyMzQuMiwtMC40NjIgQzIzNi43MDgsLTAuNDYyIDIzOC45MTIsMC4wNyAyNDAuNjYxLDEuODE4IEwyNTcuOTE2LDE5LjMwMyBDMjU5Ljg5MiwyMS4zNTQgMjYwLjg4MSwyMy43ODggMjYwLjg4MSwyNi42IEwyNjAuODgxLDM3LjU0NyBMMjYwLjg4MSwzNy41NDcgWiBNMjQ1LjI5NiwtMi41OTEgQzI0Mi4zMzMsLTUuNDc5IDIzOC42MDksLTcgMjM0LjEyMiwtNyBMMjAwLjM3MSwtNyBDMTk1Ljg4NiwtNyAxOTIuMDg1LC01LjQ3OSAxODkuMTk3LC0yLjU5MSBMMTcxLjMzMiwxNS4xOTcgQzE2OC41MiwxOC4wMTEgMTY3LDIxLjczNSAxNjcsMjUuODQxIEwxNjcsNjAuMTI0IEMxNjcsNjQuODM3IDE2OC41OTcsNjguNDg2IDE3MS43ODgsNzEuNjAyIEwxODguNzQxLDg4LjU1NCBDMTkyLjA4NSw5MS44OTggMTk1LjgxLDkzLjQyIDIwMC42LDkzLjM0NCBMMjMzLjg5Niw5My4zNDQgQzIzOC41MzMsOTMuMzQ0IDI0Mi4zMzMsOTEuOTc0IDI0NS43NTMsODguNTU0IEwyNjIuNzA2LDcxLjYwMiBDMjY1LjgyMiw2OC40ODYgMjY3LjQ5Niw2NC43NjEgMjY3LjQ5Niw2MC4xMjQgTDI2Ny40OTYsMjUuODQxIEMyNjcuNDk2LDIxLjczNSAyNjUuOTc0LDE4LjAxMSAyNjMuMTYyLDE1LjE5NyBMMjQ1LjI5NiwtMi41OTEgTDI0NS4yOTYsLTIuNTkxIFoiIGlkPSJGaWxsLTMxIj48L3BhdGg+CiAgICAgICAgPHBhdGggZD0iTTIzNi4xMzgsMzUuMzU2IEMyMzYuMTM4LDI0Ljk0MSAyMzUuMTUsMjAgMjIyLjM3OSwyMCBDMjEzLjQ4NSwyMCAyMDkuNjA5LDIyLjA1MyAyMDkuNjA5LDMxLjI1IEMyMDkuNjA5LDMzLjMwMyAyMTAuNDQ1LDMzLjgzNSAyMTIuNTczLDMzLjgzNSBMMjE0LjM5OCwzMy44MzUgQzIxNi4xNDYsMzMuODM1IDIxNy4yMSwzMy41MzIgMjE3LjIxLDMyLjAxIEMyMTcuMjEsMjguMjA5IDIxOC42NTQsMjcuODI5IDIyMi4zNzksMjcuODI5IEMyMjYuMjU3LDI3LjgyOSAyMjguMTU2LDI4LjIwOSAyMjguMTU2LDMzLjYwOCBDMjI4LjE1Niw0MS44OTMgMjIyLjA3NSw0Mi4xMjEgMjE2LjQ1LDQ0LjQ3OCBDMjA5Ljk4OSw0Ny4yMTQgMjA5LDUyLjE1NiAyMDksNTkuMzAxIEwyMDksNjMuODYyIEMyMDksNjcuMjA2IDIxMC40NDUsNjcuNzM5IDIxMy4yNTcsNjcuNzM5IEwyMzEuNzMsNjcuNzM5IEMyMzQuNTQyLDY3LjczOSAyMzUuOTg3LDY3LjI4MiAyMzUuOTg3LDY0Ljc3NSBMMjM1Ljk4Nyw2Mi40OTMgQzIzNS45ODcsNjAuMTM3IDIzNC41NDIsNTkuNjgxIDIzMS43Myw1OS42ODEgTDIxOC4yNzUsNTkuNjgxIEMyMTcuMjEsNTkuNjgxIDIxNi45MDUsNTkuMTQ5IDIxNi45MDUsNTcuOTMzIEwyMTYuOTA1LDU1LjQyNCBDMjE2LjkwNSw0Ny4yOSAyMzYuMTM4LDUyLjM4NCAyMzYuMTM4LDM1LjM1NiIgaWQ9IkZpbGwtMzIiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMzQ2LjY3NjQ4MywzOS43NTcgQzM0Ny43Mzk0ODMsMzkuNzU3IDM0OC4yNzM0ODMsMzkuMTQ4IDM0OC4yNzM0ODMsMzguMDA5IEwzNDguMjczNDgzLDI3LjA2MiBDMzQ4LjI3MzQ4MywyNC4yNSAzNDcuMjgzNDgzLDIxLjgxNiAzNDUuMzA4NDgzLDE5Ljc2NSBMMzI4LjA1MjQ4MywyLjI4IEMzMjYuMzAzNDgzLDAuNTMyIDMyNC4wOTk0ODMsMCAzMjEuNTkxNDgzLDAgTDI4Ny42ODY0ODMsMCBDMjg1LjE3ODQ4MywwIDI4Mi45NzQ0ODMsMC41MzIgMjgxLjIyNTQ4MywyLjI4IEwyNjMuOTcwNDgzLDE5Ljc2NSBDMjYxLjkxNzQ4MywyMS44MTYgMjYxLjAwNDQ4MywyNC4yNSAyNjEuMDA0NDgzLDI3LjA2MiBMMjYxLjAwNDQ4Myw2MC41ODYgQzI2MC45Mjc0ODMsNjMuMzk4IDI2MS44NDE0ODMsNjUuNDUgMjYzLjgxNzQ4Myw2Ny40MjcgTDI4MC43Njk0ODMsODQuMzc5IEMyODIuNzQ1NDgzLDg2LjM1NSAyODQuOTQ5NDgzLDg3LjI2NyAyODcuNjg2NDgzLDg3LjI2NyBMMzIxLjU5MTQ4Myw4Ny4yNjcgQzMyNC4zMjY0ODMsODcuMjY3IDMyNi41MzA0ODMsODYuMzU1IDMyOC41MDg0ODMsODQuMzc5IEwzNDUuNDU5NDgzLDY3LjQyNyBDMzQ3LjQzNjQ4Myw2NS41MjYgMzQ4LjI3MzQ4Myw2My4zOTggMzQ4LjI3MzQ4Myw2MC41ODYgTDM0OC4yNzM0ODMsNDkuMDMxIEMzNDguMTk2NDgzLDQ4LjA0NCAzNDcuNjY0NDgzLDQ3LjUxMiAzNDYuNjc2NDgzLDQ3LjUxMiBMMzQxLjU4MzQ4Myw0Ny41MTIgTDM0MS41ODM0ODMsNTEuMDg0IEMzNDEuNTgzNDgzLDUzLjc0NCAzNDEuMjAyNDgzLDU1LjExMiAzMzguOTIyNDgzLDU1LjExMiBMMzM2LjY0MTQ4Myw1NS4xMTIgQzMzNC4zNjE0ODMsNTUuMTEyIDMzMy45ODE0ODMsNTMuNzQ0IDMzMy45ODE0ODMsNTEuMDg0IEwzMzMuOTgxNDgzLDQ3LjUxMiBMMzMwLjQwODQ4Myw0Ny41MTIgQzMyNy43NDg0ODMsNDcuNTEyIDMyNi4zNzk0ODMsNDcuMTMxIDMyNi4zNzk0ODMsNDQuODUgTDMyNi4zNzk0ODMsNDIuNDE4IEMzMjYuMzc5NDgzLDQwLjEzNyAzMjcuNzQ4NDgzLDM5Ljc1NyAzMzAuNDA4NDgzLDM5Ljc1NyBMMzMzLjk4MTQ4MywzOS43NTcgTDMzMy45ODE0ODMsMzYuMTgzIEMzMzMuOTgxNDgzLDMzLjUyNCAzMzQuMzYxNDgzLDMyLjE1NSAzMzYuNjQxNDgzLDMyLjE1NSBMMzM4LjkyMjQ4MywzMi4xNTUgQzM0MS4yMDI0ODMsMzIuMTU1IDM0MS41ODM0ODMsMzMuNTI0IDM0MS41ODM0ODMsMzYuMTgzIEwzNDEuNTgzNDgzLDM5Ljc1NyBMMzQ2LjY3NjQ4MywzOS43NTciIGlkPSJGaWxsLTExNSIgZmlsbD0iIzFBMTkxOCI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik0zNDguODgyLDM3LjU0NyBDMzQ4Ljg4MiwzOC42ODYgMzQ4LjM0OCwzOS4yOTUgMzQ3LjI4NSwzOS4yOTUgTDM0Mi4xOTIsMzkuMjk1IEwzNDIuMTkyLDM1LjcyMSBDMzQyLjE5MiwzMy4wNjIgMzQxLjgxMSwzMS42OTMgMzM5LjUzMSwzMS42OTMgTDMzNy4yNSwzMS42OTMgQzMzNC45NywzMS42OTMgMzM0LjU5LDMzLjA2MiAzMzQuNTksMzUuNzIxIEwzMzQuNTksMzkuMjk1IEwzMzEuMDE3LDM5LjI5NSBDMzI4LjM1NywzOS4yOTUgMzI2Ljk4OCwzOS42NzUgMzI2Ljk4OCw0MS45NTYgTDMyNi45ODgsNDQuMzg4IEMzMjYuOTg4LDQ2LjY2OSAzMjguMzU3LDQ3LjA1IDMzMS4wMTcsNDcuMDUgTDMzNC41OSw0Ny4wNSBMMzM0LjU5LDUwLjYyMiBDMzM0LjU5LDUzLjI4MiAzMzQuOTcsNTQuNjUgMzM3LjI1LDU0LjY1IEwzMzkuNTMxLDU0LjY1IEMzNDEuODExLDU0LjY1IDM0Mi4xOTIsNTMuMjgyIDM0Mi4xOTIsNTAuNjIyIEwzNDIuMTkyLDQ3LjA1IEwzNDcuMjg1LDQ3LjA1IEMzNDguMjczLDQ3LjA1IDM0OC44MDUsNDcuNTgyIDM0OC44ODIsNDguNTY5IEwzNDguODgyLDYwLjEyNCBDMzQ4Ljg4Miw2Mi45MzYgMzQ4LjA0NSw2NS4wNjQgMzQ2LjA2OCw2Ni45NjUgTDMyOS4xMTcsODMuOTE3IEMzMjcuMTM5LDg1Ljg5MyAzMjQuOTM1LDg2LjgwNSAzMjIuMiw4Ni44MDUgTDI4OC4yOTUsODYuODA1IEMyODUuNTU4LDg2LjgwNSAyODMuMzU0LDg1Ljg5MyAyODEuMzc4LDgzLjkxNyBMMjY0LjQyNiw2Ni45NjUgQzI2Mi40NSw2NC45ODggMjYxLjUzNiw2Mi45MzYgMjYxLjYxMyw2MC4xMjQgTDI2MS42MTMsMjYuNiBDMjYxLjYxMywyMy43ODggMjYyLjUyNiwyMS4zNTQgMjY0LjU3OSwxOS4zMDMgTDI4MS44MzQsMS44MTggQzI4My41ODMsMC4wNyAyODUuNzg3LC0wLjQ2MiAyODguMjk1LC0wLjQ2MiBMMzIyLjIsLTAuNDYyIEMzMjQuNzA4LC0wLjQ2MiAzMjYuOTEyLDAuMDcgMzI4LjY2MSwxLjgxOCBMMzQ1LjkxNywxOS4zMDMgQzM0Ny44OTIsMjEuMzU0IDM0OC44ODIsMjMuNzg4IDM0OC44ODIsMjYuNiBMMzQ4Ljg4MiwzNy41NDcgTDM0OC44ODIsMzcuNTQ3IFogTTMzMy4yOTcsLTIuNTkxIEMzMzAuMzMzLC01LjQ3OSAzMjYuNjA4LC03IDMyMi4xMjMsLTcgTDI4OC4zNzEsLTcgQzI4My44ODUsLTcgMjgwLjA4NSwtNS40NzkgMjc3LjE5NywtMi41OTEgTDI1OS4zMzIsMTUuMTk3IEMyNTYuNTIsMTguMDExIDI1NSwyMS43MzUgMjU1LDI1Ljg0MSBMMjU1LDYwLjEyNCBDMjU1LDY0LjgzNyAyNTYuNTk2LDY4LjQ4NiAyNTkuNzg5LDcxLjYwMiBMMjc2Ljc0MSw4OC41NTQgQzI4MC4wODUsOTEuODk4IDI4My44MDksOTMuNDIgMjg4LjU5OSw5My4zNDQgTDMyMS44OTUsOTMuMzQ0IEMzMjYuNTMyLDkzLjM0NCAzMzAuMzMzLDkxLjk3NCAzMzMuNzU0LDg4LjU1NCBMMzUwLjcwNiw3MS42MDIgQzM1My44MjIsNjguNDg2IDM1NS40OTUsNjQuNzYxIDM1NS40OTUsNjAuMTI0IEwzNTUuNDk1LDI1Ljg0MSBDMzU1LjQ5NSwyMS43MzUgMzUzLjk3NCwxOC4wMTEgMzUxLjE2MiwxNS4xOTcgTDMzMy4yOTcsLTIuNTkxIEwzMzMuMjk3LC0yLjU5MSBaIiBpZD0iRmlsbC0xMTYiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMzA5LjgyMyw2MC41OTMgQzMwNC40MjYsNjAuNTkzIDMwMi44Myw1OS4wNzMgMzAyLjgzLDU0LjU4OCBMMzAyLjgzLDQ3LjM2NSBDMzA0LjczMSw0Ni45MSAzMDYuNzgzLDQ2LjQ1NCAzMDguOTg4LDQ2LjQ1NCBDMzE0Ljg0MSw0Ni40NTQgMzE2LjEzMyw0Ny45NzQgMzE2LjEzMyw1My4yOTUgQzMxNi4xMzMsNTguMTYgMzE1LjQ0OSw2MC41OTMgMzA5LjgyMyw2MC41OTMgTDMwOS44MjMsNjAuNTkzIFogTTMwOS45NzYsMzkuNjEzIEMzMDguMDc1LDM5LjYxMyAzMDYuMTc1LDM5Ljc2NCAzMDQuMTk4LDQwLjE0NSBDMzAzLjQzOCw0MC4yOTYgMzAyLjgzLDM5Ljk5MyAzMDIuODMsMzkuMDggTDMwMi44MywzNy41NiBDMzAyLjgzLDMwLjQxNCAzMDMuMzYyLDI3LjgzIDMwOS4zNjcsMjcuODMgQzMxNC41MzYsMjcuODMgMzE1LjY3NywyOC4xMzMgMzE1LjY3NywzMS44NTkgQzMxNS42NzcsMzMuMzc5IDMxNi43NDEsMzMuODM1IDMxOC40OSwzMy44MzUgTDMyMC4zMTQsMzMuODM1IEMzMjIuNDQzLDMzLjgzNSAzMjMuMjc5LDMzLjMwMiAzMjMuMjc5LDMxLjI1IEMzMjMuMjc5LDIyLjI4IDMxOS40MDMsMjAgMzEwLjUwOCwyMCBDMjk2LjU5NywyMCAyOTUsMjUuNjI1IDI5NSw0My40MTMgQzI5NS4wNzYsNjAuNTkzIDI5NC4wODgsNjguMTk1IDMwOS42NzIsNjguMTk1IEMzMTkuNTU1LDY4LjE5NSAzMjMuOTYzLDY0LjkyNiAzMjMuOTYzLDUyLjM4MyBDMzIzLjk2Myw0Mi4wNDUgMzE5LjE3NCwzOS42MTMgMzA5Ljk3NiwzOS42MTMgTDMwOS45NzYsMzkuNjEzIFoiIGlkPSJGaWxsLTExNyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik0yODQuOTQ4LDIxIEwyNzguMDMsMjEgQzI3NS4zNywyMSAyNzQsMjEuNDU2IDI3NCwyMy42NjEgTDI3NCwyNi4xNjkgQzI3NCwyOC4zNzMgMjc1LjM3LDI4LjgyOSAyNzguMDMsMjguODI5IEwyNzkuNjI1LDI4LjgyOSBDMjgwLjYxNCwyOC44MjkgMjgxLjA3LDI5LjM2MSAyODEuMDcsMzAuODgyIEwyODEuMDcsNjMuNzIyIEMyODEuMDcsNjYuMzgyIDI4MS41MjYsNjcuNzUgMjgzLjczMSw2Ny43NSBMMjg2LjMxNSw2Ny43NSBDMjg4LjUyLDY3Ljc1IDI4OC45NzcsNjYuMzgyIDI4OC45NzcsNjMuNzIyIEwyODguOTc3LDIzLjY2MSBDMjg4Ljk3NywyMS40NTYgMjg3LjYwOCwyMSAyODQuOTQ4LDIxIiBpZD0iRmlsbC0xMTgiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMTMwLjQwNzM4NSw2OC4wMzcgQzExNC44MjMzODUsNjguMDM3IDExNS44MTEzODUsNjAuNDM0IDExNS43MzYzODUsNDMuMjU0IEMxMTUuNzM2Mzg1LDI1LjQ2NyAxMTcuMzMyMzg1LDE5Ljg0IDEzMS4yNDQzODUsMTkuODQgQzE0MC4xMzgzODUsMTkuODQgMTQ0LjAxNDM4NSwyMi4xMjEgMTQ0LjAxNDM4NSwzMS4wOTEgQzE0NC4wMTQzODUsMzMuMTQzIDE0My4xNzgzODUsMzMuNjc1IDE0MS4wNTAzODUsMzMuNjc1IEwxMzkuMjI1Mzg1LDMzLjY3NSBDMTM3LjQ3NjM4NSwzMy42NzUgMTM2LjQxMzM4NSwzMy4yMiAxMzYuNDEzMzg1LDMxLjY5OSBDMTM2LjQxMzM4NSwyNy45NzQgMTM1LjI3MjM4NSwyNy42NyAxMzAuMTAzMzg1LDI3LjY3IEMxMjQuMDk3Mzg1LDI3LjY3IDEyMy41NjYzODUsMzAuMjU1IDEyMy41NjYzODUsMzcuNCBMMTIzLjU2NjM4NSwzOC45MjEgQzEyMy41NjYzODUsMzkuODM0IDEyNC4xNzQzODUsNDAuMTM3IDEyNC45MzMzODUsMzkuOTg2IEMxMjYuOTExMzg1LDM5LjYwNiAxMjguODExMzg1LDM5LjQ1NCAxMzAuNzExMzg1LDM5LjQ1NCBDMTM5LjkxMDM4NSwzOS40NTQgMTQ0LjY5ODM4NSw0MS44ODYgMTQ0LjY5ODM4NSw1Mi4yMjUgQzE0NC42OTgzODUsNjQuNzY4IDE0MC4yOTAzODUsNjguMDM3IDEzMC40MDczODUsNjguMDM3IEwxMzAuNDA3Mzg1LDY4LjAzNyBaIE0xNTQuMDUxMzg1LDIuMjgxIEMxNTIuMzAzMzg1LDAuNTMyIDE1MC4wOTgzODUsMCAxNDcuNTkwMzg1LDAgTDExMy42ODUzODUsMCBDMTExLjE3ODM4NSwwIDEwOC45NzIzODUsMC41MzIgMTA3LjIyMzM4NSwyLjI4MSBMODkuOTY4Mzg0NiwxOS43NjUgQzg3LjkxNjM4NDYsMjEuODE3IDg3LjAwNDM4NDYsMjQuMjQ5IDg3LjAwNDM4NDYsMjcuMDYzIEw4Ny4wMDQzODQ2LDYwLjU4NSBDODYuOTI4Mzg0Niw2My4zOTkgODcuODM5Mzg0Niw2NS40NTEgODkuODE1Mzg0Niw2Ny40MjcgTDEwNi43NjgzODUsODQuMzc5IEMxMDguNzQ1Mzg1LDg2LjM1NiAxMTAuOTQ5Mzg1LDg3LjI2OSAxMTMuNjg1Mzg1LDg3LjI2OSBMMTQ3LjU5MDM4NSw4Ny4yNjkgQzE1MC4zMjYzODUsODcuMjY5IDE1Mi41MzEzODUsODYuMzU2IDE1NC41MDgzODUsODQuMzc5IEwxNzEuNDU5Mzg1LDY3LjQyNyBDMTczLjQzNTM4NSw2NS41MjggMTc0LjI3MTM4NSw2My4zOTkgMTc0LjI3MTM4NSw2MC41ODUgTDE3NC4yNzEzODUsNDkuMDMyIEMxNzQuMTk1Mzg1LDQ4LjA0MyAxNzMuNjYzMzg1LDQ3LjUxIDE3Mi42NzYzODUsNDcuNTEgTDE2Ny41ODIzODUsNDcuNTEgTDE2Ny41ODIzODUsNTEuMDg0IEMxNjcuNTgyMzg1LDUzLjc0NSAxNjcuMjAyMzg1LDU1LjExMyAxNjQuOTIyMzg1LDU1LjExMyBMMTYyLjY0MTM4NSw1NS4xMTMgQzE2MC4zNjAzODUsNTUuMTEzIDE1OS45ODAzODUsNTMuNzQ1IDE1OS45ODAzODUsNTEuMDg0IEwxNTkuOTgwMzg1LDQ3LjUxIEwxNTYuNDA3Mzg1LDQ3LjUxIEMxNTMuNzQ2Mzg1LDQ3LjUxIDE1Mi4zNzkzODUsNDcuMTMgMTUyLjM3OTM4NSw0NC44NSBMMTUyLjM3OTM4NSw0Mi40MTcgQzE1Mi4zNzkzODUsNDAuMTM3IDE1My43NDYzODUsMzkuNzU3IDE1Ni40MDczODUsMzkuNzU3IEwxNTkuOTgwMzg1LDM5Ljc1NyBMMTU5Ljk4MDM4NSwzNi4xODQgQzE1OS45ODAzODUsMzMuNTI0IDE2MC4zNjAzODUsMzIuMTU2IDE2Mi42NDEzODUsMzIuMTU2IEwxNjQuOTIyMzg1LDMyLjE1NiBDMTY3LjIwMjM4NSwzMi4xNTYgMTY3LjU4MjM4NSwzMy41MjQgMTY3LjU4MjM4NSwzNi4xODQgTDE2Ny41ODIzODUsMzkuNzU3IEwxNzIuNjc2Mzg1LDM5Ljc1NyBDMTczLjc0MDM4NSwzOS43NTcgMTc0LjI3MTM4NSwzOS4xNDkgMTc0LjI3MTM4NSwzOC4wMDkgTDE3NC4yNzEzODUsMjcuMDYzIEMxNzQuMjcxMzg1LDI0LjI0OSAxNzMuMjg0Mzg1LDIxLjgxNyAxNzEuMzA3Mzg1LDE5Ljc2NSBMMTU0LjA1MTM4NSwyLjI4MSBMMTU0LjA1MTM4NSwyLjI4MSBaIiBpZD0iRmlsbC00OSIgZmlsbD0iIzFBMTkxOCI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik0xMzAuMTU2LDQ2IEMxMjcuOTUyLDQ2IDEyNS45LDQ2LjQ1NSAxMjQsNDYuOTExIEwxMjQsNTQuMTM0IEMxMjQsNTguNjE5IDEyNS41OTYsNjAuMTM5IDEzMC45OTMsNjAuMTM5IEMxMzYuNjE4LDYwLjEzOSAxMzcuMzAyLDU3LjcwNiAxMzcuMzAyLDUyLjg0MSBDMTM3LjMwMiw0Ny41MiAxMzYuMDEsNDYgMTMwLjE1Niw0NiIgaWQ9IkZpbGwtNTAiIGZpbGw9IiMxQTE5MTgiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMTc0Ljg4MiwzNy41NDYgQzE3NC44ODIsMzguNjg2IDE3NC4zNTEsMzkuMjk0IDE3My4yODcsMzkuMjk0IEwxNjguMTkzLDM5LjI5NCBMMTY4LjE5MywzNS43MjEgQzE2OC4xOTMsMzMuMDYxIDE2Ny44MTMsMzEuNjkzIDE2NS41MzMsMzEuNjkzIEwxNjMuMjUyLDMxLjY5MyBDMTYwLjk3MSwzMS42OTMgMTYwLjU5MSwzMy4wNjEgMTYwLjU5MSwzNS43MjEgTDE2MC41OTEsMzkuMjk0IEwxNTcuMDE4LDM5LjI5NCBDMTU0LjM1NywzOS4yOTQgMTUyLjk5LDM5LjY3NCAxNTIuOTksNDEuOTU0IEwxNTIuOTksNDQuMzg3IEMxNTIuOTksNDYuNjY3IDE1NC4zNTcsNDcuMDQ3IDE1Ny4wMTgsNDcuMDQ3IEwxNjAuNTkxLDQ3LjA0NyBMMTYwLjU5MSw1MC42MjEgQzE2MC41OTEsNTMuMjgyIDE2MC45NzEsNTQuNjUgMTYzLjI1Miw1NC42NSBMMTY1LjUzMyw1NC42NSBDMTY3LjgxMyw1NC42NSAxNjguMTkzLDUzLjI4MiAxNjguMTkzLDUwLjYyMSBMMTY4LjE5Myw0Ny4wNDcgTDE3My4yODcsNDcuMDQ3IEMxNzQuMjc0LDQ3LjA0NyAxNzQuODA2LDQ3LjU4IDE3NC44ODIsNDguNTY5IEwxNzQuODgyLDYwLjEyMiBDMTc0Ljg4Miw2Mi45MzYgMTc0LjA0Niw2NS4wNjUgMTcyLjA3LDY2Ljk2NCBMMTU1LjExOSw4My45MTYgQzE1My4xNDIsODUuODkzIDE1MC45MzcsODYuODA2IDE0OC4yMDEsODYuODA2IEwxMTQuMjk2LDg2LjgwNiBDMTExLjU2LDg2LjgwNiAxMDkuMzU2LDg1Ljg5MyAxMDcuMzc5LDgzLjkxNiBMOTAuNDI2LDY2Ljk2NCBDODguNDUsNjQuOTg4IDg3LjUzOSw2Mi45MzYgODcuNjE1LDYwLjEyMiBMODcuNjE1LDI2LjYgQzg3LjYxNSwyMy43ODYgODguNTI3LDIxLjM1NCA5MC41NzksMTkuMzAyIEwxMDcuODM0LDEuODE4IEMxMDkuNTgzLDAuMDY5IDExMS43ODksLTAuNDYzIDExNC4yOTYsLTAuNDYzIEwxNDguMjAxLC0wLjQ2MyBDMTUwLjcwOSwtMC40NjMgMTUyLjkxNCwwLjA2OSAxNTQuNjYyLDEuODE4IEwxNzEuOTE4LDE5LjMwMiBDMTczLjg5NSwyMS4zNTQgMTc0Ljg4MiwyMy43ODYgMTc0Ljg4MiwyNi42IEwxNzQuODgyLDM3LjU0NiBMMTc0Ljg4MiwzNy41NDYgWiBNMTU5LjI5OSwtMi41OTEgQzE1Ni4zMzMsLTUuNDggMTUyLjYwOSwtNyAxNDguMTI1LC03IEwxMTQuMzczLC03IEMxMDkuODg3LC03IDEwNi4wODYsLTUuNDggMTAzLjE5OCwtMi41OTEgTDg1LjMzNCwxNS4xOTcgQzgyLjUyMiwxOC4wMDkgODEsMjEuNzM0IDgxLDI1LjgzOSBMODEsNjAuMTIyIEM4MSw2NC44MzUgODIuNTk4LDY4LjQ4NSA4NS43OTEsNzEuNjAyIEwxMDIuNzQzLDg4LjU1NCBDMTA2LjA4Niw5MS44OTggMTA5LjgxMSw5My40MTggMTE0LjYsOTMuMzQzIEwxNDcuODk2LDkzLjM0MyBDMTUyLjUzNCw5My4zNDMgMTU2LjMzMyw5MS45NzUgMTU5Ljc1NCw4OC41NTQgTDE3Ni43MDcsNzEuNjAyIEMxNzkuODI0LDY4LjQ4NSAxODEuNDk2LDY0Ljc2IDE4MS40OTYsNjAuMTIyIEwxODEuNDk2LDI1LjgzOSBDMTgxLjQ5NiwyMS43MzQgMTc5Ljk3NSwxOC4wMDkgMTc3LjE2MywxNS4xOTcgTDE1OS4yOTksLTIuNTkxIEwxNTkuMjk5LC0yLjU5MSBaIiBpZD0iRmlsbC01MSI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik0xMzAuODIzLDYwLjU5NCBDMTI1LjQyNiw2MC41OTQgMTIzLjgzLDU5LjA3NCAxMjMuODMsNTQuNTg5IEwxMjMuODMsNDcuMzY2IEMxMjUuNzMsNDYuOTEgMTI3Ljc4Miw0Ni40NTUgMTI5Ljk4Niw0Ni40NTUgQzEzNS44NCw0Ni40NTUgMTM3LjEzMiw0Ny45NzUgMTM3LjEzMiw1My4yOTYgQzEzNy4xMzIsNTguMTYxIDEzNi40NDgsNjAuNTk0IDEzMC44MjMsNjAuNTk0IEwxMzAuODIzLDYwLjU5NCBaIE0xMzAuOTc1LDM5LjYxNCBDMTI5LjA3NSwzOS42MTQgMTI3LjE3NSwzOS43NjYgMTI1LjE5Nyw0MC4xNDYgQzEyNC40MzgsNDAuMjk3IDEyMy44MywzOS45OTQgMTIzLjgzLDM5LjA4MSBMMTIzLjgzLDM3LjU2IEMxMjMuODMsMzAuNDE1IDEyNC4zNjEsMjcuODMgMTMwLjM2NywyNy44MyBDMTM1LjUzNiwyNy44MyAxMzYuNjc3LDI4LjEzNCAxMzYuNjc3LDMxLjg1OSBDMTM2LjY3NywzMy4zOCAxMzcuNzQsMzMuODM1IDEzOS40ODksMzMuODM1IEwxNDEuMzE0LDMzLjgzNSBDMTQzLjQ0MiwzMy44MzUgMTQ0LjI3OCwzMy4zMDMgMTQ0LjI3OCwzMS4yNTEgQzE0NC4yNzgsMjIuMjgxIDE0MC40MDIsMjAgMTMxLjUwOCwyMCBDMTE3LjU5NiwyMCAxMTYsMjUuNjI3IDExNiw0My40MTQgQzExNi4wNzUsNjAuNTk0IDExNS4wODcsNjguMTk3IDEzMC42NzEsNjguMTk3IEMxNDAuNTU0LDY4LjE5NyAxNDQuOTYyLDY0LjkyOCAxNDQuOTYyLDUyLjM4NSBDMTQ0Ljk2Miw0Mi4wNDYgMTQwLjE3NCwzOS42MTQgMTMwLjk3NSwzOS42MTQgTDEzMC45NzUsMzkuNjE0IFoiIGlkPSJGaWxsLTUyIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgPHBhdGggZD0iTTY3LjA1MTM3NiwyLjI4MSBDNjUuMzAyMzc2LDAuNTMyIDYzLjA5ODM3NiwwIDYwLjU5MDM3NiwwIEwyNi42ODYzNzYsMCBDMjQuMTc3Mzc2LDAgMjEuOTczMzc2LDAuNTMyIDIwLjIyNDM3NiwyLjI4MSBMMi45NjgzNzYwNSwxOS43NjUgQzAuOTE2Mzc2MDUsMjEuODE3IDAuMDA0Mzc2MDQ5OTgsMjQuMjQ5IDAuMDA0Mzc2MDQ5OTgsMjcuMDYzIEwwLjAwNDM3NjA0OTk4LDYwLjU4NSBDLTAuMDcxNjIzOTUsNjMuMzk5IDAuODQxMzc2MDUsNjUuNDUxIDIuODE2Mzc2MDUsNjcuNDI3IEwxOS43NjgzNzYsODQuMzc5IEMyMS43NDQzNzYsODYuMzU2IDIzLjk0OTM3Niw4Ny4yNjggMjYuNjg2Mzc2LDg3LjI2OCBMNjAuNTkwMzc2LDg3LjI2OCBDNjMuMzI2Mzc2LDg3LjI2OCA2NS41MzEzNzYsODYuMzU2IDY3LjUwNzM3Niw4NC4zNzkgTDg0LjQ1OTM3Niw2Ny40MjcgQzg2LjQzNTM3Niw2NS41MjcgODcuMjcyMzc2LDYzLjM5OSA4Ny4yNzIzNzYsNjAuNTg1IEw4Ny4yNzIzNzYsNDkuMDMyIEM4Ny4xOTYzNzYsNDguMDQzIDg2LjY2MzM3Niw0Ny41MSA4NS42NzUzNzYsNDcuNTEgTDgwLjU4MjM3Niw0Ny41MSBMODAuNTgyMzc2LDUxLjA4MyBDODAuNTgyMzc2LDUzLjc0NSA4MC4yMDIzNzYsNTUuMTEzIDc3LjkyMjM3Niw1NS4xMTMgTDc1LjY0MTM3Niw1NS4xMTMgQzczLjM2MTM3Niw1NS4xMTMgNzIuOTgxMzc2LDUzLjc0NSA3Mi45ODEzNzYsNTEuMDgzIEw3Mi45ODEzNzYsNDcuNTEgTDY5LjQwODM3Niw0Ny41MSBDNjYuNzQ3Mzc2LDQ3LjUxIDY1LjM3OTM3Niw0Ny4xMyA2NS4zNzkzNzYsNDQuODUgTDY1LjM3OTM3Niw0Mi40MTcgQzY1LjM3OTM3Niw0MC4xMzcgNjYuNzQ3Mzc2LDM5Ljc1NyA2OS40MDgzNzYsMzkuNzU3IEw3Mi45ODEzNzYsMzkuNzU3IEw3Mi45ODEzNzYsMzYuMTg0IEM3Mi45ODEzNzYsMzMuNTI0IDczLjM2MTM3NiwzMi4xNTYgNzUuNjQxMzc2LDMyLjE1NiBMNzcuOTIyMzc2LDMyLjE1NiBDODAuMjAyMzc2LDMyLjE1NiA4MC41ODIzNzYsMzMuNTI0IDgwLjU4MjM3NiwzNi4xODQgTDgwLjU4MjM3NiwzOS43NTcgTDg1LjY3NTM3NiwzOS43NTcgQzg2LjczOTM3NiwzOS43NTcgODcuMjcyMzc2LDM5LjE0OSA4Ny4yNzIzNzYsMzguMDA5IEw4Ny4yNzIzNzYsMjcuMDYzIEM4Ny4yNzIzNzYsMjQuMjQ5IDg2LjI4MzM3NiwyMS44MTcgODQuMzA2Mzc2LDE5Ljc2NSBMNjcuMDUxMzc2LDIuMjgxIiBpZD0iRmlsbC01MyIgZmlsbD0iIzFBMTkxOCI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik01MC41NzgsNDkuNDE4IEM1MC41NzgsNTcuMjQ4IDUwLjI3NCw2MC41MTYgNDMuMjc5LDYwLjUxNiBDMzYuMjg2LDYwLjUxNiAzNS45ODIsNTcuMzI0IDM1Ljk4Miw0OS41NyBMMzUuOTgyLDM5LjA4IEMzNS45ODIsMzEuMjUgMzYuMjg2LDI3Ljk4MSA0My4yNzksMjcuOTgxIEM1MC4yNzQsMjcuOTgxIDUwLjU3OCwzMS4xNzUgNTAuNTc4LDM4LjkyOCBMNTAuNTc4LDQ5LjQxOCBMNTAuNTc4LDQ5LjQxOCBaIE00My4yNzksMjAgQzI4LjQ1NywyMCAyOCwyNy4xNDUgMjgsNDYuNTI5IEMyOCw2MS42NTcgMjkuNjcyLDY4LjQ5OSA0My4yNzksNjguNDk5IEM1Ny41NzEsNjguNDk5IDU4LjU1OSw2MC44OTYgNTguNTU5LDQ0LjAyMSBDNTguNTU5LDI3LjIyMSA1Ny41NzEsMjAgNDMuMjc5LDIwIEw0My4yNzksMjAgWiIgaWQ9IkZpbGwtNTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNODYuODgyLDM3LjU0NiBDODYuODgyLDM4LjY4NiA4Ni4zNDksMzkuMjk0IDg1LjI4NSwzOS4yOTQgTDgwLjE5MiwzOS4yOTQgTDgwLjE5MiwzNS43MjEgQzgwLjE5MiwzMy4wNjEgNzkuODEyLDMxLjY5MyA3Ny41MzIsMzEuNjkzIEw3NS4yNTEsMzEuNjkzIEM3Mi45NzEsMzEuNjkzIDcyLjU5MSwzMy4wNjEgNzIuNTkxLDM1LjcyMSBMNzIuNTkxLDM5LjI5NCBMNjkuMDE4LDM5LjI5NCBDNjYuMzU3LDM5LjI5NCA2NC45ODksMzkuNjc0IDY0Ljk4OSw0MS45NTQgTDY0Ljk4OSw0NC4zODcgQzY0Ljk4OSw0Ni42NjcgNjYuMzU3LDQ3LjA0NyA2OS4wMTgsNDcuMDQ3IEw3Mi41OTEsNDcuMDQ3IEw3Mi41OTEsNTAuNjIgQzcyLjU5MSw1My4yODIgNzIuOTcxLDU0LjY1IDc1LjI1MSw1NC42NSBMNzcuNTMyLDU0LjY1IEM3OS44MTIsNTQuNjUgODAuMTkyLDUzLjI4MiA4MC4xOTIsNTAuNjIgTDgwLjE5Miw0Ny4wNDcgTDg1LjI4NSw0Ny4wNDcgQzg2LjI3Myw0Ny4wNDcgODYuODA2LDQ3LjU4IDg2Ljg4Miw0OC41NjkgTDg2Ljg4Miw2MC4xMjIgQzg2Ljg4Miw2Mi45MzYgODYuMDQ1LDY1LjA2NCA4NC4wNjksNjYuOTY0IEw2Ny4xMTcsODMuOTE2IEM2NS4xNDEsODUuODkzIDYyLjkzNiw4Ni44MDUgNjAuMiw4Ni44MDUgTDI2LjI5Niw4Ni44MDUgQzIzLjU1OSw4Ni44MDUgMjEuMzU0LDg1Ljg5MyAxOS4zNzgsODMuOTE2IEwyLjQyNiw2Ni45NjQgQzAuNDUxLDY0Ljk4OCAtMC40NjIsNjIuOTM2IC0wLjM4Niw2MC4xMjIgTC0wLjM4NiwyNi42IEMtMC4zODYsMjMuNzg2IDAuNTI2LDIxLjM1NCAyLjU3OCwxOS4zMDIgTDE5LjgzNCwxLjgxOCBDMjEuNTgzLDAuMDY5IDIzLjc4NywtMC40NjMgMjYuMjk2LC0wLjQ2MyBMNjAuMiwtMC40NjMgQzYyLjcwOCwtMC40NjMgNjQuOTEyLDAuMDY5IDY2LjY2MSwxLjgxOCBMODMuOTE2LDE5LjMwMiBDODUuODkzLDIxLjM1NCA4Ni44ODIsMjMuNzg2IDg2Ljg4MiwyNi42IEw4Ni44ODIsMzcuNTQ2IEw4Ni44ODIsMzcuNTQ2IFogTTcxLjI5OCwtMi41OTEgQzY4LjMzMywtNS40OCA2NC42MDksLTcgNjAuMTI0LC03IEwyNi4zNzIsLTcgQzIxLjg4NywtNyAxOC4wODYsLTUuNDggMTUuMTk4LC0yLjU5MSBMLTIuNjY3LDE1LjE5NyBDLTUuNDc5LDE4LjAwOSAtNywyMS43MzQgLTcsMjUuODM5IEwtNyw2MC4xMjIgQy03LDY0LjgzNSAtNS40MDMsNjguNDg1IC0yLjIxMSw3MS42MDIgTDE0Ljc0Miw4OC41NTMgQzE4LjA4Niw5MS44OTggMjEuODExLDkzLjQxOCAyNi42LDkzLjM0MyBMNTkuODk2LDkzLjM0MyBDNjQuNTMyLDkzLjM0MyA2OC4zMzMsOTEuOTc0IDcxLjc1NCw4OC41NTMgTDg4LjcwNiw3MS42MDIgQzkxLjgyMyw2OC40ODUgOTMuNDk1LDY0Ljc2IDkzLjQ5NSw2MC4xMjIgTDkzLjQ5NSwyNS44MzkgQzkzLjQ5NSwyMS43MzQgOTEuOTc0LDE4LjAwOSA4OS4xNjEsMTUuMTk3IEw3MS4yOTgsLTIuNTkxIEw3MS4yOTgsLTIuNTkxIFoiIGlkPSJGaWxsLTU1Ij48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg==) 0 0 no-repeat;display:block;text-indent:-9999em!important;background-size:auto 16px;position:relative;top:-2px;opacity:.2;-ms-filter:\"alpha(Opacity=20)\";filter:alpha(Opacity=20);-webkit-transition:opacity .2s ease;-moz-transition:opacity .2s ease;-ms-transition:opacity .2s ease;-o-transition:opacity .2s ease;transition:opacity .2s ease}#market_context_headcrab table .pb-badge{top:1px}#market_context_headcrab .pb-badge-0{background-position:0 0}#market_context_headcrab .pb-badge-6{background-position:-16px 0}#market_context_headcrab .pb-badge-12{background-position:-32px 0}#market_context_headcrab .pb-badge-16{background-position:-48px 0}#market_context_headcrab .pb-badge-18{background-position:-64px 0}#market_context_headcrab .pb-product-shops td.pb-product-shops-badge{width:30px!important;padding-top:10px!important}#market_context_headcrab .pb-products-txt .pb-badge,#market_context_headcrab .pb-product-best-txt .pb-badge{display:inline-block!important;float:left!important;line-height:inherit!important;margin-right:12px!important;margin-top:6px!important}#market_context_headcrab .pb-product-best-txt .pb-badge{margin-top:8px!important}.fotorama--fullscreen{z-index:2147483647!important}#market_context_headcrab.pb-sitebar_adult{background:transparent!important;border:0!important}#market_context_headcrab.pb-sitebar_adult .pb-overlay{top:0}#market_context_headcrab.pb-sitebar_adult .pb-sitebar-logo,#market_context_headcrab.pb-sitebar_adult .pb-sitebar-logo img,#market_context_headcrab.pb-sitebar_adult .pb-sitebar-cnt,#market_context_headcrab.pb-sitebar_adult .pb-sitebar-btns,#market_context_headcrab.pb-sitebar_adult .pb-sitebar-options{visibility:hidden!important}#market_context_headcrab .pb-disclaimer{margin:7px 0 5px}#market_context_headcrab .pb-disclaimer_bar{background:rgba(50,50,50,.7);position:absolute;top:39px;left:0;right:0;padding:1px 0 1px 64px;margin:0}#market_context_headcrab .pb-disclaimer_bar:before{position:absolute;top:-6px;left:64px;content:'';border:6px inset transparent;border-width:6px;border-bottom-color:rgba(50,50,50,.7);border-bottom-style:solid;border-top:0}#market_context_headcrab .pb-disclaimer-txt{color:#D8D8D8;font:12px/18px Arial,sans-serif}#market_context_headcrab .pb-disclaimer-i{margin:0 4px 0 -2px!important;background-position:-96px -16px}#market_context_headcrab .pb-disclaimer_dark .pb-disclaimer-txt{color:#ababab}#market_context_headcrab .pb-disclaimer_dark .pb-disclaimer-i{background-position:-96px -32px;top:1px}#market_context_headcrab .pb-sitebar_popover_opt_in{width:465px!important;padding-left:135px!important}#market_context_headcrab .pb-icon-ya{width:64px;height:64px;position:absolute;top:45px;left:41px}#market_context_headcrab .pb-sitebar_popover .pb-btn-primary .pb-btn-count{color:#7C6E05;font-size:1em!important}#market_context_headcrab .pager-arrows{position:absolute;top:-6px;right:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}#market_context_headcrab .pb-carousel .pager-arrows__item{display:inline-block;width:32px;height:32px;cursor:pointer;text-align:center;border-radius:2px;border:1px solid rgba(0,0,0,.1);-webkit-box-sizing:border-box;box-sizing:border-box}#market_context_headcrab .pager-arrows__item .img{display:inline-block;margin-top:9px;font-size:0!important}#market_context_headcrab .pager-arrows__item_type_next{margin-left:-1px;border-top-left-radius:0;border-bottom-left-radius:0}#market_context_headcrab .pager-arrows__item_type_next img,#market_context_headcrab .pager-arrows__item_type_next.pb-carousel-arrow-disabled img,#market_context_headcrab .pager-arrows__item_type_next:hover.pb-carousel-arrow-disabled img{width:7px;height:12px;margin-top:9px;opacity:.5;filter:alpha(opacity=50);background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3IiBoZWlnaHQ9IjEyIiB2aWV3Qm94PSIxIDEyIDcgMTIiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMSAxMiA3IDEyIj48dGl0bGU+U2xpY2UgMTwvdGl0bGU+PHBhdGggZD0iTTEuMjcgMjIuNzRsNC43MS00LjZjLjA4LS4wOC4wOC0uMjEgMC0uMjlsLTQuNzEtNC42LS4wOS0uMDhjLS4xMS0uMTItLjE4LS4yNy0uMTgtLjQ1IDAtLjQuMzMtLjcyLjc0LS43Mi4xOCAwIC4zNC4wNy40Ny4xOGwuMDkuMDggNS41OSA1LjQ2Yy4xNi4xNi4xNi40MSAwIC41N0wyLjMgMjMuNzVsLS4xLjA3Yy0uMTIuMTEtLjI4LjE4LS40Ni4xOC0uNDEgMC0uNzQtLjMyLS43NC0uNzIgMC0uMTguMDctLjMzLjE4LS40NmwuMDktLjA4eiIvPjwvc3ZnPg==) 50% 50% no-repeat}#market_context_headcrab .pager-arrows__item_type_next:hover img{opacity:1;filter:alpha(opacity=100);background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3IiBoZWlnaHQ9IjEyIiB2aWV3Qm94PSIxIDEyIDcgMTIiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMSAxMiA3IDEyIiBmaWxsPSIjZjAwIj48dGl0bGU+U2xpY2UgMTwvdGl0bGU+PHBhdGggZD0iTTEuMjcgMjIuNzRsNC43MS00LjZjLjA4LS4wOC4wOC0uMjEgMC0uMjlsLTQuNzEtNC42LS4wOS0uMDhjLS4xMS0uMTItLjE4LS4yNy0uMTgtLjQ1IDAtLjQuMzMtLjcyLjc0LS43Mi4xOCAwIC4zNC4wNy40Ny4xOGwuMDkuMDggNS41OSA1LjQ2Yy4xNi4xNi4xNi40MSAwIC41N0wyLjMgMjMuNzVsLS4xLjA3Yy0uMTIuMTEtLjI4LjE4LS40Ni4xOC0uNDEgMC0uNzQtLjMyLS43NC0uNzIgMC0uMTguMDctLjMzLjE4LS40NmwuMDktLjA4eiIvPjwvc3ZnPgo=) 50% 50% no-repeat}#market_context_headcrab .pager-arrows__item_type_next.pb-carousel-arrow-disabled{cursor:default}#market_context_headcrab .pager-arrows__item_type_next.pb-carousel-arrow-disabled img,#market_context_headcrab .pager-arrows__item_type_next:hover.pb-carousel-arrow-disabled img{opacity:.15;filter:alpha(opacity=15)}#market_context_headcrab .pager-arrows__item_type_prev{border-top-right-radius:0;border-bottom-right-radius:0;border-right:1px solid transparent}#market_context_headcrab .pager-arrows__item_type_prev img,#market_context_headcrab .pager-arrows__item_type_prev.pb-carousel-arrow-disabled img,#market_context_headcrab .pager-arrows__item_type_prev:hover.pb-carousel-arrow-disabled img{width:7px;height:12px;margin-top:9px;margin-left:-1px;opacity:.5;filter:alpha(opacity=50)}#market_context_headcrab .pager-arrows__item_type_prev:hover img{opacity:1;filter:alpha(opacity=100)}#market_context_headcrab .pager-arrows__item_type_prev.pb-carousel-arrow-disabled{cursor:default}#market_context_headcrab .pager-arrows__item_type_prev.pb-carousel-arrow-disabled img,#market_context_headcrab .pager-arrows__item_type_prev:hover.pb-carousel-arrow-disabled img{opacity:.15;filter:alpha(opacity=15)}#market_context_headcrab .stickers__sticker{display:inline-block;margin-left:10px}#market_context_headcrab .stickers__sticker:first-child{margin-left:0}#market_context_headcrab .stickers__sticker_type_new{font-size:11px!important;padding:0 10px 1px;color:#fff;background:#3379F9;border-radius:2px;line-height:17px!important}#market_context_headcrab .pb-carousel{position:relative}#market_context_headcrab .pb-sitebar_popover_xxl{width:825px}#market_context_headcrab .pb-carousel__header{position:relative}#market_context_headcrab .pb-carousel__title{display:block!important;font-size:18px!important;font-weight:400!important;margin:15px 0 17px!important}#market_context_headcrab .stickers__sticker{position:absolute;top:0;left:-8px}#market_context_headcrab .pb-sitebar_popover .pb-carousel__body{overflow:hidden;white-space:nowrap;padding:1px 4px 2px 7px;margin:0 -2px 0 -7px}#market_context_headcrab .pb-sitebar_popover .pb-carousel__list{position:relative;margin:0 -20px 16px 0;left:0;transition:left .4s ease-in-out}#market_context_headcrab .pb-sitebar_popover .pb-carousel__item{position:relative;display:inline-block;margin:0 18px 0 0;vertical-align:top;width:242px;-webkit-box-shadow:0 0 0 1px rgba(0,0,0,.1);box-shadow:0 0 0 1px rgba(0,0,0,.1)}#market_context_headcrab .pb-sitebar_popover .pb-carousel__item:hover{-webkit-box-shadow:0 0 0 1px #fadf75;box-shadow:0 0 0 1px #fadf75}#market_context_headcrab span.sitebar_carousel_prev{border-radius:2px 0 0 2px!important}#market_context_headcrab span.sitebar_carousel_next{border-radius:0 2px 2px 0!important}#market_context_headcrab .pb-sitebar_popover .pb-carousel__item__image{position:relative;display:block!important;padding:0;border:20px solid transparent!important;width:242px;height:242px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}#market_context_headcrab .pb-carousel__item__image img{position:absolute;top:0;right:0;bottom:0;left:0;max-width:100%;max-height:100%;margin:auto;-webkit-transform:translatez(0);-moz-transform:translatez(0);-ms-transform:translatez(0);-o-transform:translatez(0);transform:translatez(0)}#market_context_headcrab .pb-carousel__item__image .pb-product-rate{position:absolute;bottom:0;left:-15px;z-index:1}#market_context_headcrab .pb-carousel__item__head,#market_context_headcrab .pb-carousel__item__body{padding:0 10px}#market_context_headcrab .pb-carousel__item__title{font-weight:400!important;font-size:1em!important;margin:-5px 0 16px!important;display:block!important}#market_context_headcrab .pb-carousel__item__title a{display:block!important;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}#market_context_headcrab .pb-carousel__item__body{position:relative;margin-top:-11px;margin-bottom:-8px}#market_context_headcrab .pb-carousel__item__price{margin-bottom:16px}#market_context_headcrab .pb-carousel__item__offer{margin-bottom:10px}#market_context_headcrab .pb-sitebar_popover .pb-carousel__item .pb-btn-primary{min-width:102px;margin-right:10px!important}#market_context_headcrab .pb-sitebar_popover .pb-carousel-footer{display:table;width:100%;height:55px;margin-top:-15px}#market_context_headcrab .pb-sitebar_popover .pb-carousel-footer>span{display:table-cell;color:#000;vertical-align:middle}#market_context_headcrab .pb-sitebar_popover .pb-carousel-footer>span:last-child{text-align:right}#market_context_headcrab .pb-sitebar_popover .pb-carousel-footer>span:first-child{text-align:left}#market_context_headcrab .pb-sitebar_popover .pb-carousel-footer>span{text-align:center}#market_context_headcrab .pb-sitebar_popover .pb-carousel-footer a,#market_context_headcrab .pb-sitebar_popover .pb-carousel-footer span{font-size:11px!important}#market_context_headcrab .pb-sitebar_popover .pb-carousel-footer a{text-decoration:underline!important}#market_context_headcrab .pb-sitebar_popover .pb-carousel-footer a{color:#000!important}#market_context_headcrab .pb-sitebar_popover .pb-carousel-footer a:hover{color:red!important}#market_context_headcrab .pb-stats .pb-table-cell{padding:6px 0}#market_context_headcrab .ps-container{-ms-touch-action:none;overflow:hidden!important}#market_context_headcrab .ps-container.ps-active-x>.ps-scrollbar-x-rail,#market_context_headcrab .ps-container.ps-active-y>.ps-scrollbar-y-rail{display:block}#market_context_headcrab .ps-container.ps-in-scrolling{pointer-events:none}#market_context_headcrab .ps-container.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail{background-color:#eee;opacity:.9}#market_context_headcrab .ps-container.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail>.ps-scrollbar-x{background-color:#999}#market_context_headcrab .ps-container.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail{background-color:#eee;opacity:.9}#market_context_headcrab .ps-container.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail>.ps-scrollbar-y{background-color:#999}#market_context_headcrab .ps-container>.ps-scrollbar-x-rail{display:none;position:absolute;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;border-radius:4px;opacity:.6;-webkit-transition:background-color .2s linear,opacity .2s linear;-moz-transition:background-color .2s linear,opacity .2s linear;-o-transition:background-color .2s linear,opacity .2s linear;transition:background-color .2s linear,opacity .2s linear;bottom:3px;height:8px}#market_context_headcrab .ps-container>.ps-scrollbar-x-rail>.ps-scrollbar-x{position:absolute;background-color:#aaa;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;border-radius:4px;-webkit-transition:background-color .2s linear;-moz-transition:background-color .2s linear;-o-transition:background-color .2s linear;transition:background-color .2s linear;bottom:0;height:8px}#market_context_headcrab .ps-container>.ps-scrollbar-y-rail{display:none;position:absolute;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;border-radius:4px;opacity:.6;-webkit-transition:background-color .2s linear,opacity .2s linear;-moz-transition:background-color .2s linear,opacity .2s linear;-o-transition:background-color .2s linear,opacity .2s linear;transition:background-color .2s linear,opacity .2s linear;right:3px;width:8px}#market_context_headcrab .ps-container>.ps-scrollbar-y-rail>.ps-scrollbar-y{position:absolute;background-color:#aaa;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;border-radius:4px;-webkit-transition:background-color .2s linear;-moz-transition:background-color .2s linear;-o-transition:background-color .2s linear;transition:background-color .2s linear;right:0;width:8px}#market_context_headcrab .ps-container:hover.ps-in-scrolling{pointer-events:none}#market_context_headcrab .ps-container:hover.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail{background-color:#eee;opacity:.9}#market_context_headcrab .ps-container:hover.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail>.ps-scrollbar-x{background-color:#999}#market_context_headcrab .ps-container:hover.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail{background-color:#eee;opacity:.9}#market_context_headcrab .ps-container:hover.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail>.ps-scrollbar-y{background-color:#999}#market_context_headcrab .ps-container:hover>.ps-scrollbar-x-rail,#market_context_headcrab .ps-container:hover>.ps-scrollbar-y-rail{opacity:.6}#market_context_headcrab .ps-container:hover>.ps-scrollbar-x-rail:hover{background-color:#eee;opacity:.9}#market_context_headcrab .ps-container:hover>.ps-scrollbar-x-rail:hover>.ps-scrollbar-x{background-color:#999}#market_context_headcrab .ps-container:hover>.ps-scrollbar-y-rail:hover{background-color:#eee;opacity:.9}#market_context_headcrab .ps-container:hover>.ps-scrollbar-y-rail:hover>.ps-scrollbar-y{background-color:#999}#market_context_headcrab .pb-no-select{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#market_context_headcrab .sovetnik-popup{color:#000;position:fixed;top:65px;right:26px;cursor:auto;-webkit-box-shadow:0 0 50px rgba(0,0,0,.6);-moz-box-shadow:0 0 50px rgba(0,0,0,.6);box-shadow:0 0 50px rgba(0,0,0,.6)}#market_context_headcrab .sovetnik-popup,#market_context_headcrab .sovetnik-popup *{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}#market_context_headcrab.pb-sitebar_win .sovetnik-popup{background-color:#fff;width:564px;font:400 15px/1.34 'Segoe UI',sans-serif}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup{-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;background-color:#f2f2f2;width:536px;font:400 12px/1.5 'San Francisco',Helvetica,sans-serif}#market_context_headcrab .sovetnik-popup-tail{position:absolute;top:-13px;left:50%;margin:0 0 0 -13px}#market_context_headcrab .sovetnik-popup-tail:after{content:'';position:absolute;left:0;top:0;width:0;height:0;border-width:0 13px 13px;border-style:solid;border-color:transparent transparent #fff}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-tail:after{border-bottom-color:#f2f2f2}#market_context_headcrab .sovetnik-popup-body{margin-top:-3px}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-body{padding:32px}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-body{padding:24px 32px}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-body-cnt{padding-bottom:64px}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-body-cnt{padding-bottom:24px}#market_context_headcrab .sovetnik-popup-body-cnt:before,#market_context_headcrab .sovetnik-popup-body-cnt:after{content:\" \";display:table}#market_context_headcrab .sovetnik-popup-body-cnt:after{clear:both}#market_context_headcrab .sovetnik-popup-body-left{float:left;width:88px;padding-right:24px;padding-top:3px}#market_context_headcrab .sovetnik-popup-body-right{margin-left:88px}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-body-left{margin-left:-8px}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-body-right{margin-left:80px}#market_context_headcrab .sovetnik-popup-body-footer{position:relative;text-align:right;font-size:0;display:table;width:100%}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-body-footer{padding-left:40px}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-body-footer{padding-left:30px}#market_context_headcrab .sovetnik-popup-body-footer-left,#market_context_headcrab .sovetnik-popup-body-footer-right{display:table-cell;vertical-align:top}#market_context_headcrab .sovetnik-popup-body-footer-left{text-align:left}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-body_with_ico .sovetnik-popup-body-footer-left{padding-left:50px}#market_context_headcrab .sovetnik-popup-body-footer-right{text-align:right}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-footer{background-color:#f2f2f2;height:41px;font-size:13px;padding:0 24px;line-height:41px}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-footer{background-color:#e9e9e9;border-top:1px solid #e4e4e4;height:39px;font-size:11px;padding:0 16px;line-height:38px;-webkit-border-radius:0 0 5px 5px;-moz-border-radius:0 0 5px 5px;border-radius:0 0 5px 5px}#market_context_headcrab .sovetnik-popup-footer-left,#market_context_headcrab .sovetnik-popup-footer-right{display:table-cell;vertical-align:middle}#market_context_headcrab .sovetnik-popup-footer-left{text-align:left}#market_context_headcrab .sovetnik-popup-footer-right{text-align:right}#market_context_headcrab .sovetnik-popup-footer,#market_context_headcrab .sovetnik-popup-footer span{color:#999}#market_context_headcrab .sovetnik-popup-footer span{text-decoration:underline;cursor:pointer}#market_context_headcrab .sovetnik-services-ico{width:64px;height:64px;position:relative}#market_context_headcrab .sovetnik-services-ico-market{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 64 64'%3E%3Cpath fill='%234277CA' d='M18 15l-3.494-9H4v5.008h6.5l10.182 27.98 26.082-7.21S50 31.07 50 26.878V15H18z'/%3E%3Ccircle fill='%23222' cx='16.997' cy='48.001' r='3.999'/%3E%3Ccircle fill='%23222' cx='39.996' cy='48.001' r='3.999'/%3E%3C/svg%3E\")}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-title{font:400 20px/24px 'Segoe UI',sans-serif;margin:0 0 14px}#market_context_headcrab.pb-sitebar_win .sovetnik-popup p{margin:0 0 16px}#market_context_headcrab.pb-sitebar_win .sovetnik-popup p:last-child{margin:0 0 -6px}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-title{font:400 15px/1.25 'San Francisco',Helvetica,sans-serif;margin:0 0 15px}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup p{margin:0 0 9px}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup p:last-child{margin:0 0 -5px}#market_context_headcrab .sovetnik-popup-button{display:inline-block;text-align:center;vertical-align:middle;cursor:pointer;color:#000;padding:0 16px;margin:0;white-space:nowrap;text-decoration:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#market_context_headcrab .sovetnik-popup-button+.sovetnik-popup-button{margin-left:8px}#market_context_headcrab .sovetnik-popup-footer-left .sovetnik-popup-button+.sovetnik-popup-button{margin-left:0;margin-right:8px}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button{background:#ccc;height:32px;min-width:112px;font:400 15px/2.133333333 'Segoe UI',sans-serif}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button:hover,#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button:focus,#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button:active{-webkit-box-shadow:inset 0 0 0 2px #898989;-moz-box-shadow:inset 0 0 0 2px #898989;box-shadow:inset 0 0 0 2px #898989}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button:active{background:#999}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button_primary{background:#fc0}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button_primary:hover,#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button_primary:focus,#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button_primary:active{-webkit-box-shadow:inset 0 0 0 2px #ffa400;-moz-box-shadow:inset 0 0 0 2px #ffa400;box-shadow:inset 0 0 0 2px #ffa400}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button_primary:active{background:#ffb800}#market_context_headcrab .sovetnik-popup-button_disabled,#market_context_headcrab .sovetnik-popup-button_disabled:hover,#market_context_headcrab .sovetnik-popup-button_disabled:focus,#market_context_headcrab .sovetnik-popup-button_disabled:active{pointer-events:none;cursor:not-allowed}#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button_disabled,#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button_disabled:hover,#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button_disabled:focus,#market_context_headcrab.pb-sitebar_win .sovetnik-popup-button_disabled:active{background:#ededed;color:#ccc}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button{position:relative;background-color:rgba(0,0,0,.1);background:-webkit-linear-gradient(top,rgba(0,0,0,.1),rgba(0,0,0,.23));background:-moz-linear-gradient(top,rgba(0,0,0,.1),rgba(0,0,0,.23));background:linear-gradient(to bottom,rgba(0,0,0,.1),rgba(0,0,0,.23));height:24px;min-width:104px;font:400 12px/2 'San Francisco',Helvetica,sans-serif;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.05);-moz-box-shadow:0 1px 0 rgba(0,0,0,.05);box-shadow:0 1px 0 rgba(0,0,0,.05);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button:before{position:absolute;left:1px;right:1px;bottom:1px;top:1px;content:'';background:#fff;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button:active{color:#333}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button:active:before{background:#f6f6f6}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button_primary{background-color:#e6b610;background:-webkit-linear-gradient(top,#ffd615,#e6b610);background:-moz-linear-gradient(top,#ffd615,#e6b610);background:linear-gradient(to bottom,#ffd615,#e6b610);border-color:transparent!important}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button_primary:before{background-color:#fc0;background:-webkit-linear-gradient(top,#fddb4d,#fc0);background:-moz-linear-gradient(top,#fddb4d,#fc0);background:linear-gradient(to bottom,#fddb4d,#fc0)}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button_primary:active{background-color:#e68e10;background:-webkit-linear-gradient(top,#ffae15,#e68e10);background:-moz-linear-gradient(top,#ffae15,#e68e10);background:linear-gradient(to bottom,#ffae15,#e68e10)}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button_primary:active:before{background-color:#fdb34d;background:-webkit-linear-gradient(top,#fdb34d,#ffa400);background:-moz-linear-gradient(top,#fdb34d,#ffa400);background:linear-gradient(to bottom,#fdb34d,#ffa400)}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button_disabled,#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button_disabled:hover,#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button_disabled:focus,#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button_disabled:active{background:#f6f6f6;color:#666}#market_context_headcrab.pb-sitebar_mac .sovetnik-popup-button-text{position:relative}#market_context_headcrab .pb-sitebar_popover_settings{display:none}#market_context_headcrab .clearfix:before,#market_context_headcrab .clearfix:after{content:\" \";display:table}#market_context_headcrab .clearfix:after{clear:both}#market_context_headcrab .pb-sitebar_popover-header{border-bottom:1px solid #e5e5e5;padding:20px 0 17px}#market_context_headcrab .pb-sitebar_popover-header-left{float:left;width:320px}#market_context_headcrab .pb-sitebar_popover-header-right{float:left;width:125px;text-decoration:none}#market_context_headcrab .pb-sitebar_popover-header-right a{font-size:15px!important;text-decoration:none!important}#market_context_headcrab .pb-sitebar_popover-header-right{text-align:right}#market_context_headcrab .pb-sitebar_popover-footer{border-top:1px solid #e5e5e5;padding:16px 0 9px}#market_context_headcrab .pb-sitebar_popover-footer a{font-size:15px!important;text-decoration:none!important}#market_context_headcrab .pb-sitebar_popover-location{position:relative;padding-left:32px;font-size:15px!important}#market_context_headcrab .pb-sitebar_popover-location-name{font-weight:700;font-size:15px!important}#market_context_headcrab .pb-sitebar_popover-location-i{position:absolute;left:0;top:50%;margin-top:-8px!important}#market_context_headcrab .pb-sitebar_popover-settings{padding:11px 0 30px 32px}#market_context_headcrab .pb-sitebar_popover-settings-items{list-style:none}#market_context_headcrab .pb-sitebar_popover-settings-item{position:relative;margin:23px 0}#market_context_headcrab .pb-sitebar_popover-settings-item-i{position:absolute;left:-32px;top:50%;margin-top:-9px!important}#market_context_headcrab .pb-sitebar_popover_550{width:550px;padding:30px 50px}#market_context_headcrab .pb-sitebar_popover-settings{padding:11px 0 30px 32px;font-size:15px!important}#market_context_headcrab .pb-sitebar_popover-settings a{text-decoration:none!important}#market_context_headcrab .pb-sitebar_popover-settings-items{list-style:none}#market_context_headcrab .pb-sitebar_popover-body .pb-sitebar_popover-settings a{margin-top:0!important;margin-bottom:0!important;font-size:15px!important}#market_context_headcrab .pb-sitebar_popover-settings-item{position:relative;margin:23px 0}#market_context_headcrab .pb-sitebar_popover-settings-item-i{position:absolute;left:-32px;top:50%;margin-top:-9px!important}#market_context_headcrab .pb-i_location{background-position:-128px 0;margin:0;font-size:15px!important}#market_context_headcrab .pb-i_close{background-position:-128px -16px;margin:0}#market_context_headcrab .pb-i_check{background-position:-128px -32px;width:18px;margin:0}#market_context_headcrab .pb-sitebar_popover-location-name{width:10%}",
    template: "<div id=\"market_context_headcrab\" class=\"pb-sitebar {{#isMacBrowser}}pb-sitebar_mac{{/isMacBrowser}}{{^isMacBrowser}}pb-sitebar_win{{/isMacBrowser}} {{#needShowOptIn}} pb-sitebar_offer {{/needShowOptIn}} {{#needShowAdultOptIn}} pb-sitebar_offer pb-sitebar_adult {{/needShowAdultOptIn}} {{abClass}} {{viewModificators}}\" style=\"top:0\">{{#isAvia}}<div class=\"pb-cell pb-sitebar-logo\">{{#customLogo}} <img alt=\"\" src=\"{{customLogo}}\"> {{/customLogo}} {{^customLogo}} <img alt=\"\" src=\"data:image/png;base64,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\"> {{/customLogo}}</div>{{/isAvia}} {{#isProduct}} {{#isDefaultScript}}<div class=\"pb-cell pb-sitebar-logo\"><img alt=\"\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAYCAYAAAAPtVbGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAghJREFUeNpidM3ZKMXGxhrLgAZ+//m3ddcknysMVAAsrMwssgwMTB0YEixMhkAqghqWMOGSYGT4H+icvU6YKpZsm3j69O/Xr3hg+P///6ug1rCxs3HGUcMSRnQBj/zt7szMjDtA7P//Ga4z/PobQIkFP9j+fWXEFG5g8i40f8TAyChNDV/8Z2DYgiVOGv4BPbiEgYoAa8T//v17Ac0t2TXF9wYwPk7S1BIoWEBzSxh//FkJTM4/aWrJ1uk+74HURorzyH+G50x4k9///xQFGTBe////93c1Xku2P/2yC2jRc9IN//8ciJcAM6HbtoneuxkJafAq3N7FyMhYSsDQT0DqILD82PP/9/892yd7XUMpbAm66s//BYys6Jb8/wUMiuP//zPuBYbInh8XTp4+cKDhD9FlFzbgXbjjJLB4YAMqBhr6d8/Lr/8OnZ3l+42aGZbBwaGBhWGwA2ZcEnJyctbCwsLJfHx8TB8/frxPKL8pKSlFCQgIBPDy8j799OnTe4JxArKAmZn5MDBVgeX//fvn+eDBgx24bABa0Aik6qAp7e2vX7/Unz59+hZvjgdaYA+zAKyIicmRQBKGywO1CbOwsOgRLFaAmrYBqV9Q9l8gtRlv0cHIuAGJ+/jr169niErCioqK6kALHIC+OHbv3r3LhCIXGMTOwBBQ/Pnz54Znz569QZYDCDAADJjPt0ourxwAAAAASUVORK5CYII=\"></div>{{/isDefaultScript}} {{^isDefaultScript}}<div class=\"pb-cell pb-sitebar-logo\">{{#customLogo}} <img alt=\"\" src=\"{{customLogo}}\"> {{/customLogo}} {{^customLogo}} <img alt=\"\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAYCAYAAAAPtVbGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAghJREFUeNpidM3ZKMXGxhrLgAZ+//m3ddcknysMVAAsrMwssgwMTB0YEixMhkAqghqWMOGSYGT4H+icvU6YKpZsm3j69O/Xr3hg+P///6ug1rCxs3HGUcMSRnQBj/zt7szMjDtA7P//Ga4z/PobQIkFP9j+fWXEFG5g8i40f8TAyChNDV/8Z2DYgiVOGv4BPbiEgYoAa8T//v17Ac0t2TXF9wYwPk7S1BIoWEBzSxh//FkJTM4/aWrJ1uk+74HURorzyH+G50x4k9///xQFGTBe////93c1Xku2P/2yC2jRc9IN//8ciJcAM6HbtoneuxkJafAq3N7FyMhYSsDQT0DqILD82PP/9/892yd7XUMpbAm66s//BYys6Jb8/wUMiuP//zPuBYbInh8XTp4+cKDhD9FlFzbgXbjjJLB4YAMqBhr6d8/Lr/8OnZ3l+42aGZbBwaGBhWGwA2ZcEnJyctbCwsLJfHx8TB8/frxPKL8pKSlFCQgIBPDy8j799OnTe4JxArKAmZn5MDBVgeX//fvn+eDBgx24bABa0Aik6qAp7e2vX7/Unz59+hZvjgdaYA+zAKyIicmRQBKGywO1CbOwsOgRLFaAmrYBqV9Q9l8gtRlv0cHIuAGJ+/jr169niErCioqK6kALHIC+OHbv3r3LhCIXGMTOwBBQ/Pnz54Znz569QZYDCDAADJjPt0ourxwAAAAASUVORK5CYII=\"> {{/customLogo}}</div>{{/isDefaultScript}} {{/isProduct}} {{#isClothes}}<div class=\"pb-cell pb-sitebar-cnt pb-no-select\" id=\"market_context_text\">Скидки на {{category}} на Яндекс.Маркете <strong>(до {{maxDiscount}}&#37;)</strong></div>{{/isClothes}} {{^isClothes}} {{#offersFound}}<div class=\"pb-cell pb-sitebar-cnt pb-no-select\" id=\"market_context_text\">{{#needShowAgeBadge}}<div class=\"pb-sitebar-badge\"><div class=\"pb-badge pb-badge-{{age}}\">{{age}}+</div></div>{{/needShowAgeBadge}}<div class=\"pb-sitebar-text js-russian-randomize\" id=\"market_context_text_content\">{{#isClassified}} Цена на новый {{#model}}<strong>{{productName}}</strong>{{/model}}{{^model}}{{productName}}{{/model}} в магазине {{shop.name}} {{/isClassified}} {{^isClassified}} {{#isLowestPrice}} Более&nbsp;выгодная&nbsp;цена&nbsp;на&nbsp;{{#model}} <strong>{{productName}}</strong>{{/model}}{{^model}}{{productName}}{{/model}} в магазине {{shop.name}} {{/isLowestPrice}} {{^isLowestPrice}} {{#isHigherPrice}} На этой странице самая низкая цена на {{#model}} <strong>{{productName}}</strong>{{/model}}{{^model}}{{productName}}{{/model}} {{/isHigherPrice}} {{^isHigherPrice}} Цена в Яндекс.Маркете на {{#model}} <strong>{{productName}}</strong>{{/model}}{{^model}}{{productName}}{{/model}} в магазине {{shop.name}} {{/isHigherPrice}} {{/isLowestPrice}} {{/isClassified}}</div>{{^isHigherPrice}} <span class=\"pb-dash\">&nbsp;&mdash;&nbsp;</span><div class=\"pb-sitebar-price\" id=\"market_context_price\">{{priceText}}</div>{{/isHigherPrice}} &nbsp;<div class=\"pb-sitebar-price-delivery\" id=\"market_context_delivery\">{{#isHigherPrice}} (по данным Яндекс.Маркета) {{/isHigherPrice}} {{^isHigherPrice}} {{#mainOfferDelivery}} (<img alt=\"доставка:\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE2OXB4IiBoZWlnaHQ9IjEwM3B4IiB2aWV3Qm94PSIwIDAgMTY5IDEwMyIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLRgdC60LDRh9Cw0L3QvdGL0LUt0YTQsNC4zIbQu9GLLWNvcHkiIGZpbGw9IiM3NTZBNDMiPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBjeD0iNDIiIGN5PSI5MSIgcj0iMTIiPjwvY2lyY2xlPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBjeD0iMTI4IiBjeT0iOTEiIHI9IjEyIj48L2NpcmNsZT4KICAgICAgICAgICAgPHBhdGggZD0iTTE0OS42ODU3MTQsMzYuNDI4NTcxNCBMMTMyLjc4NTcxNCwxMi4xNDI4NTcxIEw5Ni41NzE0Mjg2LDEyLjE0Mjg1NzEgTDk2LjU3MTQyODYsNjAuNzE0Mjg1NyBMODQuNSwwIEwwLDAgTDAsODUgTDIxLjcyODU3MTQsODUgQzI0LjE0Mjg1NzEsNzYuNSAzMi41OTI4NTcxLDY5LjIxNDI4NTcgNDIuMjUsNjkuMjE0Mjg1NyBDNTEuOTA3MTQyOSw2OS4yMTQyODU3IDYwLjM1NzE0MjksNzYuNSA2Mi43NzE0Mjg2LDg1IEwxMDcuNDM1NzE0LDg1IEMxMDkuODUsNzYuNSAxMTguMyw2OS4yMTQyODU3IDEyNy45NTcxNDMsNjkuMjE0Mjg1NyBDMTM3LjYxNDI4Niw2OS4yMTQyODU3IDE0NC44NTcxNDMsNzYuNSAxNDcuMjcxNDI5LDg1IEwxNjksODUgTDE2OSw0OC41NzE0Mjg2IEwxNDkuNjg1NzE0LDM2LjQyODU3MTQgTDE0OS42ODU3MTQsMzYuNDI4NTcxNCBaIE0xMjAuNzE0Mjg2LDQ4LjU3MTQyODYgTDEyMC43MTQyODYsMjUuNSBMMTQwLjAyODU3MSw0OC41NzE0Mjg2IEwxMjAuNzE0Mjg2LDQ4LjU3MTQyODYgTDEyMC43MTQyODYsNDguNTcxNDI4NiBaIiBpZD0iU2hhcGUtQ29weSI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+\">&nbsp; {{#delivery}} {{#price}} {{value}} {{currency}}) {{/price}} {{^price}} {{#free}} бесплатно) {{/free}} {{^free}} {{brief}}) {{/free}} {{/price}} {{/delivery}} {{^delivery}} не производится) {{/delivery}} {{/mainOfferDelivery}} {{/isHigherPrice}}</div>&nbsp;</div>{{/offersFound}} {{^offersFound}}<div class=\"pb-cell pb-sitebar-cnt pb-no-select\"><strong>{{productName}}</strong> не продаётся на Яндекс.Маркете в вашем регионе</div>{{/offersFound}} {{/isClothes}}<div class=\"pb-cell pb-sitebar-btns pb-no-select\">{{#isClothes}} <a id=\"market_context_shops\" class=\"pb-sitebar-button pb-sitebar-button-all\" title=\"Похожие товары\">Поcмотреть <span class=\"pb-caret\"></span></a> {{/isClothes}} {{^isClothes}} {{#offersFound}} {{^isHigherPrice}} <a class=\"pb-sitebar-button\" title=\"Перейти в магазин\">{{#isProduct}} Посмотреть {{/isProduct}} {{#isAvia}} Найти билеты {{/isAvia}}</a> {{/isHigherPrice}} {{#shops.length}} <a id=\"market_context_shops\" class=\"pb-sitebar-button pb-sitebar-button-all\" title=\"Предложения других магазинов\">{{#isWebPartner}}Сравнить цены{{/isWebPartner}}{{^isWebPartner}}Еще предложения{{/isWebPartner}} <span class=\"pb-caret\"></span></a> {{/shops.length}} {{/offersFound}} {{^offersFound}} <a id=\"market_context_shops\" class=\"pb-sitebar-button pb-sitebar-button-all\" title=\"Похожие товары\">Похожие товары <span class=\"pb-caret\"></span></a> {{/offersFound}} {{/isClothes}}</div><div class=\"pb-cell pb-sitebar-options pb-no-select\"><a id=\"market_context_question\" class=\"pb-sitebar-i pb-sitebar-question pb-sitebar-right-action\" title=\"{{#isWebPartner}}О сервисе{{/isWebPartner}}{{^isWebPartner}}О программе{{/isWebPartner}}\"></a> <a id=\"market_context_settings\" class=\"pb-sitebar-i pb-sitebar-settings pb-sitebar-right-action\" title=\"Настройки\"></a> <a id=\"market_context_close\" class=\"pb-sitebar-i pb-sitebar-close pb-sitebar-right-action\" title=\"Закрыть\"></a></div>{{#warning}}<div class=\"pb-disclaimer pb-disclaimer_bar\"><div class=\"pb-disclaimer-txt\"><i class=\"pb-disclaimer-i\"></i>{{warning}}</div></div>{{/warning}}<div id=\"sitebar_info_popover\" class=\"pb-sitebar_popover pb-sitebar_popover_feedback\" style=\"display:none\"><a class=\"pb-sitebar_popover-close\"></a><h1 class=\"pb-title\">{{#isMbrApplication}}<strong>Советник Яндекс.Маркета</strong>{{/isMbrApplication}} {{^isMbrApplication}}Советник Яндекс.Маркета для <strong>{{applicationName}}</strong>{{/isMbrApplication}}</h1>{{#isProduct}}<p>Это приложение подсказывает вам более выгодные цены на товары, на которые вы смотрите прямо сейчас.</p><p><a href=\"{{helpUrl}}\" target=\"_blank\" class=\"pb-color pb-block\">Помощь</a> <a href=\"{{feedbackUrl}}\" target=\"_blank\" class=\"pb-color pb-block\">Обратная связь</a></p><p class=\"pb-footer\">© 2013–2016 ООО «Яндекс» {{^isWebPartner}} <a class=\"pb-sitebar_software_agreement pb-newline\" href=\"{{eulaUrl}}\" target=\"_blank\">Лицензионное соглашение</a> {{/isWebPartner}}</p>{{/isProduct}} {{#isAvia}}<p>Это приложение подсказывает вам более выгодные цены на авиабилеты в нужном вам направлении. Данные Aviasales.</p>{{/isAvia}}</div><div id=\"sitebar_feedback_popover\" class=\"pb-sitebar_popover pb-sitebar_popover_feedback\" style=\"display: none\"><a href=\"\" class=\"pb-sitebar_popover-close\"></a><h1 class=\"pb-title\">Спасибо!</h1><p><span class=\"pb-block\">Ваше сообщение поможет</span> <span class=\"pb-block\">улучшить Советника</span></p></div><div id=\"sitebar_settings_popover\" style=\"display: none\" class=\"pb-sitebar_popover pb-sitebar_popover_settings pb-sitebar_popover_550\"><a href=\"#\" class=\"pb-sitebar_popover-close\"></a><div class=\"pb-font_size_15 pb-link_no_border\"><div class=\"pb-sitebar_popover-header clearfix\"><div class=\"pb-sitebar_popover-header-left\"><div class=\"pb-sitebar_popover-location\"><i class=\"pb-i pb-i_location pb-sitebar_popover-location-i\"></i> Ваш город: <span class=\"pb-sitebar_popover-location-name\">{{regionName}}</span></div></div><div class=\"pb-sitebar_popover-header-right\"><a href=\"{{settingsURL}}\" target=\"_blank\" class=\"js-settings-link\">Изменить регион</a></div></div><div class=\"pb-sitebar_popover-body\"><div class=\"pb-sitebar_popover-settings\"><ul class=\"pb-sitebar_popover-settings-items\">{{#settingsItems}}<li class=\"pb-sitebar_popover-settings-item\">{{#enabled}} <i class=\"pb-i pb-i_check pb-sitebar_popover-settings-item-i\"></i> {{/enabled}} {{^enabled}} <i class=\"pb-i pb-i_close pb-sitebar_popover-settings-item-i\"></i> {{/enabled}} {{title}} {{#isBeta}} <sup>beta</sup> {{/isBeta}}</li>{{/settingsItems}}</ul><a href=\"{{settingsURL}}\" target=\"_blank\" class=\"js-settings-link pb-btn pb-btn-primary pb-btn-size_m pb-btn-no_border\">Изменить настройки</a></div></div><div class=\"pb-sitebar_popover-footer\"><a href=\"{{settingsURL}}/#domain={{domain}}\" target=\"_blank\" class=\"js-settings-link\">Выключить на этом сайте</a></div></div></div>{{#needShowOptIn}} {{#needShowYandexBrowserOptOut}}<div class=\"sovetnik-popup\" id=\"sitebar_opt_out_popover\"><div class=\"sovetnik-popup-tail\"></div><div class=\"sovetnik-popup-body sovetnik-popup-body_with_ico\"><div class=\"sovetnik-popup-body-cnt\"><div class=\"sovetnik-popup-body-left\"><div class=\"sovetnik-services-ico sovetnik-services-ico-market\"></div></div><div class=\"sovetnik-popup-body-right\"><h1 class=\"sovetnik-popup-title\">Яндекс.Советник</h1><p>Советник автоматически сравнивает цены в&nbsp;Яндекс.Маркете на&nbsp;интересующие вас товары и&nbsp;помогает покупать дешевле.</p></div></div><div class=\"sovetnik-popup-body-footer\"><div class=\"sovetnik-popup-body-footer-right\"><span class=\"sovetnik-popup-button js-ya-browser-optout-ok\"><span class=\"sovetnik-popup-button-text\">Ок, спасибо</span></span></div></div></div><div class=\"sovetnik-popup-footer\">Отключить Советник можно в <span class=\"js-ya-browser-optout-settings\">настройках</span></div></div>{{/needShowYandexBrowserOptOut}} {{^needShowYandexBrowserOptOut}}<div class=\"pb-overlay\"><div id=\"sitebar_policy_popover\" class=\"pb-sitebar_popover pb-sitebar_popover_centered pb-sitebar_popover_opt_out\"><a href=\"\" class=\"pb-sitebar_popover-close\"></a><div class=\"pb-header\">{{#optInImage}} <img src=\"{{optInImage}}\"> {{/optInImage}}<h1 class=\"pb-title pb-title_vendor\">{{optInTitle}}</h1></div><p><label id=\"price_context_show_this_site\" class=\"pb-checkbox-label checked\"><input type=\"checkbox\" checked=\"checked\">Советник Яндекс.Маркета для {{applicationName}} помогает сэкономить деньги с помощью автоматического поиска более выгодной цены на товары на сайтах интернет-магазинов</label></p><p class=\"pb-btn-cnt\"><a id=\"price_context_show_price\" class=\"pb-btn pb-btn-success pb-btn-block pb-btn-lg\">OK</a></p><p class=\"pb-footer\">Используя Советник Яндекс.Маркета для {{applicationName}}, я принимаю условия <a href=\"{{eulaUrl}}\" target=\"_blank\" id=\"price_context_policy\" class=\"pb-link pb-link-policy\">Лицензионного соглашения</a></p></div></div>{{/needShowYandexBrowserOptOut}} {{/needShowOptIn}} {{#needShowAdultOptIn}}<div class=\"pb-overlay\"><div class=\"pb-overlay-header\"><h6 class=\"pb-overlay-title\">Нажмите кнопку «Показывать»,<br>чтобы начать пользоваться Советником</h6></div><div id=\"sitebar_policy_popover\" class=\"pb-sitebar-offer pb-sitebar_popover pb-sitebar_popover_centered pb-sitebar_popover_policy\"><h1 class=\"pb-title\">{{#isMbrApplication}}<strong>Советник Яндекс.Маркета</strong>{{/isMbrApplication}} {{^isMbrApplication}}<strong>Советник Яндекс.Маркета</strong> для <strong>{{applicationName}}</strong>{{/isMbrApplication}} нашел товары из категории &laquo;для взрослых&raquo;. Чтобы увидеть их, подтвердите, что вы старше 18 лет</h1><p class=\"pb-btn-cnt\"><a id=\"adult_yes\" class=\"pb-btn pb-btn-primary\">Подтвердить</a> <a id=\"adult_no\" class=\"pb-btn\">Отказаться</a></p></div></div>{{/needShowAdultOptIn}} {{#showWelcome}}<div id=\"sitebar_policy_popover\" class=\"pb-sitebar-offer pb-sitebar_popover pb-sitebar_popover_policy pb-sitebar-welcome\" style=\"z-index:100000\"><a class=\"pb-sitebar_popover-close\"></a><h1 class=\"pb-title\"><strong>Яндекс.Элементы</strong> помогут найти более выгодные цены на&nbsp;товары в&nbsp;интернете.</h1><p class=\"pb-btn-cnt\"><a id=\"pricebar_welcome_ok\" class=\"pb-btn pb-btn-primary\">ОК</a></p><p class=\"pb-footer\">Вы можете настроить или отключить такие советы в <a href=\"{{settingsURL}}\">Настройках</a></p></div>{{/showWelcome}}<div id=\"sitebar_shops_popover\" class=\"pb-sitebar_popover pb-sitebar_popover_large {{^isClothes}}{{^offersFound}}pb-sitebar_popover_xxl{{/offersFound}}{{/isClothes}} pb-sitebar_popover_product {{#isClothes}}pb-sitebar_popover_clothes{{/isClothes}}\" style=\"display: none\"><a href=\"\" class=\"pb-sitebar_popover-close\"></a> {{#isClothes}}<h1 class=\"pb-product-title\"><a href=\"{{categoryUrl}}\" title=\"{{category}}\" target=\"_blank\">{{category}}</a></h1><div class=\"pb-divider\"></div><div class=\"pb-clothes\" id=\"sitebar_clothes_scroll\">{{#offers}}<div class=\"pb-clothes-item\"><a href=\"{{urls.photo}}\" target=\"_blank\"><div class=\"pb-clothes-img\" title=\"Перейти в магазин\"><img src=\"{{photo}}\" alt=\"{{name}}\"></div></a> <a target=\"_blank\" href=\"{{urls.title}}\" class=\"pb-clothes-item-title\" title=\"Перейти в магазин\">{{name}}</a> <a target=\"_blank\" href=\"{{urls.price}}\" class=\"pb-product-price\"><span class=\"pb-price\">{{priceText}}</span> {{#oldPriceText}} <span class=\"pb-price-old\">{{oldPriceText}}</span> {{/oldPriceText}}</a> {{#price.discount}} <span class=\"pb-sale\">−{{price.discount}}&#37;</span> {{/price.discount}}</div>{{/offers}}</div><div class=\"pb-divider\"></div><table cellpadding=\"0\" class=\"pb-table pb-stats\"><tr><td class=\"pb-table-cell pb-table-cell_first\"><a href=\"{{offersUrl}}\" target=\"_blank\">Все цены со скидками</a> <span class=\"pb-product-total\">({{offersCount}} )</span></td></tr></table>{{#shopInfo}}<div class=\"pb-block_full pb-product-shop pb-product-shop_clothes\"><table cellpadding=\"0\" class=\"pb-table\"><tbody><tr><td class=\"pb-table-cell\"><div class=\"pb-product-shop-title\">Вы на странице магазина {{shopName}}</div></td><td class=\"pb-table-cell pb-table-cell_right\"><a href=\"{{url}}\" target=\"_blank\" class=\"pb-product-shop-rate\"><div class=\"pb-rate\"><i class=\"pb-rate-active pb-rate-active-{{rating}}\">{{rating}}</i></div><span class=\"pb-product-total\">{{gradeText}}</span></a></td></tr></tbody></table></div>{{/shopInfo}}<div class=\"pb-sitebar_popover_footer pb-sitebar_popover_footer_clothes\"><table cellpadding=\"0\" class=\"pb-table\"><tr><td class=\"pb-table-cell pb-table-cell_first\"></td><td class=\"pb-table-cell pb-table-cell_center\"><a class=\"wrong-product\" title=\"Неверно определен товар\">Сообщить об ошибке</a></td><td class=\"pb-table-cell pb-table-cell_right\">Данные <a href=\"{{marketUrl}}\" target=\"_blank\"><span class=\"pb-ya\">Я</span>ндекс.Маркета</a></td></tr></table></div>{{/isClothes}} {{^isClothes}} {{#offersFound}} {{#model}}<h1 class=\"pb-product-title\"><a href=\"{{model.urls.model}}\" title=\"{{model.caption}}\" target=\"_blank\">{{model.caption}}</a></h1>{{/model}} {{^model}}<h1 class=\"pb-product-title\"><a href=\"{{searchUrl}}\" title=\"{{productName}}\" target=\"_blank\">{{productName}}</a></h1>{{/model}} {{#warning}}<div class=\"pb-disclaimer pb-disclaimer_dark\"><div class=\"pb-disclaimer-txt\"><i class=\"pb-disclaimer-i\"></i>{{warning}}</div></div>{{/warning}} {{#model}}<div class=\"pb-product-stat\"><table cellpadding=\"0\" class=\"pb-table\"><tr><td class=\"pb-table-cell pb-product-prices\"><a href=\"{{model.urls.price}}\" target=\"_blank\">Средняя цена</a>&nbsp;&nbsp;&nbsp; <span class=\"pb-product-price\">{{model.prices.avg}} <span class=\"pb-{{currencyClass}}\">{{model.prices.curName}}</span></span>&nbsp;&nbsp;&nbsp; <span class=\"pb-product-price_range\">({{model.prices.min}} – {{model.prices.max}} {{model.prices.curName}})</span></td><td class=\"pb-table-cell pb-table-cell_right\">{{#model.rating}}<div class=\"pb-product-rate\">Рейтинг товара <span class=\"pb-product-rate-value\" title=\"Рейтинг товара {{model.ratingText}} из 5\">{{model.ratingText}}</span></div>{{/model.rating}}</td></tr></table></div>{{/model}}<div class=\"pb-divider\"></div>{{/offersFound}} {{^offersFound}} {{#model}}<h1 class=\"pb-product-title\"><a href=\"{{model.urls.model}}\" title=\"{{model.caption}}\" target=\"_blank\">{{model.caption}}</a></h1>{{/model}} {{#warning}}<div class=\"pb-disclaimer pb-disclaimer_dark\"><div class=\"pb-disclaimer-txt\"><i class=\"pb-disclaimer-i\"></i>{{warning}}</div></div>{{/warning}} {{#model}}<div class=\"pb-product-availability\">К сожалению, этого товара нет в продаже</div>{{#model.rating}}<div style=\"text-align:right;margin-top: -14px\" class=\"pb-product-rate\">Рейтинг товара <span class=\"pb-product-rate-value\" title=\"Рейтинг товара {{model.ratingText}} из 5\">{{model.ratingText}}</span></div>{{/model.rating}} {{/model}}<div class=\"pb-divider\"></div><div class=\"pb-carousel\"><div class=\"pb-carousel__header\"><h2 class=\"pb-carousel__title\">Похожие товары в наличии</h2></div>{{#showCarouselArrows}}<div class=\"pager-arrows\"><span id=\"sitebar_carousel_prev\" class=\"sitebar_carousel_prev pager-arrows__item pager-arrows__item_type_prev pager-arrows__item_type_prev_js_inited pb-carousel-arrow-disabled\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3IiBoZWlnaHQ9IjEyIiB2aWV3Qm94PSIxIDEyIDcgMTIiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMSAxMiA3IDEyIj48dGl0bGU+U2xpY2UgMTwvdGl0bGU+PHBhdGggZD0iTTcuNzMgMjIuNzRsLTQuNzEtNC42Yy0uMDgtLjA4LS4wOC0uMjEgMC0uMjlsNC43MS00LjYuMDktLjA4Yy4xMS0uMTIuMTgtLjI3LjE4LS40NSAwLS40LS4zMy0uNzItLjc0LS43Mi0uMTggMC0uMzQuMDctLjQ3LjE4bC0uMDkuMDgtNS41OSA1LjQ2Yy0uMTYuMTYtLjE2LjQxIDAgLjU3bDUuNTkgNS40Ni4wOS4wOGMuMTMuMS4yOS4xNy40Ny4xNy40MSAwIC43NC0uMzIuNzQtLjcyIDAtLjE4LS4wNy0uMzMtLjE4LS40NmwtLjA5LS4wOHoiLz48L3N2Zz4=\" alt=\"<\"></span><span id=\"sitebar_carousel_next\" class=\"sitebar_carousel_next pager-arrows__item pager-arrows__item_type_next i-bem pager-arrows__item_type_next_js_inited\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3IiBoZWlnaHQ9IjEyIiB2aWV3Qm94PSIxIDEyIDcgMTIiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMSAxMiA3IDEyIj48dGl0bGU+U2xpY2UgMTwvdGl0bGU+PHBhdGggZD0iTTEuMjcgMjIuNzRsNC43MS00LjZjLjA4LS4wOC4wOC0uMjEgMC0uMjlsLTQuNzEtNC42LS4wOS0uMDhjLS4xMS0uMTItLjE4LS4yNy0uMTgtLjQ1IDAtLjQuMzMtLjcyLjc0LS43Mi4xOCAwIC4zNC4wNy40Ny4xOGwuMDkuMDggNS41OSA1LjQ2Yy4xNi4xNi4xNi40MSAwIC41N0wyLjMgMjMuNzVsLS4xLjA3Yy0uMTIuMTEtLjI4LjE4LS40Ni4xOC0uNDEgMC0uNzQtLjMyLS43NC0uNzIgMC0uMTguMDctLjMzLjE4LS40NmwuMDktLjA4eiIvPjwvc3ZnPg==\" alt=\">\"></span></div>{{/showCarouselArrows}}<div id=\"sitebar_carousel_caption\" class=\"pb-carousel__body\"><div id=\"sitebar_carousel_list\" class=\"pb-carousel__list\">{{#similarModels}}<div class=\"pb-carousel__item\"><a target=\"_blank\" href=\"{{urls.photo}}\" class=\"pb-carousel__item__image\"><img src=\"{{photo}}\" alt=\"\"> {{#rating}}<div class=\"pb-product-rate\"><span class=\"pb-product-rate-value\" title=\"Рейтинг модели {{ratingText}} из 5\">{{ratingText}}</span></div>{{/rating}} {{#isNew}}<div class=\"stickers\"><div class=\"stickers__sticker stickers__sticker_type_new\">Новинка</div></div>{{/isNew}}</a><div class=\"pb-carousel__item__head\"><h3 class=\"pb-carousel__item__title\"><a target=\"_blank\" href=\"{{urls.title}}\">{{#caption}} {{caption}} {{/caption}}</a></h3></div><div class=\"pb-carousel__item__body\"><div class=\"pb-carousel__item__price\"><span class=\"pb-product-price\">от {{priceText}}</span></div><div class=\"pb-carousel__item__offer\"><a target=\"_blank\" href=\"{{urls.price}}\" class=\"pb-btn pb-btn-primary\">Цены <span class=\"pb-btn-count\">{{offersCount}}</span></a> <span class=\"pb-product-total\"><a target=\"_blank\" href=\"{{urls.reviews}}\">{{reviewsCountText}}</a></span></div></div></div>{{/similarModels}}</div></div></div>{{/offersFound}} {{#offersFound}}<div class=\"pb-block_full pb-product-shops\"><table cellpadding=\"0\" class=\"pb-table\"><thead><tr>{{#needShowAgeColumn}}<th style=\"width: 1%\"></th>{{/needShowAgeColumn}}<th style=\"width: 6%\"></th><th style=\"width: 4%\"></th><th style=\"width: 1%\"></th>{{#haveAnyDiscounts}}<th style=\"width: 1%\"></th>{{/haveAnyDiscounts}}<th style=\"width: 1%\"></th><th style=\"width: 1%\"></th></tr></thead>{{#shops}}<tr class=\"pb-shop-line\" data-url=\"{{url}}\" data-type-offer=\"{{type}}-{{rating}}\" data-type-shop=\"Offer{{index}}\">{{#needShowAgeColumn}}<td class=\"pb-table-cell pb-product-shops-badge\">{{#needShowAgeBadge}}<div class=\"pb-badge pb-badge-{{age}}\">{{age}}+</div>{{/needShowAgeBadge}}</td>{{/needShowAgeColumn}}<td class=\"pb-table-cell pb-product-shops-name\" title=\"Перейти в магазин\"><span class=\"pb-link-mask\">{{name}}</span></td><td class=\"pb-table-cell pb-product-shops-rate\"><div class=\"pb-rate\" title=\"{{gradeText}}\"><i class=\"pb-rate-active pb-rate-active-{{rating}}\">{{rating}}</i></div></td><td class=\"pb-table-cell pb-product-shops-delivery\" title=\"{{delivery.brief}}\"><span class=\"pb-link-mask\"><i class=\"pb-i-delivery\"></i> {{#delivery}} {{#delivery.delivery}} {{#delivery.price}} {{value}} {{currency}} {{/delivery.price}} {{^delivery.price}} {{#free}} Бесплатно {{/free}} {{^free}} {{delivery.brief}} {{/free}} {{/delivery.price}} {{/delivery.delivery}} {{^delivery.delivery}} Не производится {{/delivery.delivery}} {{/delivery}}</span></td>{{#haveAnyDiscounts}}<td class=\"pb-table-cell pb-table-cell_right\">{{#discount}} <span title=\"Скидка {{discount}}%\" class=\"pb-product-discount\">&#45;{{discount}} &#37;</span> {{/discount}}</td>{{/haveAnyDiscounts}}<td class=\"pb-table-cell pb-table-cell_right pb-product-price\" title=\"Перейти в магазин\"><span class=\"pb-link-mask\">{{price}}</span> {{#discount}} <span class=\"pb-product-old-price_text\">{{oldPrice}}</span> {{/discount}}</td><td class=\"pb-table-cell pb-table-cell_right pb-product-shops-btn\" title=\"Перейти в магазин\" data-url=\"{{buttonUrl}}\"><span class=\"pb-btn pb-btn-primary\">В магазин</span></td></tr>{{/shops}}<tr>{{#haveAnyDiscounts}}<td colspan=\"{{#needShowAgeColumn}}7{{/needShowAgeColumn}}{{^needShowAgeColumn}}6{{/needShowAgeColumn}}\" class=\"pb-divider-cell\">{{/haveAnyDiscounts}} {{^haveAnyDiscounts}}</td><td colspan=\"{{#needShowAgeColumn}}6{{/needShowAgeColumn}}{{^needShowAgeColumn}}5{{/needShowAgeColumn}}\" class=\"pb-divider-cell\">{{/haveAnyDiscounts}}<div class=\"pb-divider\"></div></td></tr><tr class=\"pb-no-hover pb-market-info\">{{#model}}<td colspan=\"{{#needShowAgeColumn}}3{{/needShowAgeColumn}}{{^needShowAgeColumn}}2{{/needShowAgeColumn}}\" class=\"pb-table-cell pb-table-cell_first pb-table-cell_left\"><a href=\"{{urls.offers}}\" target=\"_blank\">Все цены</a> {{#offersCount}} <span class=\"pb-product-total\">{{offersCount}}</span> {{/offersCount}}</td><td colspan=\"2\" class=\"pb-table-cell pb-table-cell_left\"><a href=\"{{urls.map}}\" target=\"_blank\">Магазины на карте</a> <span class=\"pb-product-total\">{{outletsCount}}</span></td><td colspan=\"{{#haveAnyDiscounts}}2{{/haveAnyDiscounts}}{{^haveAnyDiscounts}}1{{/haveAnyDiscounts}}\" class=\"pb-table-cell pb-table-cell_right\"><a href=\"{{urls.reviews}}\" target=\"_blank\">Отзывы</a> <span class=\"pb-product-total\">{{reviewsCount}}</span></td>{{/model}} {{^model}}<td colspan=\"{{#haveAnyDiscounts}}6{{/haveAnyDiscounts}}{{^haveAnyDiscounts}}5{{/haveAnyDiscounts}}\" class=\"pb-table-cell pb-table-cell_first\"><a href=\"{{pricesUrl}}\" target=\"_blank\">Все цены на товар</a> {{#offersCount}} <span class=\"pb-product-total\">{{offersCount}}</span> {{/offersCount}}</td>{{/model}}</tr>{{#shopInfo}}<tr class=\"pb-grey-row pb-product-shop pb-no-hover\">{{#haveAnyDiscounts}}<td colspan=\"{{#needShowAgeColumn}}5{{/needShowAgeColumn}}{{^needShowAgeColumn}}4{{/needShowAgeColumn}}\" class=\"pb-table-cell\">{{/haveAnyDiscounts}} {{^haveAnyDiscounts}}</td><td colspan=\"{{#needShowAgeColumn}}4{{/needShowAgeColumn}}{{^needShowAgeColumn}}3{{/needShowAgeColumn}}\" class=\"pb-table-cell\">{{/haveAnyDiscounts}}<div class=\"pb-product-shop-title\">Вы на странице магазина {{shopName}}</div></td><td colspan=\"2\" class=\"pb-table-cell pb-table-cell_right\"><div class=\"pb-product-shop-rate\"><div class=\"pb-rate\"><a href=\"{{url}}\" target=\"_blank\"><i class=\"pb-rate-active pb-rate-active-{{rating}}\">{{rating}}</i></a></div><a href=\"{{url}}\" target=\"_blank\"><span class=\"pb-product-total\">{{gradeText}}</span></a></div></td></tr>{{/shopInfo}} {{^shopInfo}}<tr class=\"pb-no-hover\"><td colspan=\"{{#haveAnyDiscounts}}6{{/haveAnyDiscounts}}{{^haveAnyDiscounts}}5{{/haveAnyDiscounts}}\" class=\"pb-divider-cell\"><div class=\"pb-divider\"></div></td></tr>{{/shopInfo}}<tr class=\"pb-sitebar_popover_footer pb-no-hover\"><td colspan=\"{{#needShowAgeColumn}}3{{/needShowAgeColumn}}{{^needShowAgeColumn}}2{{/needShowAgeColumn}}\" class=\"pb-table-cell pb-table-cell_first\"><a href=\"{{shopsInfoUrl}}\" target=\"_blank\">Информация о продавцах</a></td><td colspan=\"2\" class=\"pb-table-cell wrong-product\"><a class=\"wrong-product pb-color\" data-type=\"wrong-product\" title=\"Неверно определен товар\">Сообщить об ошибке</a></td><td colspan=\"{{#haveAnyDiscounts}}2{{/haveAnyDiscounts}}{{^haveAnyDiscounts}}1{{/haveAnyDiscounts}}\" class=\"pb-table-cell pb-table-cell_right\">Данные <a href=\"{{marketUrl}}\" target=\"_blank\"><span class=\"pb-ya\">Я</span>ндекс.Маркета</a></td></tr></table></div>{{/offersFound}} {{^offersFound}}<div class=\"pb-carousel-footer\"><span style=\"width: 34%\"></span> <span><a class=\"wrong-product\" data-type=\"wrong-product\" title=\"Неверно определен товар\">Сообщить об ошибке</a></span> <span>Данные <a href=\"{{marketUrl}}\" target=\"_blank\"><span class=\"pb-ya\">Я</span>ндекс.Маркета</a></span></div>{{/offersFound}} {{/isClothes}}</div><img class=\"track\" src=\"{{trackLogo}}\"></div><div class=\"mbr-citilink-container\" style=\"display:none\"></div>",
    html: null,

    _offerAccepted: undefined,

    events: {
        'click #market_context_headcrab': 'onPricebarClick',
        'click .shop-url': 'showOpened',

        'click #price_context_show_price, #sitebar_policy_popover .pb-sitebar_popover-close': 'acceptOffer',
        'click #price_context_no': 'declineOffer',
        'click #pricebar_welcome_ok': 'hideWelcomePopover',
        'click #adult_yes': 'acceptAdult',
        'click #adult_no': 'declineAdult',

        'click #sitebar_carousel_next': 'carouselNext',
        'click #sitebar_carousel_prev': 'carouselPrev',

        'click #market_context_question': 'toggleInfo',
        'click #market_context_settings': 'toggleSettings',
        'click #market_context_shops': 'toggleShops',
        'click #market_context_headcrab .pb-sitebar_popover-close': 'hidePopovers',
        'click #market_context_close': 'closePopup',
        'click #checkbox_do_not_show': 'toggleDisallowDomain',

        'click body': 'onBodyClick',
        'mouseenter .pb-sitebar-options': 'preventShowShops',
        'mouseleave .pb-sitebar-options': 'stopPreventingShowShops',
        'mouseenter #market_context_headcrab,#market_context_shops,.pb-sitebar-button': 'initShowShops',
        'mouseenter .pb-sitebar-right-action': 'cancelShowShops',
        'mouseenter .pb-sitebar-welcome': 'cancelShowShops',
        'mouseleave #market_context_headcrab': 'cancelShowShops',
        'click #sitebar_shops_popover, #sitebar_settings_popover, #sitebar_info_popover': 'onPopoverClick',
        'click .pb-sitebar-welcome, #sitebar_feedback_popover': 'onPopoverClick',
        
        'click .js-ya-browser-optout-ok': 'hidePopovers',
        'click .js-ya-browser-optout-settings': 'onOptOutSettings',

        'resize window': 'onResize',

        'click .wrong-product, .high-price, .unknown-error, .wrong-region': 'sendError',
        'submit #form-error': 'sendError',

        'click .js-settings-link': 'onSettingsClick',
        'click #price_context_show_this_site input': 'checkOptIn',
        'selectstart .pb-no-select': 'cancelSelect'
    },

    ids: {
        pricebar: 'market_context_headcrab',
        text: 'market_context_text',
        textContent: 'market_context_text_content',
        price: 'market_context_price',
        offerPopup: 'sitebar_policy_popover',
        welcomePopover: 'sitebar_policy_popover',
        optOutYesButton: 'price_context_show_price',
        popoverInfo: 'sitebar_info_popover',
        popoverSettings: 'sitebar_settings_popover',
        popoverShops: 'sitebar_shops_popover',
        checkboxDoNotShow: 'checkbox_do_not_show',
        popoverThanks: 'sitebar_feedback_popover',
        popoverOptOut: 'sitebar_opt_out_popover',
        formError: 'form-error',
        settingsLink: 'settings_link',
        delivery: 'market_context_delivery',
        randomContainer: 'market_context_headcrab_container',
        optInCheckbox: 'price_context_show_this_site',
        clothesScroll: 'sitebar_clothes_scroll'
    },

    classes: {
        offerShown: 'pb-sitebar_offer',
        adultOfferShown: 'pb-sitebar_adult',
        buttonGo: 'pb-sitebar-button',
        shoplist: 'shoplist',
        text: 'pb-sitebar-cnt',
        optionsBlock: 'pb-sitebar-options',
        overlaySuggestArrow: 'overlay-suggest-arrow',
        highlightOptInButton: 'pb-btn-attention',
        shopLine: 'pb-shop-line',
        offerText: 'pb-offer-text',
        optInArrow: 'pb-overlay-arr',
        arrowDisabled: 'pb-carousel-arrow-disabled',
        russianTextToRandomize: 'js-russian-randomize'
    },

    /**
     * Список хостов которые будут удалены из верстки и заменены на onclick
     */
    hosts: [
        'https://sovetnik.market.yandex.ru'
    ],

    /**
     * set state to default
     */
    clean() {
        this.type = '';
        this.data = {};
        this.html = null;
        this._offerAccepted = undefined;
    },

    /**
     * create rendered pricebar
     * @param {String} type 'avia' or 'product'
     * @param {Object} serverResponse e.g. name, price, url, departureAt, returnCity, etc.
     * If we don't have scriptData we use mbr.settings for extracting it
     * @returns {Object}
     */
    init(type, serverResponse) {
        let settings = serverResponse.settings;

        this.type = type;

        try {
            this.serverResponse = JSON.stringify(serverResponse, 2, 2);
        } catch (ex) {
            this.serverResponse = JSON.stringify(serverResponse); // for aliexpress(
        }

        this.data = mbr.responseParser.getParseResult(serverResponse);
        
        if (!this.data.needShowNotifications) {
            return;
        }
        
        this.data.isMacBrowser = mbr.tools.isMacBrowser();
        
        if (this.data.needShowOptIn) {
            this.data.needShowYandexBrowserOptOut = mbr.tools.isYaBrowser() && 
                mbr.settings.getAffId() == 1004;
        }
        
        this.data.topPosition = mbr.settings.getPricebarTopPosition();
        if (this.data.similarModels) {
            this.data.showCarouselArrows = this.data.similarModels.length > 3;
        }
        
        if (!this.data.model && this.data.shops && this.data.shops.length) {
            this.data.shops = this.data.shops.slice(0, 6);
        }

        this.data.initialTop = -38;
        if (this.data.warning) {
            this.data.initialTop -= 18;
        }

        this._randomizer = this.getRandomizer(settings.noRandomize);
        this.reRenderMode = !this.data.notification && settings.reRenderMode;
        this.shouldRemoveHost = settings.shouldRemoveHost;

        mbr.hub.on('pricebar:render', () => {
            this._rendered = true;
            this._checkPricebar();
        });
        
        mbr.hub.on('button-popup:hide-pricebar-popup', () => {
            this.hidePopovers();
            this.preventShowShops();
        });
        
        mbr.hub.on('button-popup:stop-preventing-pricebar-popup', () => {
            this.stopPreventingShowShops();
        });
        
        mbr.log('render');
        
        if (this.data.notification && this.data.notification.showWhen === 'replace-pricebar') {
            this.showNotification(this.data.notification);
        } else {
            this._render();
            if (this.data.notification && !this.data.notification.showWhen) {
                this.showNotification(this.data.notification);
            }
        }

        return this;
    },

    getRandomizer(noRandomize) {
        let classes = '';
        for (let i in this.classes) {
            if (this.classes.hasOwnProperty(i)) {
                classes += ' ' + this.classes[i];
            }
        }

        let classesElement = '<div class="' + classes + '"></div>';
        let idsElement = Object.keys(this.ids).map((idKey) => {
            return '<div id="' + this.ids[idKey] + '"></div>';
        }).join(' ');

        return new mbr.Randomizer(this._getHTMLFromTemplate() + classesElement + idsElement,
            mbr.settings.getRandomNameLength(),
            noRandomize
        );
    },

    /**
     * return 'BestCPC' for mostRelevant offer, 'Lowest' for offer with lowest price, 'Profitable' otherwise
     * @param offer
     * @returns {string}
     * @private
     */
    _getTypeOffer(offer) {
        if (offer.mostRelevant) {
            return 'BestCPC';
        }
        if (offer.guaranteedLowestPrice) {
            return 'Lowest';
        }

        return 'Profitable';
    },

    /**
     * create style tag with our style and inject it to the body
     * @private
     */
    _injectCSS(css, container) {
        let cssContainer = document.createElement('style');

        cssContainer.textContent = css;
        cssContainer.text = css;

        container.appendChild(cssContainer);
    },

    /**
     * if we have inserted style we have to randomize all selectors
     * @private
     */
    _prepareExistingStyle() {
        let style;
        let styles = document.styleSheets;

        if (styles) {
            for (let i = 0; i < styles.length; i++) {
                if (styles[i].ownerNode && styles[i].ownerNode.id === 'mbrstl') {
                    style = styles[i];
                    break;
                }
            }
            if (style && style.cssRules && style.cssRules.length) {
                let length = style.cssRules.length;

                while (length--) {
                    let currentRule = style.cssRules[0];
                    let selector = currentRule.selectorText || '';
                    style.insertRule(currentRule.cssText.replace(selector, this._randomizer.randomize(selector)),
                        style.cssRules.length);
                    style.deleteRule(0);
                }
            }
        }
    },

    /**
     * get template from script tag
     * @private
     */
    _loadTemplate() {
        let content = '';
        let templateElement = document.getElementById('mbrtmplt');

        if (templateElement) {
            content = templateElement.innerHTML;
            templateElement.parentNode.removeChild(templateElement);
            return content;
        }

        return content;
    },

    /**
     * wrapper for Mustache.render and cache rendering result to the this.html property
     * @returns {String}
     * @private
     */
    _getHTMLFromTemplate() {
        let templateElement = this.template;

        if (!this.html) {
            this.template = templateElement || this._loadTemplate();
            if (this.template) {
                this.html = mbr.Mustache.render(this.template, this.data);
            }
        }

        return this.html;
    },

    /**
     * Проходит по всем элементам в this.el с href и data-url удаляя заданный host и аттрибута
     * и вешая на onclick переход на host + el.att.href[dataUrl]
     * @param {String} host
     */
    _removeHost(host) {
        let hrefElements = this.el.querySelectorAll(`[href^="${host}"]`);
        let dataUrlElements = this.el.querySelectorAll(`[data-url^="${host}"]`);

        for (let i = 0; i < hrefElements.length; i++) {
            let url = hrefElements[i].getAttribute('href');

            hrefElements[i].removeAttribute('href');

            hrefElements[i].addEventListener(
                'click',
                (e) => {
                    window.open(url);
                    e.stopPropagation();
                }
            );
        }

        for (let i = 0; i < dataUrlElements.length; i++) {
            let url = dataUrlElements[i].getAttribute('data-url');

            dataUrlElements[i].removeAttribute('data-url');

            dataUrlElements[i].addEventListener(
                'click',
                (e) => {
                    window.open(url);
                    e.stopPropagation();
                }
            );
        }
    },

    /**
     * create DOM element, inject it to the page, show and return.
     * @private
     */
    _render(forceReRender) {
        if (this.el && !forceReRender) {
            mbr.log('pricebar is already shown');
            return;
        }
        this._rendered = false;

        // create container
        let container = window.document.createElement('div');
        let html = this._randomizer.randomize(this._getHTMLFromTemplate());

        if (html) {
            container.innerHTML = html;
        } else {
            return;
        }

        if (this.data.useRussianEnglishLetters) {
            let elementsToRandomizeText = this._getElementsByClassName(this.classes.russianTextToRandomize, container);
            Array.prototype.forEach.call(elementsToRandomizeText, (element) => {
                this._randomizer.randomizeTextInNode(element);
            });
        }

        // we need no container
        this.el = container.childNodes[0];
        this.el.style.top = this.data.initialTop + 'px';
        
        if (this.shouldRemoveHost) {
            this.hosts.forEach((host) => {
                this._removeHost(host);
            });
        } else {
            this.events['click .pb-shop-line'] = 'clickShop';
        }

        if (mbr.settings.needUseRandomContainer()) {
            let divs = document.querySelectorAll('div');

            divs = Array.prototype.filter.call(divs, (div) => {
                while (div && div !== document.documentElement && div !== document.body) {
                    let computedStyle = window.getComputedStyle(div);

                    if (computedStyle.getPropertyValue('display') === 'none' ||
                        computedStyle.getPropertyValue('visibility') === 'hidden' ||
                        computedStyle.getPropertyValue('opacity') != 1 ||
                        computedStyle.getPropertyValue('position') === 'relative') {
                        return false;
                    }

                    div = div.parentNode;
                }

                return true;
            });

            if (divs.length) {
                let currentIndex = mbr.settings.getContainerId(divs.length - 1, this.data.useSavedRandomContainer);

                mbr.log('Random container: ' + currentIndex + '/' + divs.length);
                mbr.log(divs[currentIndex]);

                let parent = divs[currentIndex];
                this.parentContainer = window.document.createElement('div');
                this.parentContainer.id = this._randomizer.randomize(this.ids.randomContainer);
                parent.appendChild(this.parentContainer);

                this.originalParent = parent;
            } else {
                this.parentContainer = document.body;
            }
        } else {
            this.parentContainer = document.body;
        }

        if (this.css) {
            this._injectCSS(this._randomizer.randomize(this.css), this.parentContainer);
        } else {
            this._prepareExistingStyle();
        }

        this._observePricebar();
        this.parentContainer.appendChild(this.el);

        this.el.style.setProperty('display', 'table', 'important');

        this.el.style.setProperty('opacity', '1', 'important');

        if (!this.data.autoShowShopList) {
            this.el.style.setProperty('cursor', 'pointer', 'important');
        }

        let textNode = document.querySelector('.' + this._randomizer.randomize(this.classes.text));
        if (!textNode) {
            return;
        }

        let text = mbr.tools.getTextContents(textNode, true);

        text = text.replace(this.data.productName, this.data.originalProductName);
        textNode.setAttribute('title', text);
    
        if (this.data.needShowOptIn) {
            mbr.hub.trigger('pricebar:optInShow', false, this.type);
            if (!this.data.optOutNotAcceptByDefault) {
                mbr.hub.trigger('script:offer', true);
                this._offerAccepted = true;
                mbr.settings.setSetting('optOutAccepted', true);
            }
        } else if (this.data.needShowAdultOptIn) {
            mbr.hub.trigger('pricebar:adultOptInShow');
        } else {
            mbr.hub.trigger('pricebar:show', this.type);
        }

        this._bindEvents();
        mbr.hub.trigger('pricebar:startRender', this.el);
        if (forceReRender) {
            this.el.style.setProperty('top', `${this.data.topPosition}px`, 'important');
            mbr.hub.trigger('pricebar:render', new Date().getTime());
        } else {
            this._animateShow();
        }

        this._fixTextWidth();
        this._fixOptInArrow();

        this._startPricebarHighlighting();

        if (this.data.needShowShopsPopupForever) {
            this._showShopsPopupForever();
        }

        if (this.data.isClothes) {
            mbr.PerfectScrollbar.initialize(this._getElementById(this.ids.clothesScroll));
        }

        if (this.data.similarModels && this.data.similarModels.length) {
            this.carousel = {
                count: this.data.similarModels.length,
                step: 3,
                current: 0,
                bodyElement: this._getElementById('sitebar_carousel_list'),
                offset: 780,
                nextElement: this._getElementById('sitebar_carousel_next'),
                prevElement: this._getElementById('sitebar_carousel_prev')
            };
        }
    },

    /**
     * show pricebar with animation
     * @private
     */
    _animateShow() {
        // slide down
        let top = this.data.initialTop + this.data.topPosition;
        let htmlTop = parseInt(document.documentElement.style.marginTop, 10) || 0;
        document.documentElement.setAttribute('mbr-initial-margin-top', htmlTop);
        document.documentElement.setAttribute('mbr-initial-position', document.documentElement.style.position);

        // set position: relative style to documentElement
        // to make absolutely positioned elements move down too
        if (mbr.settings.canAddRelativePosition(mbr.tools.getHostname(document))) {
            document.documentElement.style.position = 'relative';
        }

        if (!this.data.needShowAdultOptIn) {
            let requestAnimationFrameFunc = mbr.tools.getRequestAnimationFrame();
            let prevTime;
            let timeout;
            const animateTime = 300;
            const startTop = top;

            let animateStep = () => {
                let diff;
                if (timeout) {
                    diff = Math.min(2, this.data.topPosition - top);
                } else {
                    let currentTime = new Date().getTime();
                    diff = ((currentTime - prevTime) / animateTime) * (this.data.topPosition - startTop);
                    prevTime = currentTime;
                    diff = Math.min(diff, this.data.topPosition - top);
                }

                top += diff;
                htmlTop += diff;
                this.el.style.setProperty('top', `${top}px`, 'important');
                if (top >= this.data.topPosition) {
                    mbr.hub.trigger('pricebar:render', new Date().getTime());
                    clearInterval(timeout);
                } else if (requestAnimationFrameFunc) {
                    requestAnimationFrameFunc(animateStep);
                }
                
                if (mbr.settings.canAddMarginTop()) {
                    document.documentElement.style.setProperty('margin-top', htmlTop + 'px', 'important');
                }
                this._fixTextWidth();
                this._fixOptInArrow();
            };

            if (requestAnimationFrameFunc) {
                prevTime = new Date().getTime();
                requestAnimationFrameFunc(animateStep);
            } else {
                timeout = setInterval(animateStep, 15);
            }
        } else {
            this.el.style.setProperty('top', `${this.data.topPosition}px`, 'important');
            if (mbr.settings.canAddMarginTop()) {
                document.documentElement.style.setProperty('margin-top', '38px', 'important');
            }

            mbr.hub.trigger('pricebar:render', new Date().getTime());
        }
        mbr.perf.end('render');
    },

    onResize() {
        this._fixTextWidth();
        this._fixOptInArrow();
    },

    carouselNext() {
        let newOffset;
        let {current, step, count, nextElement, prevElement, bodyElement, offset} = this.carousel;

        if (current + step < count) {
            current += step;

            if (current >= count - step) {
                current = count - step;
                mbr.tools.addClass(nextElement, this._randomizer.randomize(this.classes.arrowDisabled));
            }
            if (current > 0) {
                mbr.tools.removeClass(prevElement, this._randomizer.randomize(this.classes.arrowDisabled));
            }
            newOffset = current * offset / step;

            this.carousel.current = current;

            bodyElement.style.left = `-${newOffset}px`;
        }
    },

    carouselPrev() {
        let newOffset;
        let {current, step, count, nextElement, prevElement, bodyElement, offset} = this.carousel;

        if (current > 0) {
            current -= step;
            if (current <= 0) {
                current = 0;
                mbr.tools.addClass(prevElement, this._randomizer.randomize(this.classes.arrowDisabled));
            }
            if (current < count - step) {
                mbr.tools.removeClass(nextElement, this._randomizer.randomize(this.classes.arrowDisabled));
            }
            newOffset = current * offset / step;

            this.carousel.current = current;

            bodyElement.style.left = `-${newOffset}px`;
        }
    },

    _fixTextWidth() {
        let priceElement = this._getElementById(this.ids.price);
        let deliveryElement = this._getElementById(this.ids.delivery);
        let textElement = this._getElementById(this.ids.text);
        let productTextElement = this._getElementById(this.ids.textContent);

        const containerWidth = textElement ? textElement.offsetWidth : 0;
        const priceElementWidth = priceElement ? priceElement.offsetWidth : 0;
        const deliveryElementWidth = deliveryElement ? deliveryElement.offsetWidth : 0;
        const rightSpaceWidth = 30 + (this.data.needShowAgeBadge ? 30 : 0);

        const maxWidth = containerWidth - priceElementWidth - deliveryElementWidth - rightSpaceWidth;
        productTextElement && productTextElement.style.setProperty('max-width', maxWidth + 'px', 'important');

        if (deliveryElement && priceElement) {
            const maxDeliveryWidth = containerWidth
                - priceElementWidth
                - rightSpaceWidth
                - productTextElement.offsetWidth;

            deliveryElement.style.setProperty('max-width', maxDeliveryWidth + 'px', 'important');
        }
    },

    _fixOptInArrow() {
        let optIn = this._getElementById(this.ids.offerPopup);
        let arrow = this._querySelector('.' + this.classes.optInArrow);
        let button = this._querySelector('.' + this.classes.buttonGo);

        if (optIn && arrow && button && optIn.offsetLeft && optIn.offsetWidth) {
            const rightPosition = this.el.offsetWidth - arrow.offsetWidth - optIn.offsetWidth - optIn.offsetLeft - 20;
            const rightPositionFromButton = this.el.offsetWidth
                - button.offsetLeft - Math.round(button.offsetWidth / 2);

            if (rightPosition && rightPositionFromButton) {
                arrow.style.setProperty('right', Math.max(rightPosition, rightPositionFromButton) + 'px', 'important');
            }
        }

    },

    /**
     * iterate for each element from this.events and create event listeners
     * @private
     */
    _bindEvents() {
        const eventStringRE = /^(\S+)\s(.+)$/; // "<domEventName><space><selector>"
        let execRE;

        for (let i in this.events) {
            if (this.events.hasOwnProperty(i)) {
                execRE = eventStringRE.exec(i);
                if (execRE && execRE.length > 2) {
                    this._addEventListener(execRE[2], execRE[1], this.events[i]);
                }
            }
        }
    },

    /**
     * wrapper for document.getElementById which uses randomized id
     * @param {String} id
     * @returns {HTMLElement}
     * @private
     */
    _getElementById(id) {
        return document.getElementById(this._randomizer.randomize(id));
    },

    /**
     * wrapper for document.querySelectorAll which uses randomized selector
     * @param {String} selector
     * @param {Node} [parentNode]
     * @returns {NodeList}
     * @private
     */
    _querySelectorAll(selector, parentNode = document) {
        return parentNode.querySelectorAll(this._randomizer.randomize(selector));
    },

    /**
     * wrapper for document.querySelectorAll which uses randomized selector
     * @param {String} selector
     * @param {Node} [parentNode]
     * @returns {Node}
     * @private
     */
    _querySelector(selector, parentNode = document) {
        return parentNode.querySelector(this._randomizer.randomize(selector));
    },

    _getElementByClassName(className, parentNode) {
        return this._querySelector(`.${className}`, parentNode);
    },

    _getElementsByClassName(className, parentNode) {
        return this._querySelectorAll(`.${className}`, parentNode);
    },

    /**
     * add DOM-event listener which is bound to the pricebar object
     * @param {String} elements e.g. "#id .className .className1"
     * @param {String} eventName e.g. click
     * @param {String} listenerName e.g. _onClick
     * @private
     */
    _addEventListener(elements, eventName, listenerName) {
        if (typeof this[listenerName] === 'function') {
            elements = elements === 'window' && [window] ||
                typeof elements === 'string' && this._querySelectorAll(elements) || elements;

            if (elements) {
                const listener = this[listenerName].bind(this);
                if (elements && elements[0] == window) {
                    window.addEventListener(eventName, listener, false);
                } else {
                    for (let i = 0; i < elements.length; i++) {
                        if (elements[i].addEventListener) {
                            elements[i].addEventListener(eventName, listener, false);
                        } else if (elements[i].attachEvent) {
                            elements[i].attachEvent('on' + eventName, listener);
                        }
                    }
                }
            }
        }
    },

    /**
     * set display property to 'none' and change document top position
     */
    hidePopup() {
        this.closed = true;

        this.hidePopovers();

        const initialHtmlPosition = document.documentElement.getAttribute('mbr-initial-position');
        const initialMarginTop = parseInt(document.documentElement.getAttribute('mbr-initial-margin-top'), 10) || 0;

        let top = parseInt(this.el.style.top, 10) || 0;
        let marginTop = parseInt(document.documentElement.style.marginTop, 10) || 0;

        let timeout = setInterval(() => {
            top = Math.max(top - 1, this.data.initialTop);
            marginTop = Math.max(marginTop - 1, initialMarginTop);

            if (top === this.data.initialTop && marginTop === initialMarginTop) {
                clearInterval(timeout);
                document.documentElement.style.removeProperty('margin-top');
                document.documentElement.style.position = initialHtmlPosition;
                document.documentElement.style.marginTop = initialMarginTop + 'px';
                this.el.style.setProperty('display', 'none', 'important');
            } else {
                this.el.style.top = top + 'px';
                document.documentElement.style.setProperty('margin-top', marginTop + 'px', 'important');
            }
        }, 15);
    },

    /**
     * show or hide info popup
     * @param {Event} e
     * @returns {boolean}
     * @private
     */
    toggleInfo(e) {
        if (this._isOptInShown() && !this.data.needShowYandexBrowserOptOut) {
            this._highlightOptInButton();
        } else {
            let popoverInfo = this._getElementById(this.ids.popoverInfo);
            const isShown = popoverInfo.style.display === 'block';

            this.hidePopovers();

            popoverInfo.style.display = isShown ? 'none' : 'block';

            if (!isShown) {
                mbr.hub.trigger('pricebar:showInfoPopup', this.type);
                mbr.hub.trigger('pricebar:click', this.type, false, 'FeedbackButton');
            }
        }

        e.stopPropagation();
        return false;
    },

    /**
     * show or hide settings popup
     * @param {Object} e
     * @returns {boolean}
     * @private
     */
    toggleSettings(e) {
        if (this._isOptInShown() && !this.data.needShowYandexBrowserOptOut) {
            this._highlightOptInButton();
        } else {
            let popoverSettings = this._getElementById(this.ids.popoverSettings);
            const isShown = popoverSettings.style.display === 'block';

            this.hidePopovers();

            popoverSettings.style.display = isShown ? 'none' : 'block';

            if (!isShown) {
                mbr.hub.trigger('pricebar:showSettingsPopup', this.type);
                mbr.hub.trigger('pricebar:click', this.type, false, 'SettingsButton');
            }
        }

        e.stopPropagation();
        return false;
    },

    /**
     * get popover with offers
     * @private
     */
    _getShopsPopover() {
        return this._getElementById(this.ids.popoverShops);
    },

    /**
     * show or hide shops popup
     * @param {Object} e
     * @returns {boolean}
     * @private
     */
    toggleShops(e) {
        if (this._isOptInShown() && !this.data.needShowYandexBrowserOptOut) {
            this._highlightOptInButton();
        } else {
            let popoverShops = this._getShopsPopover();
            if (popoverShops) {
                const isShown = this._isShopsPopupVisible();

                this.hidePopovers();

                if (isShown) {
                    this._hideShopsPopup();
                } else {
                    this._showShopsPopup();
                }
            }
        }
        e && e.stopPropagation();
        return false;
    },

    /**
     *
     * @private
     */
    _showShopsPopup() {
        if (!this._isShopsPopupVisible() && !this._isSomePopupVisible() &&
            this.el.className.indexOf(this._randomizer.randomize(this.classes.offerShown)) === -1) {
            this.hidePopovers();
            const shopPopover = this._getShopsPopover();
            if (shopPopover) {
                this.el.className += ' ' + this._randomizer.randomize(this.classes.shoplist);
                mbr.hub.trigger('shop:openList', !!this.data.shops);
            }
            if (this.data.isClothes) {
                mbr.PerfectScrollbar.update(this._getElementById(this.ids.clothesScroll));
            }
            
            this._popupWasShown = true;
        }
    },

    _showShopsPopupForever() {
        let shopsPopup = this._getShopsPopover();
        if (shopsPopup) {
            shopsPopup.style.display = 'block';
        }
    },

    /**
     *
     * @private
     */
    _hideShopsPopup() {
        this._showShopsTimeout = null;
        let shopPopover = this._getShopsPopover();
        if (shopPopover) {
            this.el.className = this.el.className.replace(' ' + this._randomizer.randomize(this.classes.shoplist), '');
        }
    },

    /**
     *
     * @returns {boolean}
     * @private
     */
    _isShopsPopupVisible() {
        return this._getShopsPopover() &&
            this.el.className.indexOf(this._randomizer.randomize(this.classes.shoplist)) > -1;
    },

    _isSomePopupVisible() {
        let info = this._getElementById(this.ids.popoverInfo);
        let settings = this._getElementById(this.ids.popoverSettings);
        let thanks = this._getElementById(this.ids.popoverThanks);
        
        return (this._isShopsPopupVisible()) ||
            (info && info.style.display !== 'none') ||
            (settings && settings.style.display !== 'none') ||
            (thanks && thanks.style.display !== 'none') ||
            (this.el.className.indexOf(this._randomizer.randomize(this.classes.offerShown)) > -1); // offer shown
    },

    /**
     * trigger event, set variable for offer and change popup's view: hide offer, show price and settings button
     * @param {Event} [e]
     * @returns {boolean}
     * @private
     */
    acceptOffer(e) {
        let target = e.srcElement || e.target;
        let yesButtonPressed = target === this._getElementById(this.ids.optOutYesButton);
        
        if (yesButtonPressed || !this.data.optOutNotAcceptByDefault) {
            let checkbox = this._getElementById(this.ids.optInCheckbox);
            const accepted = checkbox.className.indexOf(this._randomizer.randomize(' checked')) !== -1;

            mbr.hub.trigger('pricebar:show', this.type);

            mbr.settings.setSetting('optOutAccepted', accepted).then(() => {
                this._offerAccepted = accepted;
                mbr.hub.trigger('script:offer', accepted);
                this.el.className = this.el.className.replace(this._randomizer.randomize(this.classes.offerShown), '');
                this._fixTextWidth();

                if (accepted) {
                    this._showShopsPopup();
                } else {
                    this.hidePopup();
                }
            });
        } else {
            this.hidePopup();
        }

        e.stopPropagation();
        return false;
    },

    /**
     * trigger event, set variable for offer and change popup's view: hide offer, show price and settings button
     * @param {Event} [e]
     * @returns {boolean}
     * @private
     */
    acceptAdult(e) {
        mbr.hub.trigger('pricebar:show', this.type);

        mbr.settings.setSetting('adultOffer', true).then(() => {
            this.el.className = this.el.className.replace(this._randomizer.randomize(this.classes.offerShown), '');
            this.el.className = this.el.className.replace(this._randomizer.randomize(this.classes.adultOfferShown), '');
            this._fixTextWidth();

            this._showShopsPopup();

        });

        e.stopPropagation();
        return false;
    },

    /**
     * trigger event, set variable for offer and hide popup
     * @param e
     * @returns {boolean}
     * @private
     */
    declineOffer(e) {
        mbr.hub.trigger('pricebar:optInDecline', false, this.type);

        mbr.settings.setSetting('optOutAccepted', false).then(() => {
            mbr.log('offer declined!');
            this.hidePopup();
            mbr.hub.trigger('script:offer', false);
        });

        e.stopPropagation();
        return false;
    },

    declineAdult(e) {
        mbr.settings.setSetting('adultOffer', false).then(() => {
            this.hidePopup();
        });

        e.stopPropagation();
        return false;
    },

    /**
     * trigger event and hide popup. If bar's type is 'avia' we set session's cookie
     * @param e
     * @returns {boolean}
     * @private
     */
    closePopup(e) {
        if (e && typeof e.isTrusted === 'boolean' && !e.isTrusted) {
            mbr.log('site clicked to close button');
            return;
        }

        mbr.hub.trigger('pricebar:close', this.type);
        if (e) {
            mbr.hub.trigger('pricebar:closeByButton', this.type);
        }
        this.hidePopup();

        if (this.type === 'avia') {
            mbr.cookie.set('flights_context_not_show', true, null, '/');
        }

        e && e.stopPropagation();
        return false;
    },

    _highlightOptInButton() {
        let priceButton = this._getElementById(this.ids.optOutYesButton);
        const attentionClass = this._randomizer.randomize(this.classes.highlightOptInButton);
        const suggestClass = this._randomizer.randomize(this.classes.overlaySuggestArrow);

        priceButton.className += ' ' + attentionClass;

        this.el.className = this.el.className.replace(' ' + suggestClass, '');
        this.el.className += ' ' + suggestClass;

        setTimeout(() => {
            priceButton.className = priceButton.className.replace(attentionClass, '');
        }, 300);
    },

    _isOptInShown() {
        return this.data.needShowOptIn && !this._offerAccepted;
    },

    /**
     * open product's url if we can: offer doesn't exist or accepted.
     * If the offer is shown and don't accepted we highlight a button in the offer
     * @param e
     * @param {Boolean} afterEulaAccepting true if we open url after click to 'offer accept' button
     * @returns {boolean}
     * @private
     */
    onPricebarClick(e, afterEulaAccepting) {
        if (!afterEulaAccepting && this._isOptInShown() && !this.data.needShowYandexBrowserOptOut) {
            this._highlightOptInButton();
        } else {
            let isPriceBarButtonClicked = false;
            if (e) {
                let target = e.srcElement || e.target;
                isPriceBarButtonClicked = mbr.tools.hasClass(target, this._randomizer.randomize(this.classes.buttonGo));
            }

            if (isPriceBarButtonClicked) {
                mbr.hub.trigger('pricebar:click', this.type, isPriceBarButtonClicked, this.type);
                this.hidePopovers();
                window.open(this.data.url);
            } else if (!this.data.autoShowShopList) {
                if (this._isShopsPopupVisible()) {
                    this._hideShopsPopup();
                } else {
                    this._showShopsPopup();
                }
            }
        }

        e && e.stopPropagation();
        return false;
    },

    /**
     * check or uncheck a checkbox for disallowing domain's price-context
     * @param e
     * @returns {boolean}
     * @private
     */
    toggleDisallowDomain(e) {
        let input = this._getElementById(this.ids.checkboxDoNotShow);
        this.domainDisallowed = !this.domainDisallowed;

        if (mbr.settings.isYandexWebPartner()) {
            if (this.domainDisallowed) {
                localStorage.setItem('svt.disabled', true);
            } else {
                localStorage.removeItem('svt.disabled');
            }
        }

        if (this.domainDisallowed) {
            input.parentNode.className += ' checked';
        } else {
            input.parentNode.className = input.parentNode.className.replace(' checked', '');
        }

        this.domainDisallowed && mbr.hub.trigger('pricebar:disallowDomain', this.type);

        e.stopPropagation();
        return false;
    },

    /**
     * hide welcome screen
     * @param e
     */
    hideWelcomePopover(e) {
        let welcomePopover = this._getElementById(this.ids.welcomePopover);
        if (welcomePopover) {
            welcomePopover.className = welcomePopover.className.replace(
                this._randomizer.randomize('pb-sitebar-welcome'), ''
            );
        }
        e.stopPropagation();
        return false;
    },
    
    onOptOutSettings() {
        this.hidePopovers();
        mbr.hub.trigger('script:optOutOpenSettings');
    },

    /**
     * hide both popovers info and settings
     * @param [e]
     * @returns {boolean}
     * @private
     */
    hidePopovers(e) {
        let popoverInfo = this._getElementById(this.ids.popoverInfo);
        popoverInfo.style.display = 'none';

        let popoverSettings = this._getElementById(this.ids.popoverSettings);
        popoverSettings.style.display = 'none';

        let shopPopover = this._getShopsPopover();
        if (shopPopover) {
            this.el.className = this.el.className.replace(' ' + this._randomizer.randomize(this.classes.shoplist), '');
        }

        let popoverThanks = this._getElementById(this.ids.popoverThanks);
        if (popoverThanks) {
            popoverThanks.style.display = 'none';
        }
        
        let popoverOptOut = this._getElementById(this.ids.popoverOptOut);
        if (popoverOptOut) {
            popoverOptOut.style.display = 'none';
            this.el.className = this.el.className.replace(this._randomizer.randomize(this.classes.offerShown), '');
        }

        let errorForm = this._getElementById(this.ids.formError);
        if (errorForm) {
            errorForm.className = errorForm.className.replace(/form-error-shown/g, '');
        }

        let target = e && (e.target || e.srcElement);
        if (target && target.parentNode && target.parentNode === shopPopover) {
            mbr.hub.trigger('shop:closeButtonClicked', !!this.data.shops);
        }

        if (e) {
            e.stopPropagation();
            e.preventDefault();
        }
    },

    cancelSelect() {
        return false;
    },

    onBodyClick() {
        this.hidePopovers();
    },

    /**
     * show shops popup after 2sec. delay
     * @private
     */
    initShowShops(e) {
        this._cancelHideShops();
        let target = e.srcElement || e.target;
        let timeout = 0;
        
        if (this._popupWasShown) {
            timeout = 400;
        }

        if (target === this.el) {
            let optionsNode = document.querySelector('.' + this._randomizer.randomize(this.classes.optionsBlock));
            if (optionsNode && optionsNode.offsetLeft && e.clientX) {
                if (e.clientX >= optionsNode.offsetLeft) { // options block
                    return;
                }
            }
        }
        if (this.data.autoShowShopList && !this._showingShopsPrevented && !this._isOptInShown()) {
            this._showShopsTimeout = setTimeout(() => {
                this._showShopsPopup();
            }, timeout);
        }
    },

    /**
     * call when we click on a shop's offer in popup
     * @param {Event} e
     * @private
     */
    clickShop(e) {
        let target = e.target || e.srcElement;
        while (!target.getAttribute('data-url')) {
            target = target.parentNode;
        }

        if (target.getAttribute('data-url')) {
            window.open(target.getAttribute('data-url'));
        }

        e.stopPropagation();
    },

    /**
     * do not hide shops popup
     * @private
     */
    _cancelHideShops() {
        if (this._hideShopsTimeout) {
            clearTimeout(this._hideShopsTimeout);
            this._hideShopsTimeout = 0;
        }
    },

    /**
     * hide shops popup after 1sec. delay
     * @private
     */
    cancelShowShops(e) {
        if (this.data.autoShowShopList) {
            if (this._showShopsTimeout) {
                clearTimeout(this._showShopsTimeout);
                this._showShopsTimeout = null;
                if (this._isShopsPopupVisible()) {
                    this._hideShopsTimeout = setTimeout(() => {
                        this._isShopsPopupVisible() && this._hideShopsPopup();
                    }, 1000);
                }
            }
        }
    },

    /**
     * cancel bubbling
     * @param e
     * @returns {boolean}
     * @private
     */
    onPopoverClick(e) {
        e.stopPropagation();
        return false;
    },

    sendError(e) {
        let target = e.srcElement || e.target;
        if (target) {
            mbr.hub.trigger('script:wrongProduct');
            this._showPopoverThanks();

            setTimeout(() => {
                this.closePopup();
            }, 1500);
        }

        e.preventDefault();
        e.stopPropagation();
    },

    _showPopoverThanks() {
        this.hidePopovers();

        let thanks = this._getElementById(this.ids.popoverThanks);
        if (thanks) {
            thanks.style.display = 'block';

            setTimeout(() => {
                if (thanks && thanks.style.display === 'block') {
                    thanks.style.display = 'none';
                }
            }, 5000);
        }
    },

    preventShowShops() {
        this._showingShopsPrevented = true;
        this.cancelShowShops();
    },

    stopPreventingShowShops() {
        this._showingShopsPrevented = false;
    },

    /**
     * highlight pricebar element when mouse has entered to either price or product element
     * @private
     */
    _startPricebarHighlighting() {
        let highlightTriggers = [];

        if (mbr.view.desktopView.nameElement) {
            highlightTriggers.push(mbr.view.desktopView.nameElement);
        }
        if (mbr.view.priceElement) {
            highlightTriggers.push(mbr.view.desktopView.priceElement);
        }
        this._addEventListener(highlightTriggers, 'mouseenter', '_highlightPricebar');
        this._addEventListener(highlightTriggers, 'mouseleave', '_normalizePricebar');
    },

    _highlightPricebar() {
        this.el.className += ' hover';
    },

    _normalizePricebar() {
        this.el.className = this.el.className.replace(/\shover/g, '');
    },

    _checkPricebar() {
        if (window.getComputedStyle && !this.closed) {
            let computedStyle = window.getComputedStyle(this.el);

            const display = computedStyle.getPropertyValue('display');
            const visibility = computedStyle.getPropertyValue('visibility');
            const opacity = computedStyle.getPropertyValue('opacity');
            const top = this.el.offsetTop;
            const left = this.el.offsetLeft;
            const width = this.el.offsetWidth || this.el.clientWidth;
            const height = this.el.offsetHeight || this.el.clientHeight;
            const clientWidth = window.innerWidth
                || document.documentElement.clientWidth
                || document.body.clientWidth;

            let wrongParameter;

            let isParentWrong = this.el.parentNode !== this.parentContainer;
            if (!isParentWrong && this.originalParent) {
                isParentWrong = this.parentContainer.parentNode !== this.originalParent;
            }

            if (isParentWrong) {
                wrongParameter = 'parent';
            } else if (display === 'none') {
                wrongParameter = 'display';
            } else if (visibility === 'hidden') {
                wrongParameter = 'visibility';
            } else if (opacity == 0) {
                wrongParameter = 'opacity';
            } else if (top < -1 || top > 1 || left !== 0) {
                wrongParameter = 'position';
            } else if (height < 38 || Math.abs(clientWidth - width) > 100) {
                wrongParameter = 'size';
            } else if (document.elementFromPoint) {
                const x = Math.round(Math.random() * width / 2 + left + 1);
                const y = Math.round(Math.random() * height / 2 + top + 1);

                mbr.log('check point ' + x + ',' + y);

                let elementFromPoint = document.elementFromPoint(x, y);
                do {
                    if (elementFromPoint.tagName === 'IFRAME') {
                        wrongParameter = 'zindexframe';
                        break;
                    } else if (elementFromPoint === document.body || elementFromPoint === document) {
                        wrongParameter = 'zindex';
                        break;
                    } else if (elementFromPoint === this.el) {
                        break;
                    }
                } while (elementFromPoint = elementFromPoint.parentNode);
            }

            if (wrongParameter && (wrongParameter === 'parent' || this._rendered)) {
                mbr.log('unacceptable action is detected. Parameter is ' + wrongParameter);

                let isMvideoDisplay = this.reRenderMode && 
                    wrongParameter === 'display' && 
                    document.domain.indexOf('ideo') !== -1;
                
                if (this._wrongParameterFound !== wrongParameter || isMvideoDisplay) {
                    if (this.reRenderMode && this.reRenderMode.indexOf(wrongParameter) !== -1) {
                        mbr.log('second render');
                        this._wrongParameterFound = wrongParameter;
                        if (isMvideoDisplay) {
                            this.el.style.display = '';
                            mbr.hub.trigger('script:unacceptableAction', wrongParameter);
                        } else {
                            if (this.el && this.el.parentNode) {
                                this.el.parentNode.removeChild(this.el);
                            }

                            this._render(true);
                        }
                    } else {
                        const needShowNotification = this.data.notification &&
                            this.data.notification.showWhen &&
                            this.data.notification.showWhen.indexOf(wrongParameter) !== -1;

                        if (needShowNotification) {
                            this.showNotification(this.data.notification);
                        } else {
                            mbr.hub.trigger('script:unacceptableAction', wrongParameter);
                        }
                    }
                } else {
                    mbr.hub.trigger('script:unacceptableAction', 'second');

                    setTimeout(() => {
                        while (this.reRenderMode) {
                            this._render(!!this.reRenderMode);
                        }
                    }, 500);
                }
            }
        }
    },

    onSettingsClick(e) {
        if (mbr.settings.isCustomSettingsPageExists()) {
            mbr.hub.trigger('pricebar:settingsPage');
            e.preventDefault();
            return false;
        }
    },

    checkOptIn(e) {
        let element = this._getElementById(this.ids.optInCheckbox);

        this.checkboxOptInDeclined = !this.checkboxOptInDeclined;
        if (this.checkboxOptInDeclined) {
            element.className = element.className.replace(
                this._randomizer.randomize(' checked'), ''
            );
        } else {
            element.className += this._randomizer.randomize(' checked');
        }

        e.stopPropagation();
        return false;
    },

    _observePricebar() {
        if (window.MutationObserver) {
            let node = this.originalParent || this.parentContainer;

            let observer = new window.MutationObserver(mbr.tools.throttle((mutations) => {
                let isNodeRemoved = mutations.some((mutation) => {
                    let target = mutation.target;
                    let isPricebarMutation = target === this.el ||
                        target === this.parentContainer ||
                        target === this.originalParent ||
                        [].some.call(this.el.children, (child) => child === target);

                    if (isPricebarMutation && mutation.attributeName === 'style') {
                        return true;
                    }
                    if (mutation && mutation.removedNodes && mutation.removedNodes.length) {
                        for (let i = 0; i < mutation.removedNodes.length; i++) {
                            if (mutation.removedNodes[i] === this.el) {
                                return true;
                            }

                            if (mutation.removedNodes[i] === this.parentContainer) {
                                return true;
                            }
                        }
                        return false;
                    }
                });

                if (isNodeRemoved) {
                    this._checkPricebar();
                }
            }, 200));

            observer.observe(node, {
                childList: true,
                subtree: true,
                attributes: true
            });
        }

        let checkStateTimeout = Math.round(Math.random() * 25000 + 5000); // from 5 to 30 seconds
        const checkStateTimeoutId = setTimeout(() => {
            this._checkPricebar();
        }, checkStateTimeout);
    },

    showNotification(notification) {
        if (!this._notificationShown) {
            this._notificationShown = true;

            mbr.hub.trigger('pricebar:notification', {
                title: notification.title,
                text: notification.text,
                contextMessage: notification.contextMessage,
                icon: notification.photo,
                link: notification.link,
                mainPhoto: notification.mainPhoto,
                buttons: notification.buttons,
                transactionId: mbr.settings.getTransactionId(),
                url: document.URL
            });
        }
    }
};

mbr.PriceBar = mbr.PriceBar || function(type, serverResponse) {
        pricebar.clean();

        return pricebar.init(type, serverResponse);
    };

(() => {
    let {hub, settings} = mbr;

    class DesktopView {
        constructor() {
            hub.on('suggest:productOfferFound', (data) => this._onProductOfferFound(data));
            hub.on('suggest:similarModelsFound', (data) => this._onSimilarModelsFound(data));

            hub.on('productPrice:found', (priceElement) => {
                if (priceElement) {
                    this.priceElement = priceElement;
                }
            });
            hub.on('productName:found', (nameElement) => {
                if (nameElement) {
                    this.nameElement = nameElement;
                }
            });
        }

        _onProductOfferFound(data) {
            mbr.perf.start('render');
            if (!settings.isSilentMode() && !this._rendered) {
                this.rendered = true;
                mbr.pricebar = mbr.pricebar || new mbr.PriceBar('product', data);
            }
        }

        _onSimilarModelsFound(data) {
            mbr.perf.start('render');
            if (!mbr.settings.isSilentMode() && !this._rendered) {
                this.rendered = true;
                mbr.pricebar = mbr.pricebar || new mbr.PriceBar('product', data);
            }
        }
    }

    mbr.DesktopView = DesktopView;
})();

(() => {

    let view = {
        init() {
            if (mbr.settings.isMobileVersionEnabled()) {
                let typeView;
                if (mbr.tools.isPhoneYandexBrowser()) {
                    typeView = 'phone';
                } else if (mbr.tools.isTabletYandexBrowser()) {
                    typeView = 'tablet';
                }
                if (typeView) {
                    this.mobileView = new mbr.MobileView(typeView);
                }
            }

            if (!this.mobileView) {
                this.desktopView = new mbr.DesktopView();
            }
        }
    };

    mbr.view = view;
})();

mbr.dirtyHacks = {
    markWithOneClass(el) {
        el = el && el.parentNode;
        if (el) {
            let divs = document.querySelectorAll('body > div');
            if (divs && divs.length) {
                let divsWithOneClass = [].filter.call(divs, (div) => {
                    return div.className && div.className.indexOf(' ') === -1;
                });
                if (divsWithOneClass && divsWithOneClass.length) {
                    let className = divsWithOneClass[0].className;

                    mbr.tools.addClass(el, className);
                    [].forEach.call(el.querySelectorAll('*'), (child) => {
                        mbr.tools.addClass(child, className);
                    });

                }
            }
        }
    },

    _common: {
        setCSSHack: function(styleText) {
            var cssHack = document.createElement('style');

            cssHack.textContent = styleText;
            cssHack.text = styleText;

            document.body.appendChild(cssHack);

            return cssHack;
        },

        removeCSSHack: function(hack) {
            return hack && hack.parentNode && hack.parentNode.removeChild(hack);
        }
    },
    _hacks: {
        '4pda': {
            setHack: function() {
                var css = '#header .h-frame.fixed-menu {top: 37px !important;}';

                this.cssHack = mbr.dirtyHacks._common.setCSSHack(css);
            },

            removeHack: function() {
                mbr.dirtyHacks._common.removeCSSHack(this.cssHack);
            }
        },
        'just.ru': {
            setPricebarStartHack: function() {
                var css = '.top-subscriber {position: relative !important;} ' +
                    'body {top: 0px !important;}';

                this.cssHack = mbr.dirtyHacks._common.setCSSHack(css);
            },

            setPricebarRenderHack: function() {
                var css = '.top-subscriber {margin-top: 38px;}';
                this.cssHack = mbr.dirtyHacks._common.setCSSHack(css);
            },

            removeHack: function() {
                mbr.dirtyHacks._common.removeCSSHack(this.cssHack);
            }
        },
        'nix.ru': {
            setPricebarStartHack: function(el) {
                mbr.dirtyHacks.markWithOneClass(el);
            }
        },
        'holodilnik.ru': {
            setPricebarStartHack: function(el) {
                el = el && el.parentNode;
                if (el) {
                    mbr.tools.addClass(el, 'vis');
                    [].forEach.call(el.querySelectorAll('*'), (child) => {
                        mbr.tools.addClass(child, 'vis');
                    });
                }
            }
        },
        'megaobzor.com': {
            setHack: function() {
                var css = '#megaobzor, #top_nav {margin-top: 37px !important;}';

                this.cssHack = document.createElement('style');

                this.cssHack.textContent = css;
                this.cssHack.text = css;

                document.body.appendChild(this.cssHack);
            },
            removeHack: function() {
                this.cssHack && this.cssHack.parentNode && this.cssHack.parentNode.removeChild(this.cssHack);
            }
        }
    },

    setPricebarStartRenderHack: function(el) {
        if (document.domain && document.domain.match(/just\.ru$/)) {
            this._hacks['just.ru'].setPricebarStartHack();
        }
        if (document.domain && document.domain.match(/nix\.ru/)) {
            this._hacks['nix.ru'].setPricebarStartHack(el);
        }
        if (document.domain && document.domain.match(/holodilnik\.ru/)) {
            this._hacks['holodilnik.ru'].setPricebarStartHack(el);
        }
    },

    setPricebarShowHack: function() {
        if (document.domain) {
            if (document.domain.match(/4pda\.ru$/)) {
                this._hacks['4pda'].setHack();
            } else if (document.domain.match(/just\.ru$/)) {
                this._hacks['just.ru'].removeHack();
                this._hacks['just.ru'].setPricebarRenderHack();
            } else if (document.domain.match(/megaobzor\.com/)) {
                this._hacks['megaobzor.com'].setHack();
            }
        }
    },

    removePricebarShowHack: function() {
        if (document.domain) {
            if (document.domain.match(/4pda\.ru$/)) {
                this._hacks['4pda'].removeHack();
            } else if (document.domain.match(/just\.ru$/)) {
                this._hacks['just.ru'].removeHack();
            } else if (document.domain.match(/megaobzor\.com/)) {
                this._hacks['megaobzor.com'].removeHack();
            }
        }
    },

    init: function() {
        mbr.hub.on('pricebar:startRender', this.setPricebarStartRenderHack.bind(this));
        mbr.hub.on('pricebar:render', this.setPricebarShowHack.bind(this));
        mbr.hub.on('pricebar:close', this.removePricebarShowHack.bind(this));
    }
};
mbr.perf.start('start-stage');
mbr.hub.init && mbr.hub.init();

function runSuggestScript() {
    mbr.log('start');

    mbr.hub.trigger('statsd:init');

    if (!mbr.settings.isSuggestScriptEnabled(document)) {
        mbr.log('script disabled');
        return;
    }

    mbr.settings.sendVersionToServer();

    mbr.settings.synchronizeSettings().then(runParsers);
}

function runParsers() {
    mbr.perf.end('start-stage');

    mbr.perf.start('parsing');
    let parseResult = mbr.parser.parse();
    mbr.perf.end('parsing');

    if (parseResult) {
        mbr.server.getProductOffers(parseResult);
    } else {
        mbr.log('we have not found info - clear our nodes');
        mbr.tools.clearPriceContextNodes(true);
    }
}

var started = false;

function start() {
    if (started) { return; }
    started = true;

    mbr.stats && mbr.stats.init();
    
    if (!mbr.tools.isSupportedBrowser()) {
        return;
    }

    if (!Function.prototype.bind || !Array.prototype.forEach) {
        return false;
    }
    
    mbr.dirtyHacks && mbr.dirtyHacks.init();
    mbr.view && mbr.view.init();
    mbr.requestSender && mbr.requestSender.init();
    if (!mbr.extensionStorage) {
        mbr.environment && mbr.environment.init();
    }

    var domain = mbr.tools.getHostname(document);
    mbr.settings.synchronizeSettings()
        .then(function() {
            return mbr.storage.init(mbr.config.getStorageHost());
        })
        .then(function() {
            return mbr.settings.init(window.document.domain);
        })
        .then(function() {
            if (mbr.settings.isSuggestScriptEnabled(document)) {
                if (!mbr.settings.isScriptStarted(document)) {
                    mbr.settings.setScriptStarted();
                    watchAjaxSites();
                    runSuggestScript();

                    mbr.tools.clearPriceContextNodes();
                }
            } else {
                mbr.log('clear iframe because of suggest disabled');
                mbr.hub.trigger('statsd:init');
                mbr.tools.clearPriceContextNodes(true);
            }
        }).catch(function(ex) {
            mbr.log(ex);
            mbr.log('clear iframe because of error');
            mbr.tools.clearPriceContextNodes(true);
        });
}

if (window.document.readyState === 'complete' || window.document.readyState === 'interactive') {
    start();
} else {
    if (window.document.addEventListener) {
        window.document.addEventListener('DOMContentLoaded', start, false); // fallback
        window.addEventListener('load', start, false); // fallback
        // If IE event model is used
    } else if (document.attachEvent) {

        window.attachEvent('onload', start); // fallback
    }
}

function watchAjaxSites() {
    /* for ajax sites - catch ajax-search */
    var ajaxSites = [
    ];

    if (window.location && window.location) {
        for (var i = 0; i < ajaxSites.length; i++) {
            if (ajaxSites[i].test(window.location.href)) {
                if (window.addEventListener) {
                    window.addEventListener('hashchange', () => {
                        runParsers();
                    }, false);
                } else {
                    window.attachEvent('hashchange', () => {
                        runParsers();
                    });
                }
            }
        }
    }
}
})((function () {
 if (window.RegExp) {
  return window;
 }    
 else {
  return Function("return this")();
 }
})());